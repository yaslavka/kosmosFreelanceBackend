window.utils && window.utils.canExecute && window.utils.canExecute();!function r(i,s,o){function a(t,e){if(!s[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},i[t][0].call(n.exports,function(e){return a(i[t][1][e]||e)},n,n.exports,r,i,s,o)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),o=r(e("@babel/runtime/helpers/toConsumableArray")),a=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,u.default)(i,e);var r=h(i);function i(e,t){(0,a.default)(this,i),(n=r.call(this)).config=e,n._resPack=t,n.background=n._initBackground(e),n.timeToShift=e.timeToShift;var n,t=e.divider;return n.shiftCords=(0,o.default)(new Array(t)).reduce(function(e,t,n){var e=(0,s.default)(e,2),r=e[0],e=e[1];return r.push(e*(n+1)),[r,e]},[[],-n.background.width/t]).first,n.index=0,n.generalScale=1,n.addChild(n.background),n._overlay=n._createOverLay(),n}return(0,l.default)(i,[{key:"_initBackground",value:function(e){var t=e.zOrder,n=e.spine,r=e.position,i=e.play,e=e.displayGroup,s=r.x,r=r.y,n=new c2d.display.Spine(this._resPack.getAsset(n));return n.position.set(s,r),n.play.apply(n,(0,o.default)(i)),n.displayGroup=game.displayGroups[e],n.zOrder=t,n}},{key:"doStep",value:function(e){var o=this;this.t=c2d.Tween.get(this).to({x:this.shiftCords[this.index++]*this.generalScale},this.timeToShift,c2d.Tween.Ease.sineOut).call(function(){return o.tOnComplete()}),this.tOnComplete=function(){e(),o.index===o.shiftCords.length/2&&(o.index=0,["","3"].reduce(function(e,t,n){var t=o.background.findSlot("background_main"+t).sprites.background_main,r=t.position,i=r.x,r=r.y,s=n?n-1:n+1;return e[n].sprite=t,e[s].x=i,e[s].y=r,e},[{},{}]).forEach(function(e){var t=e.sprite,n=e.x,e=e.y;t.position.set(n,e)}),o.x=0,o.t=null,o.tOnComplete=null)}}},{key:"_createOverLay",value:function(){var e=new PIXI.Graphics;return e.beginFill(0,1),e.drawRect(0,0,3840,2160),e.endFill(),(e=new c2d.display.Sprite(c2d.engine._renderer.generateTexture(e))).alpha=0,e.displayGroup=game.displayGroups.FOREGROUND,e.zOrder=this.background.zOrder,this.addChild(e),e}},{key:"setAlpha",value:function(){var e=this.config,t=e.alpha,n=e.startTime,r=e.waitTime,e=e.endTime;c2d.Tween.get(this._overlay).to({alpha:t},n).wait(r).to({alpha:0},e)}},{key:"setBackPositions",value:function(){this.t&&this.tOnComplete&&(this.t.setPaused(!0),this.x=this.shiftCords[this.index-1]*this.generalScale,this.tOnComplete()),this.background.scale.set(this.generalScale),this.index=0,this.x=0}}]),i}(c2d.display.Container);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/helpers/toConsumableArray":66}],2:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),p=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),d=r(e("@babel/runtime/helpers/toConsumableArray")),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,a.default)(i,e);var r=u(i);function i(e,t){var n;return(0,s.default)(this,i),(n=r.call(this,e,t))._resPack=t,n.config=e,n.backgrounds=n._initBackground(e),n.timeToShift=e.timeToShift,n.countOfTile=3,n.map=(0,d.default)(new Array(2*n.countOfTile)).map(function(e,t){return t}),n.index=0,n.flora={},n.nextTiles=2,n.generalScale=1,n.tiles=[["tile_1","tile_2"],["tile_3","tile_4"],["tile_5","tile_0"]],c2d.env.device.desktop()&&n.setInitFlora(),n}return(0,o.default)(i,[{key:"setInitFlora",value:function(){this.backgrounds.first.play("tile_0"),this.addFloraToBacks(this.backgrounds.first,"tile_0"),this.index=0}},{key:"addFloraToBacks",value:function(r,i){var s=this;Object.entries(this.config.tileFlora[i]).forEach(function(e){var e=(0,p.default)(e,2),t=e[0],e=e[1],n=e.spine,e=e.zOrder;(n=new c2d.display.Spine(s._resPack.getAsset(n))).zOrder="number"==typeof e?e:6,n.displayGroup=game.displayGroups.FOREGROUND,n.play("idle",!0),r.findSlot(t).currentSprite.addChild(n),s.flora[i]||(s.flora[i]=[]),s.flora[i].push({spine:n,bone:t})})}},{key:"removeAndAddFlora",value:function(e,i){var t,s=this;for(t in this.flora)t!==e&&(this.flora[t].forEach(function(e){e=e.spine;e.stop(),e.removeFromParent()}),this.flora[t].length=0);this.flora[e]&&this.flora[e].forEach(function(e){var t=e.spine,n=e.bone,r=s._cloneFlora(t);i.findSlot(n).currentSprite.addChild(r),t.stop(),t.destroy(),t.removeFromParent(),e.spine=r})}},{key:"_cloneFlora",value:function(e){var t=e.spineData,n=e.zOrder,r=e.displayGroup,e=e.currentTime,t=new c2d.display.Spine(t);return t.zOrder=n,t.displayGroup=r,t.play("idle",!0),t.state.tracks[0].trackTime=0,t.update(e),t}},{key:"_initBackground",value:function(e){var s=this,o=e.zOrder,a=e.spine,l=e.position,u=e.play,c=e.displayGroup,h=[1,3,5];return(0,d.default)(new Array(3)).map(function(e,t){var n=new c2d.display.Spine(s._resPack.getAsset(a)),r=(0,p.default)(u,2),i=r[0],r=r[1];return n.position.set(l.x*h[t],l.y),n.play(i+t,r),n.displayGroup=game.displayGroups[c],n.zOrder=o,s.addChild(n),n})}},{key:"doStep",value:function(t){var n=this,r=this.tiles[this.index];this.backgrounds.forEach(function(e,t){t&&(t=r[t-1],e.play(t,!0),n.addFloraToBacks(e,t))}),this.t=c2d.Tween.get(this).to({x:-c2d.designSize.width*this.nextTiles*this.generalScale},this.timeToShift,c2d.Tween.Ease.sineOut).call(function(){return n.tOnComplete()}),this.tOnComplete=function(){n.x=0;var e=r.last;n.swapBackgrounds(),n.removeAndAddFlora(e,n.backgrounds.first),n.index++,n.index=n.index===n.countOfTile?0:n.index,t(),n.t=null,n.tOnComplete=null}}},{key:"swapBackgrounds",value:function(){this.backgrounds=this.backgrounds.reverse();var e=this.backgrounds.first.position.x;this.backgrounds.first.position.x=this.backgrounds.last.position.x,this.backgrounds.last.position.x=e,this.x=0}},{key:"setBackPositions",value:function(){this.t&&this.tOnComplete&&(this.t.setPaused(!0),this.tOnComplete())}}]),i}(c2d.display.Container);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/helpers/toConsumableArray":66}],3:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),c=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/asyncToGenerator")),h=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/construct")),u=r(e("@babel/runtime/helpers/toConsumableArray")),l=r(e("@babel/runtime/helpers/classCallCheck")),p=r(e("@babel/runtime/helpers/createClass")),d=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),f=r(e("./sounds.js")),b=r(e("./ObjectChanger.js"));function m(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,d.default)(s,e);var r,i=v(s);function s(e,t){var n;return(0,l.default)(this,s),(n=i.call(this))._resPack=t,n.config=e,n.backgrounds=n._initBackground(e),n.timeToShift=e.timeToShift,n.offSetToStopping=e.offSetToStopping,n._raccoon=null,n._monster=null,n._map=null,n.flora={},n.events=(0,u.default)(new Array(10)).map(function(e,t){return t<3}),n.generalScale=1,n.arcThree=null,n.generatedSpine=null,n.oldGeneratedSpine=[],n.slotSpine=null,n.objectChanger=new b.default(e),n.isStartStoppingRaccoon=!1,n.particles=n.initParticles(e),n.setBackPositions(),n.generatedEventComplete=function(){return null},window.setPercentOfEvent=function(e){return n.setPercentOfEvent(e)},n.setPercentOfEvent(30),n}return(0,p.default)(s,[{key:"initParticles",value:function(e){var t=this,e=e.particle,n=e.texture,r=e.emitter,e=e.zOrder,n=[n,r].map(function(e){return t._resPack.getAsset(e)}),r=(0,a.default)(c2d.display.Emitter,(0,u.default)(n));return r.displayGroup=game.displayGroups.FOREGROUND,r.zOrder=e,this.addChild(r),r}},{key:"addFloraToBacks",value:function(r,i){var s=this;Object.entries(this.config.tileFlora[i]).forEach(function(e){var e=(0,h.default)(e,2),t=e[0],e=e[1],n=e.spine,e=e.zOrder;(n=new c2d.display.Spine(s._resPack.getAsset(n))).zOrder="number"==typeof e?e:6,n.displayGroup=game.displayGroups.FOREGROUND,n.play("idle",!0),r.findSlot(t).currentSprite.addChild(n),c2d.env.device.desktop()||"tile_2"!==i||"arctree_fg_mask2_placeholder"!==t||(s.arcThree=n,s.arcThree.visible=window.innerWidth>window.innerHeight),s.flora[i]||(s.flora[i]=[]),s.flora[i].push({spine:n,bone:t,time:+new Date})})}},{key:"_initBackground",value:function(e){var r=this,i=e.zOrder,s=e.spine,o=e.position,a=(e.play,e.displayGroup),l=[1,3];return(0,u.default)(new Array(2)).map(function(e,t){var n=new c2d.display.Spine(r._resPack.getAsset(s));return n.position.set(o.x*l[t],o.y),n.displayGroup=game.displayGroups[a],n.zOrder=i,r.addChild(n),n})}},{key:"symbolReplacer",get:function(){return this._symbolReplacer||(this._symbolReplacer=this.mainIndex.getLinkedComponent("symbolreplacer")),this._symbolReplacer}},{key:"raccoon",get:function(){return this._raccoon||(this._raccoon=this.mainIndex.getLinkedComponent("raccoon")),this._raccoon}},{key:"getMonster",value:function(){return this._monster||(this._monster=this.mainIndex.getLinkedComponent("monster")),this._monster}},{key:"setSteps",value:function(e,t){var n=this;this.backgrounds.forEach(function(e,t){return n.setTile(e,"tile_"+n.map[t])}),this.checkRandomEvent(t,0,0),this.map=e}},{key:"setTile",value:function(e,t){e.play(t)}},{key:"setInitFlora",value:function(e){e=this._map||this.map||e,this.addFloraToBacks(this.backgrounds.first,"tile_"+e[0])}},{key:"map",get:function(){return"number"==typeof window.setForceTile?[window.setForceTile,window.setForceTile]:this._map},set:function(e){this._map||this.setInitFlora(e),this._map=Object.entries(e).reduce(function(e,t){var t=(0,h.default)(t,2),n=t[0],t=t[1];return e[+n]=String(t),e},[])}},{key:"checkRandomEvent",value:function(e,t,n){e&&this.symbolReplacer.addToBackground(this.backgrounds[t],this.map[n])}},{key:"swapBackgrounds",value:function(){this.backgrounds=this.backgrounds.reverse();var e=this.backgrounds.first.position.x;this.backgrounds.first.position.x=this.backgrounds.last.position.x,this.backgrounds.last.position.x=e,this.x=0}},{key:"removeAndAddFlora",value:function(e,i){var t,s=this;for(t in this.flora)t!==e&&(this.flora[t].forEach(function(e){e=e.spine;e.stop(),e.destroy(),e.removeFromParent()}),this.flora[t].length=0);this.flora[e]&&(this.flora[e]=this.flora[e].filter(function(e,t,n){var r=e.bone,i=e.time,s=e.spine;return!(!n.find(function(e){var t=e.bone,e=e.time;return t===r&&e<i})&&n.find(function(e){var t=e.spine,e=e.bone;return s!==t&&r===e}))||(s.destroy(),s.removeFromParent(),!1)}),this.flora[e].forEach(function(e){var t=e.spine,n=e.bone,r=s._cloneFlora(t);i.findSlot(n).currentSprite.addChild(r),t.stop(),t.destroy(),t.removeFromParent(),e.spine=r}))}},{key:"_cloneFlora",value:function(e){var t=e.spineData,n=e.zOrder,r=e.displayGroup,e=e.currentTime,t=new c2d.display.Spine(t);return t.zOrder=n,t.displayGroup=r,t.play("idle",!0),t.state.tracks[0].trackTime=0,t.update(e),t}},{key:"doStep",value:function(t,n,r,e){var i=this,s=(this.slotSpine=null,this.initParticles(this.config)),o=(s.x=c2d.designSize.width*this.generalScale,this.addFloraToBacks(this.backgrounds.last,"tile_"+this.map.first),this.isStartStoppingRaccoon=!1,!e&&!n&&!r&&this.startGenerateEvent(this.backgrounds.last,+this.map.first));return new Promise(function(e){c2d.eventManager.dispatch("RACCOON_RUN"),i.raccoon.play("idle_to_run"),i.raccoon.setOnComplete(function(){return i.raccoon.play("run_idle",{},!0)},0),i.checkRandomEvent(r,1,0),i.tOnComplete=function(){i.particles.destroy(),i.particles=s,i.particles.x=0,i.getMonster().remove(),i.generatedEventComplete(),i.backgrounds.first.play("tile_"+i.map.first),i.checkRandomEvent(r,1,0),i.t=null,i.tOnComplete=null,i.swapBackgrounds(),i.removeAndAddFlora("tile_"+i.map.first,i.backgrounds.first)},i.rOnComplete=function(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0])return e();i.raccoon.play(n||r?"run_to_battle_idle":"run_to_calm_idle",{}),c2d.call(function(){return i.raccoon.setOnComplete(e,0)},20)},i.t=c2d.Tween.get(i).to({x:-c2d.designSize.width*i.generalScale},i.timeToShift,c2d.Tween.Ease.sineOut).call(function(){return i.tOnComplete()}),i.t.on("change",function(e){e.target.target.x<i.offSetToStopping&&!i.isStartStoppingRaccoon&&(i.isStartStoppingRaccoon=!0,i.raccoon.setOnComplete(function(){return i.rOnComplete()},0))})}).then(function(){i.generateRandomEvent(o,i.backgrounds.first,+i.map.first).then(function(e){!0===e&&i.raccoon.play(n||r?"battle_idle":"calm_idle",{trackId:0},!0),t()})})}},{key:"playTilePlant",value:function(t,e){return c2d.eventManager.dispatch(f.default[e]),new Promise(function(e){t.play("in"),t.onComplete=e}).then(function(){t.play("out",!0)})}},{key:"startGenerateEvent",value:function(e,t){if(12<t)return!1;var n,r=this.events.random();return this.config.preparedAnimation.includes(t)&&r&&((n=(0,h.default)(this.config.randomEvents[t],2))[0],n=n[1].inAnim,this.generatedSpine=this.getRandomSpine(t),this.generatedSpine.play(this.getMobileAnimation(t,n)),this.addRandomAnimation(e,t)),r}},{key:"getMobileAnimation",value:function(e,t){return c2d.env.device.desktop()||6!==e&&5!==e?t:t+(c2d.env.device.portrait()?"_portrait":"_landscape")}},{key:"setPercentOfEvent",value:function(e){this.events=(0,u.default)(new Array(100-e)).fill(!1).concat((0,u.default)(new Array(e)).fill(!0))}},{key:"getRandomSpine",value:function(e){this.generatedSpine&&this.oldGeneratedSpine.push(this.generatedSpine);var t=(0,h.default)(this.config.randomEvents[e],2),t=(t[0],t[1]),n=t.skeleton,t=t.zOrder,n=new c2d.display.Spine(this._resPack.getAsset(n));return this.changeObject(n,e),n.displayGroup=game.displayGroups.FOREGROUND,n.zOrder=t,n}},{key:"changeObject",value:function(e,t){!c2d.env.device.desktop()&&this.map&&(t="number"==typeof t?t:+this.map.first,this.objectChanger.changeObject(e,t))}},{key:"addRandomAnimation",value:function(e,t){if(this.generatedSpine){if(this.generatedSpine.parent&&!this.config.preparedAnimation.includes(t))return this.oldGeneratedSpine.push(this.generatedSpine),void(this.generatedSpine=null);var n=(0,h.default)(this.config.randomEvents[t],2),n=(n[0],n[1].skeleton);e.findSlot("".concat(t,"_random_").concat(n,"_placeholder")).currentSprite.addChild(this.generatedSpine)}}},{key:"playGenerateEvent",value:function(e,t){var n=this,t=(this.generatedSpine||(this.generatedSpine=this.getRandomSpine(t)),(0,h.default)(this.config.randomEvents[t],2)),t=(t[0],t[1]),r=t.inAnim,i=t.skeleton,t=t.idle;"idle"!==r&&(c2d.eventManager.dispatch(f.default[i]),this.generatedSpine.play(t||"idle")),"star"===i&&this.mainIndex.backgrounds.backGround.setAlpha(),e.addChild(this.generatedSpine),this.generatedEventComplete=function(){n.generatedEventComplete=function(){return null};var e=n.oldGeneratedSpine.length?n.oldGeneratedSpine:[n.generatedSpine];e.forEach(function(e){e&&e.destroy&&e.destroy()}),n.oldGeneratedSpine.length=0,n.generatedSpine=e.includes(n.generatedSpine)?null:n.generatedSpine},this.generatedSpine.onComplete=this.generatedEventComplete}},{key:"generateRandomEvent",value:(r=(0,o.default)(c.default.mark(function e(t,n,r){var i,s,o,a,l,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:if(o=(0,h.default)(this.config.randomEvents[r],3),a=o[0],l=o[1],o=o[2],this.config.randomEvents[r].length||8!==r||(i=this.getMonster(),c2d.eventManager.dispatch(f.default.funAttack),i.onResize(),i.play("reel_wilds","fun",!1,!0),i.play("scatter","fun",!1,!0).then(function(){return i.remove}),i.addToCurrentBackground(["reel_wilds","scatter"],n)),l&&(s="".concat(r,"_random_").concat(l.skeleton,"_placeholder"),l=l.isBackAnim?n:n.findSlot(s).currentSprite,this.playGenerateEvent(l,r)),o&&(s=n.findSlot(o).currentSprite.children.first,this.slotSpine=c2d.env.device.desktop()?null:s,this.changeObject(s,r),this.playTilePlant(s,o)),!a){e.next=28;break}l=a.slice(),o=l.pop(),a=m(l),e.prev=10,a.s();case 12:if((l=a.n()).done){e.next=19;break}return u=l.value,c2d.eventManager.dispatch(f.default[u]),e.next=17,this.raccoon.play(u,{trackId:0});case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:this.raccoon.play(o,{trackId:0},!0);case 28:return e.abrupt("return",Promise.resolve(!0));case 29:case"end":return e.stop()}},e,this,[[10,21,24,27]])})),function(e,t,n){return r.apply(this,arguments)})},{key:"setBackPositions",value:function(){var t=this,n=2*this.config.position.x,e=this.config.position,r=e.x,i=e.y;this.offSetToStopping=this.config.offSetToStopping*this.generalScale,this.changeObject(this.slotSpine||this.generatedSpine),[0,1].forEach(function(e){t.backgrounds[e].scale.set(t.generalScale),t.backgrounds[e].position.set(r+n*t.generalScale*e,i*Math.sqrt(t.generalScale))}),this.arcThree&&(this.arcThree.visible=window.innerWidth>window.innerHeight),this.skipRaccoonRunning()}},{key:"skipRaccoonRunning",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.t&&this.tOnComplete&&(this.t.setPaused(!0),this.tOnComplete(),this.rOnComplete(e))}}]),s}(c2d.display.Container);n.default=r},{"./ObjectChanger.js":4,"./sounds.js":6,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/construct":49,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/helpers/toConsumableArray":66,"@babel/runtime/regenerator":69}],4:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass"));n.default=function(){function n(e){var e=e.objectChanger,t=e.tileForChange,e=e.settingsForTile;(0,i.default)(this,n),this.tileForChange=t,this.settingsForTile=e}return(0,s.default)(n,[{key:"changeObject",value:function(e,t){var n,r;e&&this.tileForChange.includes(t)&&(n=c2d.env.device.portrait()?"portrait":"landscape",n=(t=this.settingsForTile[t][n]).pos,r=t.scale,t=t.animation,e.position.set(n.x,n.y),e.scale.set(r.x,r.y),t&&e.play(t))}}]),n}()},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/interopRequireDefault":55}],5:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),c=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/slicedToArray")),l=r(e("@babel/runtime/helpers/toConsumableArray")),u=r(e("@babel/runtime/helpers/classCallCheck")),h=r(e("@babel/runtime/helpers/createClass")),p=r(e("@babel/runtime/helpers/get")),d=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),f=r(e("@babel/runtime/helpers/getPrototypeOf")),b=r(e("./Background.js")),m=r(e("./Foreground.js")),y=r(e("./MiddleBackground.js"));function v(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,f.default)(n);return e=r?(e=(0,f.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,d.default)(s,e);var t,i=v(s);function s(){var e;(0,u.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).backgrounds={backGround:b.default,middleGround:y.default,foreGround:m.default},e._monster=null,e.defeatedMonsterName=!1,e.light=null,e.freeSpinBack=null,e.generalScale=1,c2d.Timeout.invoke(function(){e.onResize()},100),e}return(0,h.default)(s,[{key:"setForceGrot",value:function(){var e=this.backgrounds.middleGround.backgrounds.first;this.backgrounds.middleGround.setTile(e,"tile_13")}},{key:"initParticles",value:function(){var e=this.backgrounds,t=e.middleGround,e=e.middleGround.config;t.particles=t.initParticles(e)}},{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,p.default)((0,f.default)(s.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.backgrounds=this._initBackGrounds(),this.light=this._initLight(this.config.middleGround),this.addBlackBack()}},{key:"addBlackBack",value:function(){var e=c2d.env.device.tablet()?965:1e3;this.blackBack=(new PIXI.Graphics).beginFill(0,1).drawRect(0,-1e3,1e3,e).endFill(),this.blackBack.displayGroup=game.displayGroups.FOREGROUND,this.blackBack.zOrder=20,this._content.addChild(this.blackBack)}},{key:"_initLight",value:function(e){var e=e.light,t=e.displayGroup,n=e.spine,r=e.zOrder,i=e.position,e=e.play,n=new c2d.display.Spine(this._respack.getAsset(n)),i=(n.position.set(i.x,i.y),n.play.apply(n,(0,l.default)(e)),n.displayGroup=game.displayGroups[t],n.zOrder=r,new c2d.display.Container);return this._content.addChild(i),i.addChild(n),i}},{key:"monster",get:function(){return this._monster||(this._monster=this.getLinkedComponent("monster")),this._monster}},{key:"setMap",value:function(e){e=e.map;this.backgrounds.middleGround.map=e}},{key:"doStep",value:function(e,n){var r=this,i=e.map,s=e.is_fight_with_creature,o=e.random_event_type;return new Promise(function(e){for(var t in e=c2d.last(e,Object.entries(r.backgrounds).length),r.backgrounds.middleGround.setSteps(i),r.backgrounds)r.backgrounds[t].doStep(e,s,o,n)})}},{key:"setSteps",value:function(e,t){var n=this,r=t.map,t=t.random_event_type;"freeSpinGround"!==e?this.backgrounds[e].setSteps(r,t):(this.freeSpinBack=this.freeSpinBack||this.initFreeSpinBackGround(),(c2d.env.device.desktop()?["middleGround","foreGround"]:["middleGround"]).forEach(function(t){return n.backgrounds[t].backgrounds.forEach(function(e){n.backgrounds[t].removeAndAddFlora("",e)})})),this.setScales(!1)}},{key:"_initBackGrounds",value:function(){var r=this;return Object.entries(this.backgrounds).filter(function(e){e=(0,a.default)(e,1)[0];return c2d.env.device.desktop()||"foreGround"!==e}).reduce(function(e,t){var t=(0,a.default)(t,2),n=t[0],t=t[1];return e[n]=new t(r.config[n],r._respack),(e[n].mainIndex=r)._content.addChild(e[n]),e},{})}},{key:"initFreeSpinBackGround",value:function(){var e=this.config.freeSpinGround,t=e.spine,n=e.zOrder,r=e.position,i=e.play,e=e.displayGroup,t=new c2d.display.Spine(this._respack.getAsset(t));return t.position.set(r.x,r.y),t.zOrder=n,t.play.apply(t,(0,l.default)(i)),t.displayGroup=game.displayGroups[e],this._content.addChild(t),t}},{key:"addMonsterToMidGround",value:function(e){var t=this.monster.getCreature(e),e=(this.defeatedMonsterName=e,t.x),n=t.y,r=t.parent;t.removeFromParent(),this.backgrounds.middleGround.addChild(t),c2d.env.device.desktop()||(this.backgrounds.middleGround.parent.toLocal({x:e,y:n},r,t.position),n=(e=this.config.props).landscape,r=e.portrait,e=(c2d.env.device.portrait()?r:n).scale,r=t.scale.x,t.scale.set(r/e))}},{key:"onResize",value:(t=(0,o.default)(c.default.mark(function e(t){var n,r,i,s,o,a,l,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c2d.env.device.desktop())return e.abrupt("return");e.next=2;break;case 2:for(i in n=this.config.props,s=n.landscape,n=n.portrait,n=c2d.env.device.portrait()?n:s,s=n.x,o=n.y,n=n.scale,r=1.76<t?t/1.76:1,this.position.set(s,o),this.scale.set(n),this.generalScale=r,this.backgrounds)this.backgrounds[i].generalScale=r,this.backgrounds[i].setBackPositions();if(this.setScales(r),this.defeatedMonsterName){e.next=12;break}return e.abrupt("return");case 12:s=this.monster.getCreature(this.defeatedMonsterName),o=s.parent,s&&o===this.backgrounds.middleGround&&(a=s.x,l=s.y,u=this.monster.getMonsterPosition(this.defeatedMonsterName),u=u.scale,s.scale.set(u/n),this.backgrounds.middleGround.parent.toLocal({x:a,y:l},o,s.position));case 15:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"wait",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;return new Promise(function(e){return c2d.Timeout.invoke(e,t)})}},{key:"destroyMonster",value:function(){var e,t;this.defeatedMonsterName&&(t=(e=this.monster.getCreature(this.defeatedMonsterName)).y,e.y=0<t?-t:t)}},{key:"setScales",value:function(e){if(!c2d.env.device.desktop()){for(var t in e=e||this.generalScale,this.backgrounds)this.backgrounds[t].generalScale=e,this.backgrounds[t].setBackPositions();this.freeSpinBack&&this.freeSpinBack.scale.set(e);var n=this.config.freeSpinGround.position,r=n.x,n=n.y;this.freeSpinBack&&this.freeSpinBack.position.set(r,n*Math.sqrt(e))}}}]),s}(game.components.view);(n.default=r).ID="background",game.registerComponent(r,{})},{"./Background.js":1,"./Foreground.js":2,"./MiddleBackground.js":3,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/helpers/toConsumableArray":66,"@babel/runtime/regenerator":69}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={shadow:"G_RANDOM_DRAGON_SHADOW",fighting:"G_RANDOM_ARCA_FIGHT",funAttack:"G_RANDOM_FUN_ATTACK","100_strange_mushroom_placeholder":"G_RANDOM_MUSHROOM","9_random_plant_placeholder":"G_RANDOM_PLANT",joy:"RACCOON_JOY",run:"G_RANDOM_RUN",monster:"G_RANDOM_SCREAM",monster_red:"G_RANDOM_SCREAM",fun:"G_RANDOM_UFO",fun_star:"G_RANDOM_WISH"}},{}],7:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var h={BIG_WIN_SHOW:"Bigwin.BIG_WIN_SHOW",BIG_WIN_HIDE:"Bigwin.BIG_WIN_HIDE",BIG_WIN_STAGE:"Bigwin.BIG_WIN_STAGE",BIG_WIN_COUNT_STOP:"Bigwin.BIG_WIN_COUNT_STOP"},r=function(e){(0,l.default)(i,e);var t=c(i);function i(e){return(0,s.default)(this,i),(e=t.call(this,e))._spine=null,e._event=[],e._currentStage=0,e._labelSpine=null,e._label=null,e._count=0,e.currentNumber=0,e._coins=[],e._spawnInterval=-1,e._currentSpawnInterval=0,e._gravity=0,e.totalWinCount=0,e.secondPartMiltiplierActivated=!1,e.isBigWinPlayed=!1,e._popup=null,e._centralPoint=null,e.callback=function(){return null},e}return(0,o.default)(i,[{key:"popup",get:function(){return this._popup||(this._popup=this.getLinkedComponent("popup")),this._popup}},{key:"createNewLabels",value:function(){var e=this,t=(this._gravity=9.8*(c2d.env.device.desktop()?2:1),this._spawnInterval=30*(this.config.stages.length-this._currentStage-1),this.spine="big_win",this._labelSpine=new c2d.display.Spine(this._respack.getAsset("big_win_counter")),this._labelSpine.position.y=20,this._content.addChild(this._labelSpine),this._labelSpine.play("in_counter"),this._labelSpine.onComplete=function(){e._labelSpine.play("idle_counter",!0)},this._labelSpine.zOrder=2e3,this.dispatch(h.BIG_WIN_SHOW),this.totalWinCount=1<this.slotsModel.multiplier?this.slotsModel.totalWin/this.slotsModel.multiplier:this.slotsModel.totalWin,this._labelSpine.getChildByName("text"));t&&t.children.length&&(this._label=new c2d.display.LabelSprite(this._respack,this.config.fontPrefix||"popups_font/",this.config.padding),0<this.slotsModel.totalWin%1?this._label.text=this._count.toFixed(2):this._label.text=this._count,t.children[0].addChild(this._label),1<this.slotsModel.multiplier?(this.secondPartMiltiplierActivated=!0,this._labelMultiplier=new c2d.display.LabelSprite(this.popup._respack,"number_dragon/",this.config.padding),this._labelMultiplier.text="x"+this.slotsModel.multiplier.toString(),t.children[0].addChild(this._labelMultiplier),this._labelMultiplier.scale.x=this.config.multiplierScale||.7,this._labelMultiplier.scale.y=this.config.multiplierScale||.7,this._labelMultiplier.alpha=0):this._label.text=0)}},{key:"isShownFinalWin",get:function(){return this.totalWinCount===this.currentNumber}},{key:"onActivate",value:function(){var t=this;(0,a.default)((0,u.default)(i.prototype),"onActivate",this).call(this),this.config.properties=this.config.properties||{},this.config.properties.landscape=this.config.properties.landscape||{position:{x:"50%",y:"53%"},scale:"100%"},this.config.properties.portrait=this.config.properties.portrait||{position:{x:"50%",y:"30%"},scale:"60%"},c2d.eventManager.subscribe(game.events.Slots.ON_SKIP_WIN_RESULT,function(e){t.isBigWinPlayed&&!t.isShownFinalWin?(t.currentNumber=0,t.stopCount()):t.isBigWinPlayed&&t.isShownFinalWin}),c2d.eventManager.subscribe(game.events.Slots.ON_RESULT,function(e){t.isBigWin&&(t.isBigWinPlayed=!0,t.callback=e.data,t._currentStage=0,t._count=0,t.createNewLabels(),t.visible=!0,t.showStage(0,!0))})}},{key:"showStage",value:function(e,t){var n,r,i=this;null!==this._label&&(2<arguments.length&&void 0!==arguments[2]&&!arguments[2]||this.dispatch(h.BIG_WIN_STAGE,{stage:e}),this._currentStage=e,n=function(){i._gravity=9.8*(c2d.env.device.desktop()?2:1),i._spawnInterval=30*(i.config.stages.length-i._currentStage-1),i.play(i.config.stages[i._currentStage].animation.idle,!0)},t?(this.play(this.config.stages[this._currentStage].animation.in),this.onComplete=n):n(),r=this.totalWinCount,e<=this.config.stages.length-2&&(r=Math.min(this.totalWinCount,this.config.stages[e+1].winRatio*this.slotsModel.totalBetCredit)),t=this.config.stages[this._currentStage].duration,1===this.slotsModel.multiplier&&(r-this._count)/this.slotsModel.totalBetCredit<10&&(t/=10),c2d.Tween.get(this._label.scale).to({x:this.config.stages[this._currentStage].scale,y:this.config.stages[this._currentStage].scale},t),this.tween=c2d.Tween.get(this),this.tween.to({},t).addEventListener("change",function(e){var t=Math.round(e.target.position/e.target.duration*30)/30;i._label?(t=0<i.slotsModel.totalWin%1?(i._count+t*(r-i._count)).toFixed(2):parseInt(i._count+parseInt(t*(r-i._count))),i._label.text=t,i.currentNumber=+t,e.target.position===e.target.duration&&(i._count=r,i._count!==i.totalWinCount&&i._currentStage<i.config.stages.length-1?i.showStage(i._currentStage+1,!0):(t=0<i.slotsModel.totalWin%1?i.totalWinCount.toFixed(2):parseInt(i.totalWinCount),i._label.text=t,i.currentNumber=+t,i._gravity=-3*(c2d.env.device.desktop()?2:1),i._spawnInterval=0,i.secondPartMiltiplierActivated?i.playSecondPartMultiplierCount():i._content.currentTime!==i._content.totalTime?i.onComplete=function(){return i.stopCount()}:i.stopCount(),i.dispatch(h.BIG_WIN_COUNT_STOP)))):i.stopCount()}))}},{key:"playSecondPartMultiplierCount",value:function(){var n=this,e=(this.secondPartMiltiplierActivated=!1,this._content&&c2d.Tween.removeTweens(this._content),c2d.Tween.removeTweens(this),this.config.stages.forEach(function(e,t){parseInt(e.winRatio,10)*n.slotsModel.totalBetCredit<=n.slotsModel.totalWin/n.slotsModel.multiplier&&(n._currentStage=t)}),this.totalWinCount=this.slotsModel.totalWin,this.config.multiplierPaddingY||0);1<this._currentStage?this._labelMultiplier.y=this._label.height/2+this._labelMultiplier.height/1.5+e:this._labelMultiplier.y=this._label.height/2+this._labelMultiplier.height/2+e,c2d.Tween.get(this._labelMultiplier).wait(1500).to({alpha:1},400).wait(1500).to({alpha:0},400).call(function(){n._labelMultiplier&&n._labelMultiplier.removeFromParent&&n._labelMultiplier.removeFromParent(),n.dispatch(h.BIG_WIN_SHOW),n.showStage(n._currentStage,!1,!1)})}},{key:"stopCount",value:function(){var n=this,r=(this.isBigWinPlayed=!1,this.secondPartMiltiplierActivated=!1,this._labelMultiplier&&(c2d.Tween.removeTweens(this._labelMultiplier),this._labelMultiplier.removeFromParent(),this._labelMultiplier=null),c2d.Tween.removeTweens(this),c2d.Tween.removeTweens(this._content),this._coins.forEach(function(e){e.removeFromParent()}),0<this.slotsModel.totalWin%1&&this._label&&this._label.text?this._label.text=this.slotsModel.totalWin.toFixed(2):this._label&&this._label.text&&(this._label.text=this.slotsModel.totalWin),0);this.config.stages.forEach(function(e,t){e=(e.winRatio*n.slotsModel.totalBetCredit).toFixed(6);n.slotsModel.totalWin>=e&&(r=t)}),r>this._currentStage&&this.dispatch(h.BIG_WIN_STAGE,{stage:r}),this._currentStage=r,this._gravity=9.8*(c2d.env.device.desktop()?2:1),this.play(this.config.stages[this._currentStage].animation.idle,!0),this._content.mousedown=this._content.touchstart=null,this.dispatch(h.BIG_WIN_COUNT_STOP),c2d.call(function(){n.hide()},1e3)}},{key:"hide",value:function(){var e=this;this._label&&(this._label.removeFromParent(),this._label=null),this._spawnInterval=-1,this._gravity=9.8*(c2d.env.device.desktop()?2:1),this.play(this.config.stages[this._currentStage].animation.out),this._labelSpine?(this._labelSpine.play("out_counter"),this._labelSpine.onComplete=function(){e._labelSpine.removeFromParent(),e._labelSpine=null,e.hideBigWinAndUnlock()}):this.hideBigWinAndUnlock()}},{key:"hideBigWinAndUnlock",value:function(){this.visible=!1,this.dispatch(h.BIG_WIN_HIDE),this.callback(),this.callback=function(){return null},this._event.length}},{key:"createCoin",value:function(e,t){var n={frames:this.config.coins,loop:!0,speed:700*(.5*Math.random()+.5)},n=new c2d.display.Animation(c2d.animationConfig.create(n,this._respack));n.displayGroup=game.displayGroups.UI,n.zOrder=1e3-(this._coins.length-1),n.position=e,n.velocity=t,n.scale={x:.5,y:.5},n.rotation=360*Math.random(),this.context.view.addChild(n),this._coins.push(n)}},{key:"update",value:function(e){if((0,a.default)((0,u.default)(i.prototype),"update",this).call(this,e),this.config.coins){-1!=this._spawnInterval&&(this._currentSpawnInterval+=e,this._currentSpawnInterval>=this._spawnInterval&&(this._currentSpawnInterval=0,t=80*(c2d.env.device.desktop()?2:1),this.createCoin({x:.5*c2d.designSize.width,y:c2d.designSize.height},{x:(2*Math.random()-1)*t*.5,y:-(.5*Math.random()+.5)*t}))),e*=.01;for(var t,n=0;n<this._coins.length;){var r=this._coins[n];r.velocity.y+=this._gravity*e,r.position.x+=r.velocity.x*e,r.position.y+=r.velocity.y*e,r.scale.x+=.05*e,r.scale.y+=.05*e,r.position.y>c2d.designSize.height+r.height*r.scale.y?(this._coins.splice(n,1),this.context.view.removeChild(r)):++n}}}},{key:"play",value:function(){var e;(e=this._spine).play.apply(e,arguments)}},{key:"spine",set:function(e){this._spine&&this._spine.destroy&&this._spine.destroy(),this._spine=new c2d.display.Spine(this._respack.getAsset(e)),this._content.addChild(this._spine)}},{key:"onComplete",set:function(e){this._spine.onComplete=function(){e()}}},{key:"centralPoint",get:function(){return this._centralPoint||(this._centralPoint=this.getLinkedComponent("reelset").controller.view.centralPoint),this._centralPoint}},{key:"isBigWin",get:function(){return this.slotsModel.totalWin>=this.config.stages[0].winRatio*this.slotsModel.totalBetCredit}}]),i}(game.components.view);(n.default=r).ID="winNotification",game.registerComponent(r,h)},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],8:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),o=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,u.default)(a,e);var i=h(a);function a(){var e;(0,s.default)(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=i.call.apply(i,[this].concat(n)),c2d.Timeout.invoke(function(){e.onResize()},100),e}return(0,o.default)(a,[{key:"initialize",value:function(){for(var n=this,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];(i=(0,l.default)((0,c.default)(a.prototype),"initialize",this)).call.apply(i,[this].concat(t));var i=this.config,s=i.displayGroup,i=i.zOrder;this.textures=["bigBoard","smallBoard","fs_bigBoard","fs_smallBoard"].reduce(function(e,t){return n.config[t]&&(e[t]=n.respack.getAsset(n.config[t])),e},{});var o=(c2d.env.device.desktop()?this.config:this.getPosition(c2d.env.device.portrait())).position;this.displayGroup=s,this.bodyContainer=this._content.addChild(new c2d.display.Sprite),this.bodyContainer.anchor.set(.5),this.bodyContainer.position.copyFrom(o),this.body=this.bodyContainer.addChild(new c2d.display.Sprite(this.textures.bigBoard)),this.body.anchor.set(.65,0),this.zOrder=i}},{key:"texture",get:function(){return this.body.texture}},{key:"handleScale",value:function(e){this.body.scale.set(e)}},{key:"handleTextures",value:function(e){var t=this.isFreeSpin?"fs_":"";this.body.texture=e?this.textures[t+"smallBoard"]:this.textures[t+"bigBoard"]}},{key:"getPosition",value:function(e){var t=this.config.properties,n=t.landscape,t=t.portrait;return e?t:n}},{key:"onResize",value:function(){var e,t,n;this.scale.set(1),this.position.x=0,this.position.y=0,c2d.env.device.desktop()||(e=c2d.env.device.portrait(),t=(n=this.getPosition(e)).position,n=n.scale,c2d.env.device.portrait()&&(n=this.hackScale(n)),this.handleScale(n),this.handleTextures(e),this.bodyContainer.position.copyFrom(t))}},{key:"hackScale",value:function(e){return c2d.env.device.tablet()?.56:screen.availHeight<600?.6:screen.availHeight<700||screen.availHeight<800?.64:screen.availHeight<900?.76:e}},{key:"isFreeSpin",get:function(){return this.slotsModel.freespins.isActiveStatus&&!this.slotsModel.freespins.isStartStatus}}]),a}(game.components.view);(n.default=r).ID="board",game.registerComponent(r,{})},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],9:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),u=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),c=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),h=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("../healthStrip/index.js"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(n);return e=r?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,c.default)(s,e);var i=d(s);function s(){var e;(0,o.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).generalScale=1,e.lastLoop=!1,e}return(0,a.default)(s,[{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,l.default)((0,h.default)(s.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.dragons=this._initDragons()}},{key:"_initDragons",value:function(){var l=this;return Object.entries(this.config).filter(function(e){return"properties"!==(0,u.default)(e,1)[0]}).reduce(function(e,t){var t=(0,u.default)(t,2),n=t[0],t=t[1],r=t.spine,i=t.zOrder,s=t.displayGroup,o=t.healthSettings,a=t.shakeSettings,t=t.properties,r=new c2d.display.Spine(l._respack.getAsset(r)),t=(c2d.env.device.portrait()?t.portrait:t.landscape).position;return r.zOrder=i,r.displayGroup=game.displayGroups[s],r.shakeSettings=a,r.visible=!1,r.position.copyFrom(t),l.addHealth(r,o),e[n]=r,l._content.addChild(r),e},{})}},{key:"getSmallDragon",value:function(e){var e=this.config[e],t=e.spine,e=e.popupSettings.displayGroup,t=new c2d.display.Spine(this._respack.getAsset(t));return t.displayGroup=game.displayGroups[e],t}},{key:"addHealth",value:function(e,t){t=new p.default(t,this.respack);return e.addChild(t),e.health=t}},{key:"play",value:function(t,n,r,i){var s=this;return this.lastLoop&&!r?(this.lastLoop=!1,new Promise(function(e){s.dragons[t].onComplete=e}).then(function(){return s.play(t,n,r,i)})):new Promise(function(e){s.lastLoop=r,s.dragons[t].visible=!0,s.dispatchSound(t,n),s.dragons[t].play(n,r),i?(s.dragons[t].onEvent=e,s.dragons[t].onComplete=function(){return s.play(t,"idle",!0)}):r?e():s.dragons[t].onComplete=e})}},{key:"onResize",value:function(){if(!c2d.env.device.desktop()){var e,t=c2d.env.device.portrait();for(e in this.dragons){var n=this.config[e].properties,r=n.landscape,n=n.portrait,n=t?n:r,r=n.scale,n=n.position;this.dragons[e].position.copyFrom(n),this.dragons[e].scale.set(r)}}}},{key:"dispatchSound",value:function(e,t){"attack"===t&&c2d.eventManager.dispatch("cross_wild"===e?"RED_DRAGON_ATTACK":"GREEN_OR_BLUE_ATTACK")}},{key:"hideDragons",value:function(){for(var e in this.dragons)this.dragons[e].visible=!1}},{key:"update",value:function(e){for(var t in this.dragons)this.dragons[t].health.update(e)}}]),s}(game.components.view);(n.default=r).ID="freespinboss",game.registerComponent(r,{})},{"../healthStrip/index.js":10,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64}],10:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,l.default)(i,e);var r=c(i);function i(e,t){var n;return(0,o.default)(this,i),(n=r.call(this)).anchor.set(.5),n.strips={},n.respack=t,n.initiliaze(e),n}return(0,a.default)(i,[{key:"initiliaze",value:function(t){var n=this,e=t.position,r=t.levels,i=t.jumpConf,s=t.scale;s&&this.scale.set(s),this.position.copyFrom(e),this.health=t.amount,this.currentHp=t.amount,this.levels=r,this.stripContainer=new c2d.display.Container,this.addChild(this.stripContainer),this.stripContainer.alpha=0,this.jumpConf=i||{},["blue","red","green"].forEach(function(e){n.strips[e]=n.createStrip(t.types[e])}),r&&(this.textStyles={small:t.smallTextStyle,big:t.bigTextStyle},this.createTextes(),this.hideTextes()),this.hpView=this.createHpView(t)}},{key:"createHpView",value:function(e){var t=e.viewHp,n=t.pos,t=t.style,t=new c2d.display.TextField("12",t);return t.anchor.set(.5),t.alpha=0,t.position.copyFrom(n),t.settings={},Object.assign(t.settings,e.viewHp),this.addChild(t),t}},{key:"createTextes",value:function(){var r=this;this.textes=Object.entries(this.levels).reduce(function(e,t){var t=(0,s.default)(t,2),n=t[0],t=t[1];return e[n]={},e[n].sText=r.createText(t.smallText,r.textStyles.small),e[n].bText=r.createText(t.bigText,r.textStyles.big),e},{})}},{key:"createText",value:function(e,t){var n=e.value,r=e.pos,e=e.visible,n=new c2d.display.TextField(n,t);return n.position.copyFrom(r),n.alpha=t.alpha,!1===e&&(n.visible=!1),n.anchor.set(.5),this.addChild(n),n}},{key:"triggerText",value:function(e){this.hideTextes(),this.textes[e].bText.visible=!0}},{key:"hideTextes",value:function(){var t=this;[1,2,3,4,5].forEach(function(e){t.textes[e].bText.visible=!1,t.textes[e].sText.visible=!1})}},{key:"createStrip",value:function(e){e=this.respack.getAsset(e),e=new c2d.display.Sprite(e);return e.anchor.set(.5),this.stripContainer.addChild(e),e.mask=this.stripContainer.addChild((new c2d.display.Graphics).beginFill(0,.5).drawRect(-e.width/2,-e.height/2,e.width,e.height)),e.mask}},{key:"reset",value:function(){this.strips.green.position.set(0,0),this.strips.red.position.set(0,0)}},{key:"hurt",value:function(e,t,n){t=n?this.levels[n].points+t:t;this.stripMoove(this.strips.green,t=4==n&&0<t&&t<4?4:t,0),this.stripMoove(this.strips.red,t,500),this.hpViewFly(e)}},{key:"stripMoove",value:function(e,t,n,r){t=(t-this.health)*(e.width/this.health);c2d.Tween.get(e,n).wait(n).to({x:t},750,c2d.Tween.Ease.quintOut).call(function(){r&&r()})}},{key:"reconnectData",value:function(e,t,n){if(n)return this.triggerText(5);n=t?this.levels[t].points+e:e;this.strips.green.x=((n=4==t&&n<4?4:n)-this.health)*(this.strips.green.width/this.health),this.strips.red.x=(n-this.health)*(this.strips.red.width/this.health),t&&this.triggerText(t)}},{key:"hide",value:function(){0!==this.stripContainer.alpha&&c2d.Tween.get(this.stripContainer).to({alpha:0},500)}},{key:"show",value:function(){1!==this.stripContainer.alpha&&(this.reset(),c2d.Tween.get(this.stripContainer).to({alpha:1},500))}},{key:"bigJump",value:function(){c2d.Tween.get(this).to({y:this.y-this.jumpConf.height},this.jumpConf.duration,c2d.Tween.Ease.quartOut).wait(100).to({y:this.y},this.jumpConf.duration-100,c2d.Tween.Ease.sineIn)}},{key:"hpViewFly",value:function(e){var t=this,n=this.hpView.settings,r=n.velocity,i=n.pos,n=n.flyDuration;this.hpView.alpha=1,this.hpView.velocity=r,this.hpView.text="-"+e,c2d.Tween.get(this.hpView).to({alpha:0},n).wait(250).call(function(){t.hpView.position.copyFrom(i)})}},{key:"update",value:function(e){0<this.hpView.alpha&&this.hpViewUpdate(e)}},{key:"hpViewUpdate",value:function(e){this.hpView.alpha<=0||(this.hpView.y+=this.hpView.velocity*c2d.timescale,this.hpView.x+=this.hpView.settings.shiftX*c2d.timescale,this.hpView.velocity+=this.hpView.settings.gravity*c2d.timescale)}}]),i}(c2d.display.Sprite);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64}],11:[function(e,t,n){"use strict";e("./background/index.js"),e("./bigwinnotification/index.js"),e("./freespinboss/index.js"),e("./intro/index.js"),e("./monster/index.js"),e("./raccoon/index.js"),e("./roundhistory/index.js"),e("./overlay/index.js"),e("./particles/index.js"),e("./popupmonsterwin/index.js"),e("./symbolreplacer/index.js"),e("./board/index.js")},{"./background/index.js":5,"./bigwinnotification/index.js":7,"./board/index.js":8,"./freespinboss/index.js":9,"./intro/index.js":14,"./monster/index.js":15,"./overlay/index.js":16,"./particles/index.js":17,"./popupmonsterwin/index.js":19,"./raccoon/index.js":20,"./roundhistory/index.js":22,"./symbolreplacer/index.js":23}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={PLAY_BUTTON_CLICK:"PLAY_BUTTON_CLICK"}},{}],13:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/createClass"))),a=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf")),u=r(e("./IntroEvents.js"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,l.default)(s,e);var i=c(s);function s(e,t){(0,a.default)(this,s),n=i.call(this);var n,r=new c2d.display.Spine(e.getAsset(t));return(c2d.env.device.mobile()||c2d.env.device.tablet())&&r.scale.set(2),n.addChild(r),r.play("introButton_pressed"),r.interactive=r.buttonMode=!n.disable,r.mouseover=function(){r.play("introButton_hover")},r.mouseup=r.touchend=r.mouseout=r.touchleave=r.touchendoutside=function(){r.play("introButton_normal")},r.mousedown=r.touchstart=function(){r.play("introButton_out"),c2d.eventManager.dispatch(u.default.PLAY_BUTTON_CLICK)},n}return(0,o.default)(s)}(c2d.display.Container);n.default=r},{"./IntroEvents.js":12,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],14:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/get")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),c=r(e("./IntroEvents.js")),h=r(e("./PlayButton.js"));function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}r=function(e){(0,a.default)(n,e);var t=p(n);function n(){var e;return(0,i.default)(this,n),(e=t.apply(this,arguments)).loopsCounter=2,e.playButton=null,e}return(0,s.default)(n,[{key:"onResize",value:function(){(0,o.default)((0,u.default)(n.prototype),"onResize",this).call(this),this.addButtons(),this.addZorders()}},{key:"addButtons",value:function(){var e=this;this.playButton&&(this.playButton.removeFromParent(),this.playButton=null,c2d.eventManager.unsubscribe(c.default.PLAY_BUTTON_CLICK,this._playButtonClick)),this.playButton=new h.default(this._respack,"ui_spin"),this._content.skeleton.findSlot("button_play").currentSprite.addChild(this.playButton),this._playButtonClick=function(){e.playButton.destroy(),e.hide()},c2d.eventManager.subscribe(c.default.PLAY_BUTTON_CLICK,this._playButtonClick)}},{key:"addZorders",value:function(){this._content.displayGroup=game.displayGroups.FOREGROUND,this._content.zOrder=1e3,this.playButton&&(this.playButton.displayGroup=game.displayGroups.FOREGROUND,this.playButton.zOrder=1001)}}]),n}(game.components.intro);(n.default=r).ID="intro_raccoon",game.registerComponent(r,{})},{"./IntroEvents.js":12,"./PlayButton.js":13,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],15:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),l=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/get")),c=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),h=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("../healthStrip/index.js"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(n);return e=r?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,c.default)(s,e);var i=d(s);function s(){var e;(0,o.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).appearMonster="",e._back=null,e.monsters=null,e.monstersPos={},e.monsterLastAnimation="",e.existedRunAnimation=["reel_wilds","symbol_cross","scatter"],e}return(0,a.default)(s,[{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,u.default)((0,h.default)(s.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.monsters=this._initMonsters(this.config),this.runMonsterCordX=this.config.runMonsterCordX,this.runMonsterTime=this.config.runMonsterTime}},{key:"background",get:function(){return this._back||(this._back=this.getLinkedComponent("background")),this._back}},{key:"getCreature",value:function(e){return this.monsters[e]}},{key:"_initMonsters",value:function(e){var o=this,t=e.allMonsters,a=e.zOrder;return Object.entries(t).reduce(function(e,t){var t=(0,l.default)(t,2),n=t[0],t=t[1],r=t.spine,i=t.properties,s=t.displayGroup,t=t.healthSettings,r=new c2d.display.Spine(o._respack.getAsset(r)),i=(c2d.env.device.portrait()?i.portrait:i.landscape).position;return r.position.set(i.x,-i.y),r.zOrder=a,o.monstersPos[n]=new PIXI.Point(i.x,i.y),r.displayGroup=game.displayGroups[s],o.addHealth(r,t),e[n]=r,o._content.addChild(r),e},{})}},{key:"addHealth",value:function(e,t){t=new p.default(t,this.respack);return e.addChild(t),e.health=t}},{key:"play",value:function(n,r,i,e){var s=this;return this.appearMonster=n,this.monsterLastAnimation=r,e&&(this.monsters[n].y=-this.monsters[n].y),new Promise(function(e){var t;s.monsters[n].play(r,i),"run"===r&&s.existedRunAnimation.includes(n)?(c2d.eventManager.dispatch("MONSTER_RUN"),s.monsters[n].health.hide(),s.monsters[n].onComplete=function(){s.remove(),e()}):"run"===r?(s.monsters[n].health.hide(),s.runMonster(n,e)):i?e():(s.monsters[n].onComplete=(t="attack"===r)?function(){s.monsters[n].health.show(),s.monsters[n].play("idle",!0)}:e,t&&(c2d.eventManager.dispatch("MONSTER_ATTACK"),s.monsters[n].state.setAnimation(1,"attack_effect"),(t=s.monsters[n].state.getCurrent(1)).listener={},t.listener.event=e,t.listener.complete=function(){return s.monsters[n].state.clearTrack(1)}))})}},{key:"runMonster",value:function(e,t){var n=this,r=c2d.env.device.portrait(),i=this.config.allMonsters[e].properties,s=i.landscape,i=i.portrait,o=(r?i:s).position.x;c2d.eventManager.dispatch("MONSTER_RUN"),c2d.Tween.get(this.monsters[e]).to({x:this.runMonsterCordX},this.runMonsterTime).call(function(){n.remove(),n.monsters[e].x=o,t()})}},{key:"addToCurrentBackground",value:function(e,t){var n=this;e.forEach(function(e){t.addChild(n.monsters[e])})}},{key:"remove",value:function(){for(var e in this.appearMonster="",this.monsterLastAnimation="",this.monsters){var t=this.getMonsterPosition(e).position.y;this.monsters[e].removeFromParent(),this._content.addChild(this.monsters[e]),this.monsters[e].y=0<t?-t:t}}},{key:"onResize",value:function(){if(!c2d.env.device.desktop())for(var e in this.monsters){var t=this.getMonsterPosition(e),n=t.scale,t=t.position,r=t.x,t=t.y,i=this.monsters[e].parent,s=this._content;i===s||["scatter","reel_wilds"].includes(e)?this.monsters[e].x=r:this.background.backgrounds.middleGround.parent.toLocal({x:r,y:t},this._content,this.monsters[e].position),this.appearMonster===e&&s===i&&(this.monsters[e].y=t),this.monsters[e].scale.set(n)}}},{key:"update",value:function(e){for(var t in this.monsters)this.monsters[t].health.update(e)}},{key:"getMonsterPosition",value:function(e){var t=c2d.env.device.portrait(),e=this.config.allMonsters[e].properties,n=e.landscape,e=e.portrait,t=t?e:n;return{position:t.position,scale:t.scale}}}]),s}(game.components.view);(n.default=r).ID="monster",game.registerComponent(r,{})},{"../healthStrip/index.js":10,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64}],16:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,u.default)(o,e);var i=h(o);function o(){var e;(0,s.default)(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n)))._overlay=null,e._background=null,e._freeSpinBoss=null,e._raccoon=null,e._board=null,e}return(0,a.default)(o,[{key:"background",get:function(){return this._background||(this._background=this.getLinkedComponent("background")),this._background}},{key:"freeSpinBoss",get:function(){return this._freeSpinBoss||(this._freeSpinBoss=this.getLinkedComponent("freespinboss")),this._freeSpinBoss}},{key:"raccoon",get:function(){return this._raccoon||(this._raccoon=this.getLinkedComponent("raccoon")),this._raccoon}},{key:"board",get:function(){return this._board||(this._board=this.getLinkedComponent("board")),this._board}},{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,l.default)((0,c.default)(o.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.displayGroup=game.displayGroups.UI,this._overlay=this._createOverLay()}},{key:"onResize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(r=(0,l.default)((0,c.default)(o.prototype),"onResize",this)).call.apply(r,[this].concat(t));var r=c2d.screenParams,i=r.screenWidth,s=r.screenHeight,r=r.paddingLeft;this._overlay.position.x=-r,this._overlay.scale.set(i,s)}},{key:"_createOverLay",value:function(){var e=new PIXI.Graphics,t=(e.beginFill(0,1),e.drawRect(0,0,1,1),e.endFill(),new c2d.display.Sprite);return t.addChild(e),t.alpha=0,this._content.addChild(t),t}},{key:"showFreeSpin",value:function(e){c2d.eventManager.dispatch("STOP_IDLE_MUSIC"),this.background.light.alpha=0,this.raccoon.play("battle_idle",{trackId:0},!0),this.freeSpinBoss.play(e.boss_type,"idle",!0),this.raccoon.health.show(),this.freeSpinBoss.dragons[e.boss_type].health.show(),this.freeSpinBoss.dragons[e.boss_type].health.triggerText(e.boss_lvl),this.background.freeSpinBack=this.background.initFreeSpinBackGround(),this.background.setScales(),this.setVisibilityToFlora(),this.setBack()}},{key:"hideFreeSpin",value:function(e){this.background.light.alpha=1,this.background.initParticles(),this.raccoon.play("calm_idle",{trackId:0},!0),this.background.freeSpinBack.removeFromParent(),this.background.freeSpinBack=null,this.freeSpinBoss.hideDragons(),this.background.setMap(e),this.background.setSteps("middleGround",e),this.background.backgrounds.middleGround.setInitFlora(),c2d.env.device.desktop()&&this.background.backgrounds.foreGround.setInitFlora(),this.setBack("raccon_symbol",!0)}},{key:"setVisibilityToFlora",value:function(){var n=this;(c2d.env.device.desktop()?["middleGround","foreGround"]:["middleGround"]).forEach(function(t){return n.background.backgrounds[t].backgrounds.forEach(function(e){n.background.backgrounds[t].removeAndAddFlora("",e)})})}},{key:"setBack",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"raccon_symbol_back2";(this.slotsModel.freespins.isActiveStatus||1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&!c2d.env.device.desktop()&&window.innerWidth<window.innerHeight&&(e+="_short"),this.board.body.texture=this.board._respack.getAsset(e+".png")}},{key:"showFreeSpinBack",value:function(t,n){var r=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e){return e()};return new Promise(function(e){c2d.Tween.get(r._overlay).to({alpha:1},1e3).call(function(){n?r.hideFreeSpin(t):r.showFreeSpin(t),i(e)})}).then(function(){return new Promise(function(e){c2d.Tween.get(r._overlay).to({alpha:0},1e3).call(e)})})}}]),o}(game.components.view);(n.default=r).ID="overlay",game.registerComponent(r,{})},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],17:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),a=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/get")),h=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),p=r(e("@babel/runtime/helpers/getPrototypeOf"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(n);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,h.default)(l,e);var i=d(l);function l(){var e;(0,s.default)(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).raccoonPos={x:820,y:210},e.emitterTime=600,e.emitterDelay=0,e.existedRunAnimation=["hedgehog","parrot","dino"],e}return(0,u.default)(l,[{key:"initialize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(r=(0,c.default)((0,p.default)(l.prototype),"initialize",this)).call.apply(r,[this].concat(t));var r=this.config,i=r.emitterTime,s=r.raccoonPos,o=r.emitterDelay,a=r.zOrder,r=r.posSets;this.raccoonPos=s,this._order=a,this.emitterTime=i,this.emitterDelay=o,r&&(this.posSets=r)}},{key:"raccoon",get:function(){return this._raccoon||(this._raccoon=this.getLinkedComponent("raccoon")),this._raccoon}},{key:"getEmitParticles",value:function(){var e=new c2d.display.Emitter(this._respack.getAsset("1glow_star_fx"),this._respack.getAsset("emitter"));return e.displayGroup=game.displayGroups.FOREGROUND,e.zOrder=this._order,this._content.addChild(e),this.emitter=e}},{key:"startEmitParticles",value:function(e,t,n){var r=this,i=e.x,e=e.y,s=this.emitter.parent.toLocal({x:50,y:0},this.raccoon.raccoon);t.resetPositionTracking(),c2d.Tween.get({x:i,y:e}).wait(this.emitterDelay).call(function(){return t.visible=!0}).to({x:s.x,y:s.y},this.emitterTime).call((0,a.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.enableEmit=!1,c2d.call(function(){t.destroy(),r._content.removeChild(t)},1e3),n(),r.raccoon.play("battle_idle_energy_joy",{trackId:0}),c2d.eventManager.dispatch("BALL_GOT_ENERGY"),e.next=7,r.raccoon.play("fx_idle_scale",{trackId:1});case 7:return e.next=9,r.raccoon.play("fx_idle",{trackId:1},!0);case 9:return e.next=11,r.raccoon.play("battle_idle_energy_idle",{trackId:0},!0);case 11:case"end":return e.stop()}},e)}))).on("change",function(e){e=e.target.target;t.updateSpawnPos(e.x,e.y)})}},{key:"onResize",value:function(e,t){}}]),l}(game.components.view);(n.default=r).ID="particles",game.registerComponent(r,{})},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],18:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/classCallCheck")),l=r(e("@babel/runtime/helpers/createClass")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,u.default)(i,e);var t,r=h(i);function i(e,t){var n;return(0,a.default)(this,i),(n=r.call(this)).config=t,n.resPack=e,n.popup=n.initPopup(t),n}return(0,l.default)(i,[{key:"initPopup",value:function(e){var t=e.skeleton,n=e.displayGroup,e=(e.pos,new c2d.display.Spine(this.resPack.getAsset(t)));return e.displayGroup=game.displayGroups[n],this.addChild(e),e}},{key:"show",value:(t=(0,o.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c2d.eventManager.dispatch("MONSTER_FALL_POPUP"),e.next=3,this.play("in",!1);case 3:return this.play("idle",!0),e.next=6,this.delay();case 6:return e.next=8,this.play("out",!1);case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"play",value:function(t,n){var r=this;return new Promise(function(e){r.popup.play(t,n),n?e():r.popup.onComplete=e})}},{key:"delay",value:function(){var t=this;return new Promise(function(e){return c2d.call(e,t.config.delay)})}}]),i}(c2d.display.Container);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],19:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),s=r(e("@babel/runtime/helpers/asyncToGenerator")),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),h=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("./MonsterPopup.js"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(n);return e=r?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}r=function(e){(0,u.default)(r,e);var t,n=d(r);function r(){return(0,o.default)(this,r),n.apply(this,arguments)}return(0,a.default)(r,[{key:"onActivate",value:function(){(0,l.default)((0,h.default)(r.prototype),"onActivate",this).call(this),this._popup=new p.default(this._respack,this.config),this._content.addChild(this._popup),this.onResize()}},{key:"show",value:(t=(0,s.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.show();case 2:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"onResize",value:function(){c2d.env.device.desktop()||!this._popup?this._popup.popup.position.copyFrom(this.config.pos):this._popup.popup.position.copyFrom((c2d.env.device.portrait()?this.config.props.portrait:this.config.props.landscape).position)}},{key:"centralPoint",get:function(){return this._centralPoint||(this._centralPoint=this.getLinkedComponent("reelset").controller.view.centralPoint),this._centralPoint}}]),r}(game.components.view);(n.default=r).ID="popupmonsterwin",game.registerComponent(r,{})},{"./MonsterPopup.js":18,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],20:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),o=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf")),c=r(e("../healthStrip/index.js"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,e)}}r=function(e){(0,l.default)(o,e);var r=h(o);function o(){(0,i.default)(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.call.apply(r,[this].concat(t))}return(0,s.default)(o,[{key:"initialize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];(r=(0,a.default)((0,u.default)(o.prototype),"initialize",this)).call.apply(r,[this].concat(t));var r=this.config,i=r.baseConf.zOrder,s=r.raccoonConf,r=r.portal;this.zOrder=i,this.displayGroup=game.displayGroups.FOREGROUND,this.raccoon=this._initRaccoon(s),this.callbacks=[[],[],[],[],[]],this.lastLoop=!1,this.pos=s.pos,this.portalPos=r.pos,this.raccooonPortal=this._initPortal(r),this.currentAnimation=""}},{key:"_initPortal",value:function(e){var t=e.skeleton,e=e.zOrder,t=new c2d.display.Spine(this._respack.getAsset(t));return t.zOrder=e,t.displayGroup=game.displayGroups.FOREGROUND,this._content.addChild(t),t}},{key:"_initRaccoon",value:function(e){var t=e.spine,e=e.healthSettings,t=new c2d.display.Spine(this._respack.getAsset(t));return t.play("calm_idle",!0),this.health=new c.default(e,this.respack),t.addChild(this.health),this._content.addChild(t),t}},{key:"setCurrentAnimation",value:function(e,t){1===t.trackId&&(this.currentAnimation=e)}},{key:"forceMove",value:function(){c2d.eventManager.dispatch("TELEPORT"),this.raccooonPortal.play("animation"),c2d.Tween.get(this.raccoon).to({alpha:0},50).wait(150).to({alpha:1},50)}},{key:"play",value:function(n){var r=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=(this.setCurrentAnimation(n,e),e.trackId||0);return this.lastLoop&&!i?(this.lastLoop=!1,new Promise(function(e){var t=r.raccoon.state.getCurrent(s);t.listener=t.listener||{},t.listener.complete=e}).then(function(){return r.play(n,e,i)})):new Promise(function(e){r.raccoon.state.setAnimation(s,n,i);var t=r.raccoon.state.getCurrent(s);t.listener={},r.callbacks[s].push(e),n.includes("attack")?(t.listener.event=function(){return r.callAllCallbacks(s)},t.listener.complete=function(){return r.play("battle_idle",{trackId:s},!0)}):i?e():t.listener.complete=function(){return r.callAllCallbacks(s)}})}},{key:"callAllCallbacks",value:function(e){this.callbacks[e].forEach(function(e){return e()}),this.callbacks[e].length=0}},{key:"setOnComplete",value:function(e,t){var n=this,e=(this.callbacks[t].push(e),this.raccoon.state.getCurrent(t));e.listener={},e.listener.complete=function(){return n.callAllCallbacks(t)}}},{key:"onResize",value:function(){var e,t,n;c2d.env.device.desktop()||(e=c2d.env.device.portrait(),n=(t=this.config.properties).landscape,t=t.portrait,n=(t=e?t:n).scale,t=t.position,this.position.copyFrom(t),this.scale.set(n),t=this.config.portal.props,n=(e?t.portrait:t.landscape).pos,this.raccooonPortal.position.copyFrom(n))}},{key:"update",value:function(e){this.health.update(e)}}]),o}(game.components.view);(n.default=r).ID="raccoon",game.registerComponent(r,{})},{"../healthStrip/index.js":10,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],21:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),d=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),a=r(e("@babel/runtime/helpers/asyncToGenerator")),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,l.default)(i,e);var t,r=c(i);function i(e,t){var n;return(0,s.default)(this,i),(n=r.call(this)).config=e,n.resPack=t,n.position.set(e.positions.x,e.positions.y),n.zOrder=e.zOrder,n.displayGroup=game.displayGroups[e.displayGroup],n.historyContainer=new c2d.display.Container,n.initialPosY=0,n.buttons=null,n.isCountScrollDown=0,n.isCountScrollUp=0,n.incBias=0,n.addChild(n.historyContainer),n._createMask(),n}return(0,o.default)(i,[{key:"_createMask",value:function(){var e=new PIXI.Graphics;e.beginFill(16711680),c2d.env.device.desktop()?e.drawRect(0,38,215,513):e.drawRect(-120,-164,200,465),e.endFill(),this.mask=e,this.addChild(e)}},{key:"initArrowButtons",value:function(e){var o=this,e=e.buttons;this.buttons=e.map(function(e){var t=e.sprite,n=e.scale,r=e.pos,i=e.direction,s=new c2d.display.Sprite(o.resPack.getAsset(t)),e=o.config.positions,t=e.x,e=e.y;return s.position.set(r.x+t,r.y+e),s.scale.set(n.x,n.y),s.interactive=!0,s.buttonMode=!0,s.alpha=c2d.env.device.portrait()?0:o.config.opacity.normal,s.mouseup=s.touchend=(0,a.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.canScroll(i)){e.next=2;break}return e.abrupt("return");case 2:return o.buttons.forEach(function(e){return e.interactive=!1}),s.alpha=o.config.opacity.clicked,e.next=6,o.scroll(i,!1,!1);case 6:s.alpha=o.config.opacity.active,o.buttons.forEach(function(e){return e.interactive=!0});case 8:case"end":return e.stop()}},e)})),o.parent.addChild(s),s})}},{key:"canScroll",value:function(e){return 0<this.isCountScrollDown&&"down"===e?(this.isCountScrollDown--,this.isCountScrollUp++,!0):0<this.isCountScrollUp&&"up"===e&&(this.isCountScrollDown++,this.isCountScrollUp--,!0)}},{key:"addWin",value:(t=(0,a.default)(d.default.mark(function e(){var t,n,r,i,s,o,a,l,u,c,h=this,p=arguments;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0<p.length&&void 0!==p[0]?p[0]:800,n=1<p.length&&void 0!==p[1]?p[1]:5,r=2<p.length&&void 0!==p[2]?p[2]:"2",i=3<p.length&&void 0!==p[3]?p[3]:function(){return null},this.onResize(),s=this.historyContainer.children,c=this.config,o=c.nodeBias,a=c.maxNodeLength,c=c.historyNodeConf,this.buttons.forEach(function(e){return e.interactive=!1}),l=this.config.toY-o*s.length,u=this._getHistoryNode(c,t,n,r),c=s.length<=a,u.y-=c?o:o*++this.incBias,e.next=15,this.scroll("down",c,!c);case 15:return e.next=17,new Promise(function(e){c2d.Tween.get(u).to({y:l},h.config.timeToShift).call(function(){c2d.eventManager.dispatch("ADD_HISTORY"),h.buttons.forEach(function(e){return e.interactive=!0}),e(),i()})});case 17:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"_getHistoryNode",value:function(e,t,n,r){var i=this,s=e.back,o=e.x,a=e.scale,e=e.symbolX,s=new c2d.display.Sprite(this.resPack.getAsset(s));return s.position.set(o,s.y),a&&s.scale.set(a),this._addInfoToHistoryNode(s,t,n,r,e),this.historyContainer.addChild(s),9<this.historyContainer.children.length&&(this.isCountScrollUp++,this.buttons.forEach(function(e){return e.alpha=c2d.env.device.portrait()?0:i.config.opacity.active})),s}},{key:"_addInfoToHistoryNode",value:function(o){var a=this,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:200,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5,t=([this.config.winFont,this.config.countFont].forEach(function(e,t){var n=e.size,r=e.fill,i=e.align,s=e.pos,e=e.limitWidth,t=c2d.display.TextField.create(t?"".concat(u,"x"):l,n,r,i);t.position.set(s.x,s.y),t.anchor.set(.5,.5),o.addChild(t),e&&a.setScaleForText(t,e)}),o.width/2),n=o.height/2,e=(this.config.symbolShift&&(t+=this.config.symbolShift.x,n+=this.config.symbolShift.y),new c2d.display.Sprite(this.resPack.getAsset(e+"m")));e.anchor.set(.5,.5),e.position.set(t,n),o.addChild(e)}},{key:"scroll",value:function(n,e,t){var r=this;return e?Promise.resolve():new Promise(function(e){var t=r.historyContainer.y+("up"===n?-57:57);c2d.Tween.get(r.historyContainer).to({y:t},r.config.timeToShift).call(function(){e()})})}},{key:"resetRoundHistory",value:function(){var t=this;this.incBias=0,this.isCountScrollDown=0,this.isCountScrollUp=0,this.historyContainer.removeChildren(),this.historyContainer.position.set(0,0),this.buttons.forEach(function(e){e.interactive=!1,e.alpha=c2d.env.device.portrait()?0:t.config.opacity.normal})}},{key:"setScaleForText",value:function(e,t){e.width>t&&e.scale.set(t/e.width)}},{key:"onResize",value:function(){c2d.env.device.desktop()||(this.historyContainer.visible=!c2d.env.device.portrait(),this.buttons.forEach(function(e){e.alpha=!c2d.env.device.portrait()}))}}]),i}(c2d.display.Container);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],22:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),l=r(e("@babel/runtime/helpers/asyncToGenerator")),i=r(e("@babel/runtime/helpers/classCallCheck")),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),h=r(e("@babel/runtime/helpers/getPrototypeOf")),p=r(e("./RoundHistory.js"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(n);return e=r?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}r=function(e){(0,u.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"onActivate",value:function(){(0,o.default)((0,h.default)(n.prototype),"onActivate",this).call(this),this.roundHistory=new p.default(this.config,this._respack),this._content.addChild(this.roundHistory),this.roundHistory.initArrowButtons(this.config)}},{key:"addWin",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];t=c2d.last(t,e.length),this.getAsyncF(e.slice(),t,n)()}},{key:"getAsyncF",value:function(i,s,o){return(0,l.default)(a.default.mark(function e(){var t,n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length)return r=i.shift(),t=r.amount,n=r.positions,r=r.code,e.next=4,this.roundHistory.addWin(t,n.length,r,s,o);e.next=6;break;case 4:e.next=0;break;case 6:case"end":return e.stop()}},e,this)})).bind(this)}},{key:"reset",value:function(){this.roundHistory.resetRoundHistory()}},{key:"onResize",value:function(){this.roundHistory.onResize()}}]),n}(game.components.view);(n.default=r).ID="roundhistory",game.registerComponent(r,{})},{"./RoundHistory.js":21,"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],23:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/get")),h=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),p=r(e("@babel/runtime/helpers/getPrototypeOf"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(n);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,h.default)(s,e);var t,n,i=d(s);function s(){var e;(0,l.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).randomAnimation=null,e.monsterSymbol=null,e._reelsSetModel=null,e._reelsSetView=null,e._reelsSetController=null,e.explosionAnimation=null,e.generalScale=1,e.shiftY=0,e._raccoon=null,e._monster=null,e.bigGems=null,e.skins=["key","wild","red_gem","orange_gem","yellow_gem","green_gem","aqua_gem","blue_gem","purple_gem","pink_gem"],e.slots=["key_symbol","1_wild","red_gem","orange_gem","yellow_gem","green_gem","aqua_gem","blue_gem","purple_gem","pink_gem"],e}return(0,u.default)(s,[{key:"reelsSetView",get:function(){return this._reelsSetView||(this._reelsSetView=this.getLinkedComponent("reelset").controller.view),this._reelsSetView}},{key:"reelsSetModel",get:function(){return this._reelsSetModel||(this._reelsSetModel=this.getLinkedComponent("reelset").slotsModel),this._reelsSetModel}},{key:"reelsSetController",get:function(){return this._reelsSetController||(this._reelsSetController=this.getLinkedComponent("reelset").controller),this._reelsSetController}},{key:"raccoon",get:function(){return this._raccoon||(this._raccoon=this.getLinkedComponent("raccoon")),this._raccoon}},{key:"monster",get:function(){return this._monster||(this._monster=this.getLinkedComponent("monster")),this._monster}},{key:"initialize",value:function(){for(var e,n=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=(0,c.default)((0,p.default)(s.prototype),"initialize",this)).call.apply(e,[this].concat(r)),this.randomAnimation=this._initRandomAnimation(this.config.random),this.explosionAnimation=this._initRandomAnimation(this.config.explosion),this._content.addChild(this.explosionAnimation),this.bigGems=this.skins.map(function(e,t){return n.getSprite(t,!1)})}},{key:"addToBackground",value:function(e,t){var n=this.reelsSetModel.replace.symbols.first.replace;this.randomAnimation.skin="".concat(n,"_").concat(this.skins[n]),this.randomAnimation.play("static"),e.findSlot("".concat(t,"_random_gem_placeholder")).currentSprite.addChild(this.randomAnimation)}},{key:"getSprite",value:function(e,t){e=new c2d.display.Sprite(this._respack.getAsset("".concat(e,"_").concat(this.skins[e],"_static")));return e.visible=t,e.anchor.set(.5,.5),e.zOrder=this.config.explosion.zOrder-1,e.displayGroup=game.displayGroups.FOREGROUND,this._content.addChild(e),e}},{key:"_initRandomAnimation",value:function(e){var t=e.spine,n=e.displayGroup,r=e.scale,i=e.zOrder,e=e.pos,t=new c2d.display.Spine(this._respack.getAsset(t));return t.position.copyFrom(e),t.scale.set(r.x*this.generalScale,r.y*this.generalScale),t.zOrder=i,t.displayGroup=game.displayGroups[n],t}},{key:"replaceMonsterSymbols",value:(n=(0,a.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first.replace,this.monsterSymbol=this.getSprite(n,!0),this._content.addChild(this.monsterSymbol),c2d.eventManager.dispatch("MONSTER_GIFT"),e.next=6,this.symbolUp();case 6:return e.next=8,this.symbolToReel();case 8:return this.showExplosionAnimation(),e.next=11,this.tossSymbolToReels(t,n);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"symbolUp",value:function(){var t=this,e=this.monster.getCreature(this.slotsModel.extra.creature_type),n=this.config.monsterSymbolConf,r=n.startScale,i=n.shiftY,s=n.shiftX,o=n.durationUp;return this.monsterSymbol.scale.set(r),this.monsterSymbol.parent.toLocal(e.position,e.parent,this.monsterSymbol.position),this.monsterSymbol.zOrder=4,new Promise(function(e){c2d.Tween.get(t.monsterSymbol).to({y:t.monsterSymbol.y-i,x:t.monsterSymbol.x+s},o,c2d.Tween.Ease.cubicOut).call(e)})}},{key:"symbolToReel",value:function(){var i=this;return new Promise(function(e){i.monsterSymbol.zOrder=i.config.explosion.zOrder;var t=i.config.monsterSymbolConf,n=t.finishScale,r=t.durationToReel,t=t.finishScalePortrait,t=c2d.env.device.mobile()&&c2d.env.device.portrait()?t:n,t=new PIXI.Point(t,t),n=i.reelsSetController.view.getSymbol(3,3),n=i.monsterSymbol.parent.toLocal(n.position,n.parent);c2d.Tween.get(i.monsterSymbol.scale).to({x:t.x,y:t.y},r,c2d.Tween.Ease.cubicInOut),c2d.Tween.get(i.monsterSymbol).to(n,r,c2d.Tween.Ease.cubicInOut).call(function(){i.monsterSymbol.destroy(),e()})})}},{key:"tossSymbolToReels",value:function(e,t){var s=this,o=this.config.monsterSymbolConf.timeSymbolToReel,a=this.reelsSetController.view.createSymbol(t),l=a.animation.findSlot(this.slots[t]).currentSprite.width;return new Promise(function(i){i=c2d.last(i,e.length),e.forEach(function(e){var t=e.x,n=e.y,e=e.replace,r=s.getSprite(e,!0),e=a.parent.worldTransform.a/r.parent.worldTransform.a,e=(r.width=l*e,r.scale.y=r.scale.x,r.parent.toLocal({x:t,y:n},null));r.parent.toLocal(a.position,a.parent,r.position),c2d.Tween.get(r).to(e,o,c2d.Tween.Ease.circIn).call(function(){i(),a.removeFromParent(),r.removeFromParent()})})})}},{key:"replaceRandomEventSymbols",value:(t=(0,a.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first.replace,r="".concat(n,"_").concat(this.skins[n]),this.randomAnimation.skin=r,e.next=5,this.playRandomWinAnimation(n);case 5:return e.next=7,this.tossSymbolToReels(t,n);case 7:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"playRandomWinAnimation",value:function(e){var t=this;return new Promise(function(e){c2d.eventManager.dispatch("RACCOON_JOY"),c2d.eventManager.dispatch("RANDOM_EVENT"),t.randomAnimation.play("win"),t.raccoon.play("joy",{trackId:0}).then(function(){return t.raccoon.play("battle_idle_to_calm_idle",{trackId:0})}).then(function(){return t.raccoon.play("calm_idle",{trackId:0},!0)}),t.randomAnimation.onComplete=e}).then(function(){t.showExplosionAnimation()})}},{key:"showExplosionAnimation",value:function(){this.explosionAnimation.parent.toLocal(this.reelsSetView.centralPoint.position,this.reelsSetView.centralPoint.parent,this.explosionAnimation.position),this.explosionAnimation.play("x123_effects_2")}},{key:"onResize",value:function(e,t){}},{key:"setMonsterPosition",value:function(){var e,t;c2d.env.device.desktop()||this.monsterSymbol&&(this.monsterSymbol.scale.set(this.config.monster.scale.x*this.generalScale),e=(t=this.config.monster).pos,t=t.portraitPos,window.innerWidth>window.innerHeight?this.monsterSymbol.position.copyFrom(t):this.monsterSymbol.position.copyFrom(e))}}]),s}(game.components.view);(n.default=r).ID="symbolreplacer",game.registerComponent(r,{})},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],24:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=r(e("./network/SpinParser.js")),s=r(e("./slotsFSM/CheckController.js")),o=r(e("./slotsFSM/BGShowResultController.js")),a=r(e("./slotsFSM/FSShowResultController.js")),l=r(e("./slotsFSM/FSRestoreController.js")),u=r(e("./slotsFSM/BGSpinStopController.js")),c=r(e("./slotsFSM/FSStartController.js")),h=r(e("./slotsFSM/FSEndController.js")),p=r(e("./reelset/ReelStone.js")),d=r(e("./reelset/ReelSetController.js")),f=r(e("./reelset/ReelsetView.js")),b=r(e("./popup/PopupController.js")),m=r(e("./popup/PopupSpineView.js")),y=r(e("./ui/View.js")),v=r(e("./ui/FlatUIState.js")),r=r(e("./ui/BetRecordDetails.js"));game.src.Network.SpinParser=i.default,game.src.SlotsFSM.CheckController=s.default,game.src.SlotsFSM.BGShowResultController=o.default,game.src.SlotsFSM.BGSpinStopController=u.default,game.src.SlotsFSM.FSShowResultController=a.default,game.src.SlotsFSM.FSRestoreController=l.default,game.src.SlotsFSM.FSStartController=c.default,game.src.SlotsFSM.FSEndController=h.default,game.src.Reelset.Controller=d.default,game.src.Reelset.View=f.default,game.src.Reelset.ReelStone=p.default,game.src.Popup.Controller=b.default,game.src.Popup.SpineView=m.default,game.src.FlatUI.View=y.default,game.src.FlatUI.State=v.default,game.src.FlatUI.bet.BetRecordDetails=r.default},{"./network/SpinParser.js":25,"./popup/PopupController.js":26,"./popup/PopupSpineView.js":27,"./reelset/ReelSetController.js":28,"./reelset/ReelStone.js":29,"./reelset/ReelsetView.js":30,"./slotsFSM/BGShowResultController.js":32,"./slotsFSM/BGSpinStopController.js":33,"./slotsFSM/CheckController.js":34,"./slotsFSM/FSEndController.js":35,"./slotsFSM/FSRestoreController.js":36,"./slotsFSM/FSShowResultController.js":37,"./slotsFSM/FSStartController.js":38,"./ui/BetRecordDetails.js":39,"./ui/FlatUIState.js":40,"./ui/View.js":41,"@babel/runtime/helpers/interopRequireDefault":55}],25:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/slicedToArray"))),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/get")),l=r(e("@babel/runtime/helpers/inherits")),u=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,e)}}r=function(e){(0,l.default)(n,e);var t=h(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"parse",value:function(e){var t=(0,a.default)((0,c.default)(n.prototype),"parse",this).call(this,e);return e.wins&&e.wins.custom_wins&&(e=Object.entries(e.wins.custom_wins).reduce(function(e,t){t=(0,i.default)(t,2),t[0],t=t[1];return e.push(t)&&e},[]).reduce(function(e,t){return e+t.amount},0),t.freespins.extra={bossWin:e}),t}}]),n}(game.src.Network.SpinParser);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64}],26:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/inherits")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}var c=game.events.Popup,r=function(e){(0,o.default)(n,e);var t=u(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"addNumberToCounter",value:function(e,t,n){this._view.animateCountText(e,t,n)}},{key:"animateDeletedText",value:function(e,t,n){this._view.animateDeletedText(e,t,n)}},{key:"animateBonusCounter",value:function(t,n){var r=this;return new Promise(function(e){r._view.animateBonusCounter(t,n).then(e)})}},{key:"show",value:function(e,t,n){var r=this,i=(this.view._centralPoint||(this.view._centralPoint=this.getLinkedComponent("reelset").controller.view.centralPoint),this._model.type=e,(this._model.options=t).changePhase);this.dispatch(c.POPUP_WILL_SHOW,{type:e});return this._view.showWithOptions(e,t,function(){t.skipDidShowPhase||r.dispatch(c.POPUP_DID_SHOW,{type:e}),n&&n(),i&&i()})}}]),n}(game.src.Popup.Controller);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],27:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/get")),h=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),p=r(e("@babel/runtime/helpers/getPrototypeOf"));function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(n);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var f=game.events.Popup,r=function(e){(0,h.default)(s,e);var n,i=d(s);function s(){var e;(0,l.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).scaleDelay=250,e.scaleWait=1e3,e.subscribe(f.POPUP_DID_SHOW_COUNTER,function(e){c2d.eventManager.dispatch(f.POPUP_DID_SHOW_COUNTER,e)}),e}return(0,u.default)(s,[{key:"animateBonusCounter",value:(n=(0,o.default)(a.default.mark(function e(r,i){var s,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=parseInt(i),c2d.env.device.desktop(),e.next=4,new Promise(function(t){o.dispatch(f.POPUP_WILL_SHOW_COUNTER,{});var n=c2d.Tween.get({bossWin:0}).wait(o._firstDelay||100).call(function(){return o.dispatch(f.POPUP_WILL_SHOW_COUNTER,{})}).to({bossWin:i},o._countTime,c2d.Tween.Ease.sineIn);n.addEventListener("change",function(e){e=e.target.target.bossWin;r.removeChildren(),String(parseInt(e)).split("").forEach(function(e,t,n){n=-(n.length-1)/2*85,e=new c2d.display.Sprite(o._respack.getAsset("number_dragon/"+e));e.anchor.set(.5),e.position.set(n+85*t,0),r.addChild(e)}),parseInt(e)>=s&&(o.dispatch(f.POPUP_DID_SHOW_COUNTER,{}),n.setPaused(!0),t())})});case 4:return e.next=6,new Promise(function(e){var t=r.scale,n=t.x,t=t.y;c2d.Tween.get(r.scale).to({x:1.15,y:1.15},o.scaleDelay,c2d.Tween.Ease.sineIn).call(function(){return c2d.eventManager.dispatch("REWARD")}).wait(o.scaleWait).to({x:n,y:t},o.scaleDelay,c2d.Tween.Ease.sineOut).call(e)});case 6:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"animateDeletedText",value:function(i,e,s){var o=this,a=(c2d.env.device.desktop(),c2d.Tween.get({bossWin:e}).wait(this._firstDelay).to({bossWin:0},this._countTime,c2d.Tween.Ease.sineIn));a.addEventListener("change",function(e){var r=e.target.target.bossWin;i.removeChildren(),String(parseInt(r)).split("").forEach(function(e,t,n){n=-(n.length-1)/2*85,e=new c2d.display.Sprite(o._respack.getAsset("number_dragon/"+e));e.position.set(n+85*t,0),e.anchor.set(.5),i.addChild(e),parseInt(r)<=0&&(a.setPaused(!0),i.removeChildren(),s())})})}},{key:"animateCountText",value:function(n,e,t){var r=this,i=e.result,s=e.addText,o=e.message,a=e.bossWin;c2d.Tween.get({}).wait(this._firstDelay).call(function(){return r.dispatch(f.POPUP_WILL_SHOW_COUNTER,{type:t})}).to({},this._countTime,c2d.Tween.Ease.sineIn).call(function(){return r.dispatch(f.POPUP_DID_SHOW_COUNTER,{type:t,label:n,options:{message:o}})}).addEventListener("change",function(e){var t=s?a:o;i=0<t%1?(e.target.position/e.target.duration*t).toFixed(2):parseInt(e.target.position/e.target.duration*parseInt(t)),s&&(i=0<(i+=parseFloat(o))%1?+i.toFixed(2):i),n.text=i})}},{key:"showWithOptions",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,c.default)((0,p.default)(s.prototype),"showWithOptions",this)).call.apply(e,[this].concat(n)),this.onResize()}},{key:"onResize",value:function(){var e,t;!c2d.env.device.desktop()&&this.spineContainer&&(c2d.env.device.portrait()?this.spineContainer.parent.toLocal(this.centralPoint.position,this.centralPoint.parent,this.spineContainer.position):(e=Math.max(c2d.engine._renderer.width,c2d.screenParams.designWidth)/2,t=Math.max(c2d.engine._renderer.height,c2d.screenParams.designHeight)/2,this.spineContainer.parent.toLocal({x:e,y:t},null,this.spineContainer.position)))}},{key:"centralPoint",get:function(){return this._centralPoint}}]),s}(game.src.Popup.SpineView);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],28:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var p=game.events.Reelset,r=function(e){(0,u.default)(s,e);var i=h(s);function s(){var e;(0,o.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).scatter=0,e.wild=1,e.centralReel=3,e._particles=null,e.isFight=!1,e.dragons={reel_wild:"explosion_blue_line",cross_wild:"explosion_red_line",multiplier:"explosion_green_line"},e}return(0,a.default)(s,[{key:"initReels",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,l.default)((0,c.default)(s.prototype),"initReels",this)).call.apply(e,[this].concat(n))}},{key:"symbolReplacer",get:function(){return this._symbolReplacer||(this._symbolReplacer=this.getLinkedComponent("symbolreplacer")),this._symbolReplacer}},{key:"showScatterWins",value:function(e,t){var s=this,n=e.reduce(function(e,t){return e+t.positions.length},0),o=c2d.last(function(){t&&t(),s.dispatch(p.REELSET_DID_SHOW_WIN_SCATTERS)},n);this.dispatch(p.REELSET_WILL_SHOW_WIN_SCATTERS,{type:e.first.type}),e.forEach(function(e){e.positions.forEach(function(e){var t=e.reelId,e=e.symId,n=s.model.getSymbol(t,e),r=s.view.getSymbol(t,e),i=s.symbolAnimations.getAnimation(n,s.model.turboMode?"win_turbo":"win");c2d.eventManager.dispatch("PLAY_SCATTER_WIN"),s.view.setSymbolAnimation(t,e,i,function(){o(),r.animation.play("idle",!0)}),r.zOrder=r.zOrder+t,s.dispatch(p.REELSET_SHOW_WIN_SYMBOL,{position:{reelId:t,symId:e},symbol:s.view.getSymbol(t,e),type:n.type})})})}},{key:"showReplaceSymbols",value:function(e,t,n,r){var i=this;t=c2d.last(t,e.length),!this.isRandomEvent(n)||this.model.freespins.isActiveStatus&&"scatter"!==n?r?this.symbolReplacer.replaceMonsterSymbols(this.getReplaceSymbolWithCords(e)).then(function(){return i.replaceSymbol(e,t,r)}):(c2d.eventManager.dispatch("FS_WILD_SHOT"),this.replaceSymbol(e,t)):this.symbolReplacer.replaceRandomEventSymbols(this.getReplaceSymbolWithCords(e)).then(function(){return i.replaceSymbol(e,t)})}},{key:"replaceSymbol",value:function(e,o){var a=this,t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],l=c2d.last(function(){t&&c2d.eventManager.dispatch("START_IDLE_MUSIC")},e.length);e.forEach(function(e){var t=e.reelId,n=e.id,e=e.replace,r=a.model.getSymbol(t,n),i=a.view.getSymbol(t,n),s=(r.type=e,a.getExplosionEffect(i));s.onEvent=function(){var e=game.src.Reelset.SymbolAnimations.getAnimationForSymbol(t,n,"static");a.view.setSymbolAnimation(t,n,e,o)},s.onComplete=function(){l(),s.removeFromParent()}})}},{key:"replaceScattersImmediately",value:function(e){var r=this;e.forEach(function(e){var t=e.reelId,n=e.id,e=e.replace,e=(r.model.getSymbol(t,n).type=e,game.src.Reelset.SymbolAnimations.getAnimationForSymbol(t,n,"static"));r.view.setSymbolAnimation(t,n,e)})}},{key:"getExplosionEffect",value:function(e){var t=new c2d.display.Spine(this.view._respack.getAsset("explosion")),n=this.model.freespins.isActiveStatus?this.getDragonLine():"explosion_yellow_1";return t.play(n),t.zOrder=1e3,t.displayGroup=game.displayGroups.FOREGROUND,this.view.addChild(t),this.view.toLocal(e.position,e.parent,t.position),t}},{key:"getDragonLine",value:function(){return this.dragons[this.model.freespins.type]}},{key:"getReplaceSymbolWithCords",value:function(e){var i=this;return e.map(function(e){var t=e.reelId,n=e.id,e=e.replace,r=i.view.getSymbol(t,n).getGlobalPosition();return{x:r.x,y:r.y,replace:e,reelId:t,id:n}})}},{key:"isRandomEvent",value:function(e){return"wild"===e||"reel"===e||"scatter"===e}},{key:"particles",get:function(){return this._particles||(this._particles=this.getLinkedComponent("particles")),this._particles}},{key:"flashSymbolWins",value:function(e,t){var n=this,r=(c2d.env.device.desktop()||this.setRewardPosition(),c2d.eventManager.dispatch("SYM_BURST"),this.isOneWinGroup&&this.dispatch(p.REELSET_WILL_SHOW_FLASH_SYMBOL_WINS,e),function(){n.isOneWinGroup&&n.dispatch(p.REELSET_DID_SHOW_FLASH_SYMBOL_WINS,e),t()});e.map(function(e){return e.positions}).reduce(function(e,t){return e.concat(t)}).sort(function(e,t){return 10*e.reelId-10*t.reelId-(e.symId-t.symId)}).filter(function(e,t,n){return!t||n[t-1].reelId!==e.reelId||n[t-1].symId!==e.symId}).call(function(e){return r=c2d.last(r,e.length)}).forEach(function(e){return n.playWinAnimation(e.reelId,e.symId,r)}),this.showNotWinSymbols(this.model.getNotWinSymbols(e))}},{key:"flashToggleSymbolWins",value:function(e,t){var n=this,r=(c2d.env.device.desktop()||this.setRewardPosition(),this.dispatch(p.REELSET_WILL_SHOW_FLASH_SYMBOL_WINS,e),function(){n.dispatch(p.REELSET_DID_SHOW_FLASH_SYMBOL_WINS,e),t()});e.map(function(e){return e.positions}).reduce(function(e,t){return e.concat(t)}).sort(function(e,t){return 10*e.reelId-10*t.reelId-(e.symId-t.symId)}).filter(function(e,t,n){return!t||n[t-1].reelId!==e.reelId||n[t-1].symId!==e.symId}).call(function(e){return r=c2d.last(r,e.length)}).forEach(function(e){return n.playToggleWinAnimation(e.reelId,e.symId,r)}),this.showNotWinSymbols(this.model.getNotWinSymbols(e))}},{key:"playWinAnimation",value:function(e,t,n){var r,i=this,s=this.model.getSymbol(e,t),o=this.view.getSymbol(e,t),a=(this.view.stopSymbolAnimation(e,t),this.model.turboMode&&!this.isFight);this.view.setSymbolAnimation(e,t,this.symbolAnimations.getAnimation(s,a?"static":"win"),function(){o.alpha=0,i.isFight||n()}),this.isFight&&(a=this.view.getSymbol(e,t),(r=this.particles.getEmitParticles()).visible=!1,a=r.parent.toLocal(a.position,a.parent),this.particles.startEmitParticles(a,r,n)),this.dispatch(game.events.Reelset.REELSET_SHOW_WIN_SYMBOL,{type:s.type,position:{reelId:e,symId:t},symbol:o})}},{key:"playToggleWinAnimation",value:function(e,t,n){var r=this.model.getSymbol(e,t),i=(this.view.getSymbol(e,t),this.view.stopSymbolAnimation(e,t),this.model.turboMode&&!this.isFight);this.view.setSymbolAnimation(e,t,this.symbolAnimations.getAnimation(r,i?"static":"freeze_idle"),function(){return n()})}},{key:"beforeSpin",value:function(e){this.showMask(),(0,l.default)((0,c.default)(s.prototype),"beforeSpin",this).call(this,e)}},{key:"showMask",value:function(){this.view.reels.forEach(function(e){e.mask=e.maskStock,e.addChild(e.mask)})}},{key:"hideMask",value:function(){this.view.reels.forEach(function(e){e.maskStock=e.mask,e.removeChild(e.mask),e.mask=null})}},{key:"setRewardPosition",value:function(){var e=this.view.centralPoint;this.reward._content.parent.toLocal(e.position,e.parent,this.reward.position)}},{key:"reward",get:function(){return this._reward||(this._reward=this.getLinkedComponent("reward")),this._reward}},{key:"showSymbolToggleWins",value:function(e,t){var n=this,r=(this.dispatch(p.REELSET_WILL_SHOW_SYMBOL_WINS,{wins:e}),e.reduce(function(e,t){return e.concat(t.positions)},[]));t=c2d.last(t,r.length),r.forEach(function(e){return n.playToggleWinAnimation(e.reelId,e.symId,t)}),this.showNotWinSymbols(this.model.getNotWinSymbols(e))}},{key:"showSymbolWins",value:function(e,t){this.isOneWinGroup?(0,l.default)((0,c.default)(s.prototype),"showSymbolWins",this).call(this,e,t):this.showSymbolToggleWins(e,t)}}]),s}(game.src.Reelset.Controller);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],29:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),s=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/toConsumableArray"))),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,u.default)(i,e);var t=h(i);function i(){var e;return(0,o.default)(this,i),(e=t.call(this)).maskStock=null,e}return(0,a.default)(i,[{key:"initialize",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,l.default)((0,c.default)(i.prototype),"initialize",this)).call.apply(e,[this].concat(n)),this.displayGroup=game.displayGroups.FOREGROUND,this.zOrder=10,c2d.env.device.desktop()?this.mask=this.createMask():this.mask=this.createMobileMask(),this.maskStock=this.mask,this.winCallbacks=[],this.passDrop=!1,this.passDuration=100,this.passBounceTime=50,this._blowDuration=100}},{key:"createMask",value:function(){var e=new PIXI.Graphics;return e.beginFill(16711680),e.drawRect(-50,-4,200,597),e.endFill(),this.addChild(e),e}},{key:"createMobileMask",value:function(){var e=new PIXI.Graphics;return e.beginFill(16711680,.25),e.drawRect(-40,0,160,500),e.endFill(),this.addChild(e),e}},{key:"stopWinAnimation",value:function(){this.passDrop=!0,this.winCallbacks.forEach(function(e){return e()}),this.setAlpha()}},{key:"startSpinAnimation",value:function(){this.passDrop=!1,(this.winCallbacks.length=0,l.default)((0,c.default)(i.prototype),"startSpinAnimation",this).call(this)}},{key:"setAlpha",value:function(){var t=this;(0,s.default)(new Array(7)).map(function(e,t){return t}).forEach(function(e){return t.getSymbol(e).alpha=1})}},{key:"setSymbolAnimation",value:function(e,t,n){e=this.getSymbol(e);e.setAnimation(t),e.zOrder=0,e.displayGroup=null,n&&(this.winCallbacks.push(n),e.onComplete=n)}},{key:"stopSpinAnimation",value:function(){for(var n=this,r=(this.state="beforeStop",.55*this.settings.delays.reelStop),i=(this.settings.delays.reelStop-r)/this.settings.rowsCount,s=-2*this.settings.rowsHeight,o=0,a=c2d.last(function(){return n.onReelStopped()},this._symbols.length),e=this._symbols.length-1;0<=e;--e)!function(e){var t=n._symbols[e];t.position.y=s,t.scaleX=t.scaleY=n._scaledFallIn,t.setAnimation(game.src.Reelset.SymbolAnimations.getAnimationForSymbol(n._id,e,"static")),t.stopSpinTween=c2d.Tween.get(t,{override:!0}).wait(o).call(function(){t.stopSpinTween=null,4===e&&c2d.eventManager.dispatch("REEL_WILL_START_ANIMATION",n.id),n._fallDownSymbol(t,e,n._speedStop?.5*r:r,a)}),o+=n.passDrop?25:i}(e)}},{key:"_fallDownSymbol",value:function(e,t,n,r){var i=375,s=(this.passDrop&&(n=this.passDuration,i=this.passBounceTime),Math.random()*(2*e.anchor.x-1)*.1),t=this.settings.rowsHeight*e.anchor.y+(this.settings.rowsHeight+this.settings.rowsIndent)*t,e=(e.alpha=1,c2d.Tween.get(e,{override:!0}));e.to({y:t,scaleX:1,scaleY:1},Math.max(0,n-i),c2d.Tween.Ease.circIn),r&&e.call(r),e.to({y:t-7,rotation:s},.1*i),e.to({y:t,rotation:0},.9*i,c2d.Tween.Ease.bounceOut)}},{key:"startDropAnimation",value:function(e){for(var t=this,n=this._poppedSymbols.length,r=e?.85*this.settings.delays.drop:.55*this.settings.delays.drop,i=.45*this.settings.delays.drop/n,s=-1.5*this.settings.rowsHeight,o=0,a=n-1;0<=a;--a){var l=this._poppedSymbols[a];l.index=a,l.position.y=s,l.alpha=1,l.scaleX=l.scaleY=this._scaledFallIn,l.setAnimation(game.src.Reelset.SymbolAnimations.getAnimationForSymbol(this._id,a,"static")),c2d.Tween.get(l,{override:!0}).wait(o).call(this._fallDownSymbol,[l,a,r],this),this._symbols.remove(l),this._symbols.unshift(l),o+=e?25:i}this._poppedSymbols=[],c2d.Tween.get(this,{override:!0}).wait(this.settings.delays.drop).call(function(){return t.onReelDidFinishDropAnimation()})}}]),i}(game.src.Reelset.ReelStone);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/toConsumableArray":66}],30:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),c=r(e("@babel/runtime/helpers/getPrototypeOf")),h=r(e("./SymbolContainer.js"));function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,c.default)(n);return e=r?(e=(0,c.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var d=game.events.Reelset,r=function(e){(0,u.default)(s,e);var i=p(s);function s(){var e;(0,o.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n)))._speedStopMultiplier=20,e}return(0,a.default)(s,[{key:"onResize",value:function(){return(0,l.default)((0,c.default)(s.prototype),"onResize",this).call(this),c2d.env.device.desktop()?(this._viewLayer.x=3,this._viewLayer.y=3,void this._viewLayer.scale.set(.99)):c2d.env.device.tablet()&&c2d.env.device.portrait()?(this._viewLayer.x=68,this._viewLayer.y=-10,void this._viewLayer.scale.set(.73)):screen.availHeight<600&&c2d.env.device.portrait()?(this._viewLayer.x=56,this._viewLayer.y=-8,void this._viewLayer.scale.set(.79)):screen.availHeight<700&&c2d.env.device.portrait()?(this._viewLayer.x=44,this._viewLayer.y=-2,void this._viewLayer.scale.set(.83)):screen.availHeight<800&&c2d.env.device.portrait()?(this._viewLayer.x=44,this._viewLayer.y=-3,void this._viewLayer.scale.set(.83)):screen.availHeight<900&&c2d.env.device.portrait()?(this._viewLayer.x=0,this._viewLayer.y=1,void this._viewLayer.scale.set(1)):(this._viewLayer.x=-2,this._viewLayer.y=4,void this._viewLayer.scale.set(1.02))}},{key:"onInitialize",value:function(){this._viewLayer=new c2d.display.Sprite,this._viewLayer.displayGroup=game.displayGroups.FOREGROUND,this.addChild(this._viewLayer),(0,l.default)((0,c.default)(s.prototype),"onInitialize",this).call(this),this.centralPoint=this.createGraph()}},{key:"createReels",value:function(){this._reels.forEach(function(e){return e.removeFromParent()}),this._reels=[];for(var e=0;e<this.settings.columnsCount;e++){var t=this.settings.createReel(e,this._respack);t.overlayLayer=this._overlayLayer,this._reels.push(t),this._viewLayer.addChild(t)}this.createEvents()}},{key:"createGraph",value:function(){var e=this.getSymbol(3,3),t=(new c2d.display.Graphics).beginFill(16776960,0).drawCircle(0,0,1);return this.getReel(3).addChild(t),t.parent.toLocal(e.position,e.parent,t.position),t}},{key:"createSymbol",value:function(e){var t=new h.default,e=(t.setAnimation(game.src.Reelset.SymbolAnimations.getAnimation({type:e},"static")),this.reels[3].addChild(t),this.getSymbol(3,3)),n=e.x,e=e.y;return t.position.set(n,e),t.visible=!1,t}},{key:"startDropAnimation",value:function(t,n){var r=this,e=this._reels.filter(function(e){return t[e.id].length}),i=c2d.last(function(){return r.dispatch(d.REELSET_DID_FINISH_DROP_ANIMATION)},e.length),s=c2d.Tween.get(this);e.forEach(function(e){s.wait(!n&&r.settings.reelsDrop).call(function(){return e.startDropAnimation(n)}),e.once(d.REEL_DID_FINISH_DROP_ANIMATION,i)})}}]),s}(game.src.Reelset.View);n.default=r},{"./SymbolContainer.js":31,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],31:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/get")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}r=function(e){(0,a.default)(n,e);var t=c(n);function n(e){return(0,i.default)(this,n),(e=t.call(this,e)).anchor=new c2d.geom.Point(.5,.5),e}return(0,s.default)(n,[{key:"setAnimation",value:function(e){(0,o.default)((0,u.default)(n.prototype),"setAnimation",this).call(this,e),this.animation.anchor=new c2d.geom.Point(.5,.5)}},{key:"freeze",value:function(e,t){var n=new c2d.display.Animation(game.src.Reelset.SymbolAnimations.getAnimation(e,"freeze_in"));return n.anchor=new c2d.geom.Point(.5,.5),n.x=this.x,n.y=this.y,n.onComplete=function(){n.setAnimation(game.src.Reelset.SymbolAnimations.getAnimation(e,"freeze_idle")),t&&t()},n}},{key:"unfreeze",value:function(e,t,n){e.setAnimation(game.src.Reelset.SymbolAnimations.getAnimation(t,"freeze_out")),e.onComplete=function(){e.parent.removeChild(e),n&&n()}}},{key:"stop",value:function(){this.animation.stop()}},{key:"hide",value:function(){this.alpha=0}},{key:"show",value:function(){this.alpha=1}}]),n}(c2d.display.Animation);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],32:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),d=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),s=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/get")),h=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),p=r(e("@babel/runtime/helpers/getPrototypeOf"));function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,p.default)(n);return e=r?(e=(0,p.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,h.default)(o,e);var t,n,r,i=f(o);function o(e){(0,l.default)(this,o),(n=i.call(this,e)).isRestore=!0,n.currentPhase="",n.existedRunAnimation=["reel_wilds","symbol_cross","scatter"],n.skipPhases=["showResult","showGroupWins","showToggleLines"],n.soundEvents=["BaseGameBackgroundRaccoon","background_2","random_event"],n.steps.hideMask={phase:"HIDE_MASK",check:function(){return"initfreespin"===n.slots.model.availableActions[0]&&n.hasScatterWins},show:n.hideMask,skip:n.hideMask},n.steps.showMask={phase:"SHOW_MASK",check:function(){return!0},show:n.showMask,skip:n.showMask},n.steps.showCreatureFight={phase:"START_CREATURE_FIGHT",check:function(){return n.checkCreatureFight()},show:n.startCreatureFight,skip:n.skipCreatureFight},n.steps.showRaccoonReaction={phase:"SHOW_RACCOON_REACTION",check:function(){return!n.checkCreatureFight()&&n.hasGroupWins},show:n.showRaccoonReaction,skip:n.skipShowRaccoonReaction},n.steps.showToggleLines={phase:"SHOW_TOGGLE_LINES",check:function(){return n.hasAnyWinsMoreOne},show:n.showToggleLinesWins,skip:n.skipToggleLinesWins},n.steps.addWinToRoundHistory={phase:"ADD_WIN_TO_ROUND_HISTORY",check:function(){return n.hasGroupWins},show:n.addWinToRoundHistory,skip:n.skipAddWinToRoundHistory},n.attackDict=(new Map).set([5,15],"attack_1").set([16,50],"attack_2");var n,t=Object.keys(n.steps).reduce(function(e,t){return e[n.steps[t].phase]=t,e},{});return n.soundAttackDict={attack_1:"RACCOON_ATTACK_1",attack_2:"RACCOON_ATTACK_2"},e.registerPhases(t),n.isLoadedMusic=!1,c2d.eventManager.subscribeOnce("BaseGameBackgroundRaccoon",function(){n.checkCreatureFight()&&c2d.env.device.desktop()&&!n.isLoadedMusic&&(new AudioContext).resume().then(function(){c2d.eventManager.dispatch("START_BATTLE_MUSIC")}),n.isLoadedMusic=!0}),n.onSkipWinPress=function(){return n.onSkipWinPressed()},n.skipWinBySpace=function(e){return!c2d.env.storage.getItem("spinBySpace",!0)||32!==e.key&&32!==e.keyCode?null:n.onSkipWinPressed()},n}return(0,u.default)(o,[{key:"addWinToRoundHistory",value:function(e){e(),this.slots.roundhistory.addWin(this.slots.model.groupWins,function(){return null})}},{key:"skipAddWinToRoundHistory",value:function(e){e(),this.slots.roundhistory.addWin(this.slots.model.groupWins,function(){return null},!0)}},{key:"addSkipListeners",value:function(){c2d.env.device.desktop()?(document.addEventListener("mouseup",this.onSkipWinPress),document.addEventListener("keyup",this.skipWinBySpace)):(document.addEventListener("mousedown",this.onSkipWinPress),document.addEventListener("touchend",this.onSkipWinPress))}},{key:"removeSkipListeners",value:function(){c2d.env.device.desktop()?(document.removeEventListener("mouseup",this.onSkipWinPress),document.removeEventListener("keyup",this.skipWinBySpace)):(document.removeEventListener("mousedown",this.onSkipWinPress),document.removeEventListener("touchend",this.onSkipWinPress))}},{key:"onSkipWinPressed",value:function(){this.currentPhase!==this.state.currentPhase&&(this.currentPhase=this.state.currentPhase,this.skipPhases.includes(this.currentPhase)&&this.steps[this.state.currentPhase].skip.call(this))}},{key:"onEnterState",value:(r=(0,a.default)(d.default.mark(function e(){var t,n,r,i,s=arguments;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.currentPhase="",this.slots.reelset.controller.isOneWinGroup=!0,this.checkCreatureFight()&&this.isPlayBattleMusic()&&c2d.eventManager.dispatch("START_BATTLE_MUSIC"),n=s.length,r=new Array(n),i=0;i<n;i++)r[i]=s[i];(t=(0,c.default)((0,p.default)(o.prototype),"onEnterState",this)).call.apply(t,[this].concat(r)),this.slots.model.extra&&this.slots.model.extra.map&&this.slots.background.setMap(this.slots.model.extra),null!==this.isRestore&&this.slots.model.restoreState&&(this.isRestore=this.slots.model.restoreState);case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"isPlayBattleMusic",value:function(){return("spin"===this.slots.model.currentSpinType||"bonus"===this.slots.model.currentSpinType)&&this.slots.model.totalWin}},{key:"playMusic",value:function(){var t=this;return new Promise(function(e){if(t.isLoadedMusic||!t.slots.model.audioEnabled)return e(!1);var r=t.getSoundSequence();t.soundEvents.reduce(function(e,t,n){return e.then(function(){return r[n]})},Promise.resolve()).then(function(){return e(!0)})})}},{key:"getSoundSequence",value:function(){return this.soundEvents.map(function(t){return new Promise(function(e){c2d.eventManager.subscribeOnce(t,e)})})}},{key:"delay",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250;return new Promise(function(e){return c2d.call(e,t)})}},{key:"showResultSequence",value:function(e){var t=this,n=this.sortedOrder(),r=this.isRestore&&this.checkCreatureDeath?n.indexOf("showReplace"):0,n=(this.isRestore=null,this.baseResultSequence=n.slice(r).filter(function(e){return t.steps[e].check()&&t.steps[e].show}).map(function(e){return{phase:t.steps[e].phase,action:"show",functionName:t.steps[e].show}}),this.skipResultSequence),r=[],r=e?n.slice(this.playResultSequenceIndex):this.baseResultSequence.concat();this.playResultSequence(r)}},{key:"skipResultSequence",get:function(){var n=this;return this.order.filter(function(e){return n.steps[e].check()}).map(function(e,t){return n.steps[e].skip?n.steps[e].skipAction&&"skipCurrentPhase"===n.steps[e].skipAction&&n.startSkipIndex!==t?{phase:n.steps[e].phase,action:"show",skipAction:"skipCurrentPhase",functionName:n.steps[e].show}:{phase:n.steps[e].phase,action:"skip",functionName:n.steps[e].skip}:{phase:n.steps[e].phase,action:"show",functionName:n.steps[e].show}})}},{key:"sortedOrder",value:function(){var e,t=this,n=this.order.filter(function(e){return!(t.hasReplace&&t.hasGroupWins&&t.hasResult&&"showResult"===e)});return n.some(function(e){return"showResult"===e})?this.order:(e=n.indexOf("showReplace")+1,n.splice(e,0,"showResult"),n)}},{key:"showResult",value:function(e){if(this.state.setPhase(this.state.PHASES.SHOW_RESULT),c2d.eventManager.dispatch(game.events.Slots.ON_RESULT,e),this.slots.model.turboMode)return this.skipShowResult(e)}},{key:"skipShowResult",value:function(){c2d.eventManager.dispatch(game.events.Slots.ON_SKIP_WIN_RESULT,{})}},{key:"hideMask",value:function(e){this.slots.reelset.controller.view.reels.forEach(function(e){e.mask&&(e.maskStock=e.mask,e.removeChild(e.mask),e.mask=null)}),e()}},{key:"showMask",value:function(e){this.slots.reelset.controller.view.reels.forEach(function(e){e.addChild(e.maskStock),e.mask=e.maskStock}),e()}},{key:"hasReplace",get:function(){return this.slots.model.extra&&this.slots.model.extra.random_event_type||this.slots.model.replace.hasReplace}},{key:"showRaccoonReaction",value:(n=(0,a.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(),c2d.eventManager.dispatch("RACCOON_WIN"),e.next=4,this.slots.raccoon.play("joy_win",{trackId:0});case 4:this.slots.raccoon.play("calm_idle",{trackId:0},!0);case 5:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"skipShowRaccoonReaction",value:function(e){e()}},{key:"checkCreatureFight",value:function(){return this.slots.model.extra&&this.slots.model.extra.is_fight_with_creature}},{key:"checkCreatureDeath",get:function(){return this.slots.model.extra&&this.slots.model.extra.is_creature_defeated}},{key:"getAttackPower",value:function(r){var i="attack_1";return this.attackDict.forEach(function(e,t){var t=(0,s.default)(t,2),n=t[0],t=t[1];n<=r&&r<=t&&(i=e)}),c2d.eventManager.dispatch(this.soundAttackDict[i]),i}},{key:"showReplace",value:function(e){function t(){window.removeEventListener("windowfocusin",t),n.state.setPhase(n.state.PHASES.SHOW_REPLACE),n.slots.reelset.showReplaceSymbols(n.slots.model.replace.symbols,r,n.slots.model.extra&&n.slots.model.extra.random_event_type,n.slots.model.extra.is_creature_defeated)}var n=this,r=c2d.once(function(){n.hasSkipped||e()});if(!c2d.engine.windowActive)return window.addEventListener("windowfocusin",t);t()}},{key:"startCreatureFight",value:(t=(0,a.default)(d.default.mark(function e(t){var n,r,i,s,o,a,l,u,c,h,p=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.setPhase(this.state.PHASES.START_CREATURE_FIGHT),l=this.slots.model.extra,n=l.creature_hp,r=l.creature_hit,i=l.raccoon_damage,s=l.raccoon_shoot,u=l.creature_appear,o=l.is_fight_with_creature,a=l.is_creature_defeated,l=l.creature_type,u)return this.slots.reelset.controller.isFight=!0,e.next=7,this.slots.monster.play(l,"attack");e.next=18;break;case 7:return"damage"==(u=r&&0<r?"damage":"battle_idle_protection")?(c2d.eventManager.dispatch("RACCOON_DAMAGE"),c=this.slots.raccoon.health.health-r,this.slots.raccoon.health.hurt(r,c)):(c2d.eventManager.dispatch("RACCOON_PROTECT"),this.slots.raccoon.health.bigJump()),e.next=11,this.slots.raccoon.play(u,{trackId:0});case 11:return c2d.eventManager.dispatch("BALL_IN"),this.slots.raccoon.play("fx_in",{trackId:1}).then(function(){return p.slots.raccoon.play("fx_idle",{trackId:1},!0)}),e.next=15,this.slots.raccoon.play("battle_idle_energy_start",{trackId:0});case 15:return c2d.eventManager.dispatch("BALL_IDLE"),e.next=18,this.slots.raccoon.play("battle_idle_energy_idle",{trackId:0},!0);case 18:if(o&&(a||s))return e.next=21,this.slots.raccoon.play("battle_idle_energy_end",{trackId:0});e.next=49;break;case 21:return e.next=23,this.slots.raccoon.play("empty",{trackId:1});case 23:return e.next=25,this.slots.raccoon.play(this.getAttackPower(i),{trackId:0});case 25:return c=a?"damage_fall":"damage",this.slots.monster.monsters[l].health.hurt(i,n),c2d.eventManager.dispatch(a?"MONSTER_FALL":"MONSTER_DAMAGE"),e.next=30,this.slots.monster.play(l,c);case 30:if(this.slots.monster.monsters[l].health.hide(),this.slots.raccoon.health.hide(),a)return this.slots.background.addMonsterToMidGround(l),this.slots.monster.play(l,"out_idle",!0),c2d.eventManager.dispatch("RACCOON_WIN"),e.next=38,this.slots.raccoon.play("joy_win",{trackId:0});e.next=40;break;case 38:e.next=46;break;case 40:return h=!this.existedRunAnimation.includes(l),e.next=43,this.slots.monster.play(l,"run",h);case 43:return c2d.eventManager.dispatch("START_IDLE_MUSIC"),e.next=46,this.slots.raccoon.play("battle_idle_to_calm_idle",{trackId:0});case 46:return e.next=48,this.slots.raccoon.play("calm_idle",{trackId:0},!0);case 48:this.slots.reelset.controller.isFight=!1;case 49:t();case 50:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"skipCreatureFight",value:function(e){throw new Error("skipCreatureFight is not realized")}},{key:"skipShowGroupWins",value:function(){this.slots.reelset.controller.isFight||this.checkCreatureFight()||this.slots.reelset.controller.view.reels.forEach(function(e){return e.stopWinAnimation()})}},{key:"showToggleLinesWins",value:function(e){var t=this;this.toggleCb=c2d.once(function(){return e()}),this.slots.reelset.controller.isOneWinGroup=!1,this.state.setPhase(this.state.PHASES.SHOW_TOGGLE_LINES),this.slots.reelset.controller.flashToggleSymbolWins(this.slots.model.groupWins,function(){t.toggleCb&&t.slots.startTogglingWinLineForShowResult(function(){t.toggleCb&&t.toggleCb()})})}},{key:"skipToggleLinesWins",value:function(){this.toggleCb(),this.toggleCb=null,this.slots.reelset.controller.isOneWinGroup=!0}},{key:"order",get:function(){return[this.state.PHASES.SHOW_MASK,this.state.PHASES.SHOW_RESULT,this.state.PHASES.START_CREATURE_FIGHT,this.state.PHASES.SHOW_REPLACE,this.state.PHASES.SHOW_TOGGLE_LINES,this.state.PHASES.SHOW_GROUP_WINS,this.state.PHASES.ADD_WIN_TO_ROUND_HISTORY,this.state.PHASES.SHOW_RACCOON_REACTION,this.state.PHASES.HIDE_MASK,this.state.PHASES.SHOW_SCATTER_WINS,this.state.PHASES.REPORT_FINISH]}}]),o}(game.src.SlotsFSM.BGShowResultController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/regenerator":69}],33:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),s=r(e("@babel/runtime/helpers/asyncToGenerator")),o=r(e("@babel/runtime/helpers/classCallCheck")),a=r(e("@babel/runtime/helpers/createClass")),l=r(e("@babel/runtime/helpers/get")),u=r(e("@babel/runtime/helpers/inherits")),c=r(e("@babel/runtime/helpers/possibleConstructorReturn")),h=r(e("@babel/runtime/helpers/getPrototypeOf"));function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,h.default)(n);return e=r?(e=(0,h.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,c.default)(this,e)}}r=function(e){(0,u.default)(r,e);var t,n=p(r);function r(e){var t;return(0,o.default)(this,r),(t=n.call(this,e)).quickStopHandler=function(){t.stopFunSounds(),t.slots.background.backgrounds.middleGround.isStartStoppingRaccoon||(t.removeSkipListeners(t.quickStopHandler),c2d.eventManager.dispatch("RACCOON_STOP"),t.slots.reelset.stopSpin(t.slots.model.reels,!0),t.slots.background.backgrounds.backGround.setBackPositions(),t.slots.background.backgrounds.middleGround.skipRaccoonRunning(!0),t.slots.background.backgrounds.foreGround&&t.slots.background.backgrounds.foreGround.setBackPositions(),t.slots.raccoon.forceMove())},t}return(0,a.default)(r,[{key:"stopFunSounds",value:function(){["run","fun_attack","arca_fight","mushroom","plant","rush","scream","fun_dragon"].forEach(function(e){return c2d.AudioManager.stopAudio(e)})}},{key:"onEnterState",value:function(e){var t=this,n=(this.slots.roundhistory.reset(),new Promise(function(e){return t.slots.reelset.once(game.events.Reelset.REELSET_DID_FINISH_SPIN_ANIMATION,e)}));this.showRaccoonSequences().then(function(){n.then(function(){return c2d.Timeout.invoke(function(){return t.state.gotoSpinResultState()},10)})}),this.slots.lines.hide(),this.playStopSequence(),this.onFinishHandler=e}},{key:"showRaccoonSequences",value:(t=(0,s.default)(i.default.mark(function e(){var t,n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.slots.model,t=n.extra,r=n.scatterWins,n=n.extra.creature_appear,r=2<r.reduce(function(e,t){t=t.positions;return e.concat(t)},[]).length,e.next=4,this.slots.background.doStep(t,r||n);case 4:if(t.is_fight_with_creature)return this.slots.monster.monsters[t.creature_type].health.reset(),this.slots.monster.monsters[t.creature_type].health.show(),this.slots.raccoon.health.show(),c2d.eventManager.dispatch("MONSTER_APPEAR"),this.slots.monster.onResize(),e.next=12,this.slots.monster.play(t.creature_type,"appearance",!1,!0);e.next=13;break;case 12:this.slots.monster.play(t.creature_type,"idle",!0);case 13:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"stopSpin",value:function(e){this.stopFunSounds(),this.slots.reelset.controller.model.turboMode=this.slots.model.turboMode,this.slots.reelset.stopSpin(this.slots.model.reels,this.slots.model.quickStop||this.slots.model.turboMode),this.slots.model.quickStop||this.slots.model.turboMode?this.quickStopHandler():this.addSkipListeners(this.quickStopHandler),e()}},{key:"onExitState",value:function(){this.removeSkipListeners(this.quickStopHandler),(0,l.default)((0,h.default)(r.prototype),"onExitState",this).call(this)}},{key:"addSkipListeners",value:function(e){c2d.env.device.desktop()?(document.addEventListener("mouseup",e),document.addEventListener("keyup",e)):(document.addEventListener("mousedown",e),document.addEventListener("touchend",e))}},{key:"removeSkipListeners",value:function(e){c2d.env.device.desktop()?(document.removeEventListener("mouseup",e),document.removeEventListener("keyup",e)):(document.removeEventListener("mousedown",e),document.removeEventListener("touchend",e))}}]),r}(game.src.SlotsFSM.BGSpinStopController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],34:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),s=r(e("@babel/runtime/helpers/toConsumableArray")),o=r(e("@babel/runtime/helpers/asyncToGenerator")),a=r(e("@babel/runtime/helpers/defineProperty")),l=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/get")),h=r(e("@babel/runtime/helpers/inherits")),p=r(e("@babel/runtime/helpers/possibleConstructorReturn")),d=r(e("@babel/runtime/helpers/getPrototypeOf"));function f(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function b(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(n);return e=r?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,p.default)(this,e)}}r=function(e){(0,h.default)(r,e);var t,n=b(r);function r(){return(0,l.default)(this,r),n.apply(this,arguments)}return(0,u.default)(r,[{key:"onEnterState",value:function(){var e,t,n=this;!this.slots.model.freespins.isActiveStatus||this.slots.model.freespins.isStartStatus?(e=(this.slots.model.extra||{}).random_event_type,t=this.slots.model.freespins.isStartStatus&&Object.entries(this.slots.model.extra||{}).length?this.slots.model.extra:this.slots.model.initExtra,t=e?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(e){(0,a.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({random_event_type:e},t):t,this.slots.background.setMap(t),this.slots.background.setSteps("middleGround",t),this.showScatter(this.slots.model.hasWinScatters)):(this.slots.background.setSteps("freeSpinGround",this.slots.model.initExtra),this.showRaccoonBossBattleSequence(this.slots.model.extra)),this.slots.model.extra&&this.slots.model.extra.is_fight_with_creature?this.showRaccoonBattleSequences(this.slots.model.extra).then(function(){return(0,c.default)((0,d.default)(r.prototype),"onEnterState",n).call(n)}):((0,c.default)((0,d.default)(r.prototype),"onEnterState",this).call(this),this.manageSound()),c2d.eventManager.subscribe(c2d.documentEvents.SCREEN_WAS_RESIZED,function(){n.onResize()}),c2d.eventManager.subscribe(c2d.documentEvents.SCREEN_PREPARE_RESIZE,function(){n.resetResize()}),c2d.eventManager.subscribe("FlatUI.ON_AUDIO_MODE_CHANGED",function(e){var e=e.data,t="";if(n.slots.model.freespins.isActiveStatus&&!n.slots.model.freespins.isStartStatus)t="STOP_IDLE_MUSIC";else if(n.slots.reelset.controller.isFight)t="START_BATTLE_MUSIC";else{if(n.slots.model.freespins.isActiveStatus)return;t="START_IDLE_MUSIC"}e&&c2d.eventManager.dispatch(t)}),this.onResize()}},{key:"showScatter",value:function(e){e&&(this.slots.symbolreplacer.randomAnimation&&this.slots.symbolreplacer.randomAnimation.destroy&&this.slots.symbolreplacer.randomAnimation.destroy(),this.slots.reelset.controller.hideMask(),this.slots.reelset.controller.replaceScattersImmediately(this.slots.model.replace.symbols),this.slots.reelset.showScatterWins(this.slots.model.scatterWins,function(){return null}))}},{key:"showRaccoonBossBattleSequence",value:function(e){this.slots.raccoon.play("battle_idle",{},!0);var t=e.is_boss_defeated?"fall_idle":"idle",t=(this.slots.freespinboss.play(e.boss_type,t,!0),this.slots.model.extra),n=t.boss_hp,r=t.boss_lvl,i=t.raccoon_damage,s=t.is_boss_defeated,t=t.boss_general_hit,e=(s||(this.slots.freespinboss.dragons[e.boss_type].health.show(),this.slots.raccoon.health.show()),this.slots.freespinboss.dragons[e.boss_type].health.reconnectData(n,r,s,i),this.slots.raccoon.health.health-t);this.slots.raccoon.health.reconnectData(e),this.slots.overlay.setBack()}},{key:"showRaccoonBattleSequences",value:(t=(0,o.default)(i.default.mark(function e(t){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.creature_appear&&t.is_creature_defeated)return this.slots.raccoon.play("calm_idle",{},!0),this.slots.monster.play(t.creature_type,"out_idle",!0,!0),e.next=5,this.wait();e.next=8;break;case 5:this.slots.background.addMonsterToMidGround(t.creature_type),e.next=9;break;case 8:t.creature_appear?this.slots.raccoon.play("battle_idle",{},!0):(this.slots.reelset.controller.isFight=!0,this.slots.raccoon.play("battle_idle_energy_start",{trackId:0}),this.slots.raccoon.play("fx_idle",{trackId:1},!0)),this.slots.monster.play(t.creature_type,"idle",!0,!0),this.slots.monster.monsters[t.creature_type].health.show(),this.slots.raccoon.health.show();case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"wait",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;return new Promise(function(e){return c2d.Timeout.invoke(e,t)})}},{key:"resetResize",value:function(){this.slots.view.parent.y=0}},{key:"onResize",value:function(){var e,t,n;this.slots&&!c2d.env.device.desktop()&&(e=window.innerWidth,n=(t=window.innerHeight)/e,this.slots.background.onResize(1/n))}},{key:"setViewPosition",value:function(){var e;c2d.env.device.portrait()&&(e=this.slots.ui.controller.view.point,e=this.slots.view.parent.parent.toLocal(e.position,e.parent),this.slots.view.parent.y=e.y)}},{key:"defCentralSymbol",value:function(){return this.slots.reelset.controller.view.centralPoint}},{key:"setLevelUpPosition",value:function(e,t){var n=this.slots.level_up._content;n.scale.set(t),n.parent.toLocal(e.position,e.parent,n.position)}},{key:"manageSound",value:function(){var n=this;(0,s.default)(new Array(40)).forEach(function(e,t){c2d.call(function(){c2d.eventManager.dispatch(n.slots.model.freespins.isActiveStatus&&!n.slots.model.freespins.isStartStatus?"STOP_IDLE_MUSIC":"START_IDLE_MUSIC")},50*t)})}}]),r}(game.src.SlotsFSM.CheckController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/defineProperty":51,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/toConsumableArray":66,"@babel/runtime/regenerator":69}],35:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),a=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),u=r(e("@babel/runtime/helpers/createClass")),c=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf"));function h(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}var p=game.events.Popup,r=function(e){(0,c.default)(s,e);var t,n,i=h(s);function s(){var e;(0,l.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).pos={x:0,y:0},e.scale={x:.65,y:.65},e.dragon=null,e.lastBonusWin=null,e}return(0,u.default)(s,[{key:"onEnterState",value:function(e){var t=this;this.slots.model.autoplayMode=!1,c2d.eventManager.subscribeOnce(game.events.FlatUI.COLLECT_PRESSED,function(){return t.onCollectPressed()}),this.slots.popup.once(game.events.Popup.POPUP_WILL_SHOW,function(){return t.state.setPhase(t.state.PHASES.POPUP_WILL_SHOW)}),!this.slots.ui.controller.model.stopAutospinsOnFreespins&&this.slots.ui.controller.model.autospinsActive&&this.slots.popup.subscribe(game.events.Popup.POPUP_DID_SHOW_COUNTER,function(){return t.autoCollect()},this),this.onFinishHandler=e,this.showFinishPopup(),this.slots.popup._controller.view._firstDelay=0}},{key:"onCollectPressed",value:function(){var t=this;this.state.setPhase(this.state.PHASES.BUTTON_PRESSED),this.autocollectTimeout&&(c2d.Timeout.clear(this.autocollectTimeout),this.autocollectTimeout=null),this.slots.network.sendNextAction().onComplete(function(e){t.slots.setData(e),t.slots.dispatch(game.events.Slots.ON_MODEL_CHANGED,t.slots.model),t.slots.roundhistory.reset(),t.slots.overlay.showFreeSpinBack(t.slots.model.extra,!0,function(e){t.slots.background.backgrounds.foreGround&&(t.slots.background.backgrounds.foreGround.alpha=1),t.closePopup(e)}).then(function(){t.gotoBasegameRestoreState(),c2d.eventManager.dispatch("START_IDLE_MUSIC"),t.dragon&&(t.dragon.removeFromParent(),t.dragon=null)})})}},{key:"delay",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(e){return c2d.call(e,n||t._delay)})}},{key:"showFinishPopup",value:function(){var s=this;return this.slots.background.backgrounds.middleGround.particles.destroy(),new Promise(function(e){var t=s.slots.model.freespins.type,n=s.slots.freespinboss.dragons[t].state.getCurrent(0).animation.name;s.slots.freespinboss.dragons[t].health.hide(),s.slots.freespinboss.dragons[t].health.hideTextes(),"fall_idle"!==n?(c2d.eventManager.dispatch("FS_OUT"),s.slots.freespinboss.dragons[t].play("fly"),s.slots.raccoon.health.hide(),s.slots.freespinboss.dragons[t].onComplete=e):e(t)}).then(function(){var t=(0,o.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c2d.eventManager.dispatch("FS_WIN"),s.showTextPopup(t?"fs_result":"fs_live_dragon"),s.slots.popup._controller.view.children.last.position.set(0,0),t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,s.delay(400);case 7:i=s.slots.freespinboss.config[t].popupSettings.finish,n=i.x,r=i.y,i=i.scale,s.dragon=s.slots.freespinboss.getSmallDragon(t),s.dragon.scale.set(-i,i),s.dragon.position.set(n,r),s.dragon.play("fall_idle",!0),s.slots.popup._controller.view.children.last.findSlot("dragon_die_placeholder").currentSprite.addChild(s.dragon),s.setLimitWidthWin();case 14:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())}},{key:"showTextPopup",value:function(e){var t=this,n="fs_result"===e?this.slots.model.freespins.extra.bossWin:0,r=this.slots.model.freespins.totalWins/this.slots.model.totalBetCredit,i=(r/=this.slots.model.freespins.totalCount,n?null:function(){return t.state.setPhase(t.state.PHASES.POPUP_DID_SHOW)});this.slots.popup.show(e,{text:{GAMES_COUNT:this.slots.model.freespins.doneCount,TOTAL_WIN:this.slots.model.freespins.totalWins-n},winRatio:r,changePhase:i}),n&&c2d.eventManager.subscribeOnce(p.POPUP_DID_SHOW_COUNTER,function(e){e=e.data.data;return t.addNumberToCounter(e,n)})}},{key:"addNumberToCounter",value:(n=(0,o.default)(a.default.mark(function e(t,n){var r,i,s,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.type,i=t.options,s=t.label,e.next=3,this.setWinText(this.slots.popup._controller.view.children.last);case 3:i.bossWin=n,i.addText=!0,this.slots.popup._controller.addNumberToCounter(s,i,r),this.slots.popup._controller.animateDeletedText(this.lastBonusWin,n,function(){return o.state.setPhase(o.state.PHASES.POPUP_DID_SHOW)});case 7:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"setWinText",value:(t=(0,o.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.slots.model.freespins.extra.bossWin,(r=new c2d.display.Sprite(PIXI.Texture.EMPTY)).position.set(this.pos.x,this.pos.y),r.scale.set(this.scale.x,this.scale.y),r.anchor.set(.5),i=t.findSlot("bonus_text"),(i=i.currentSprite).removeChildren(),i.addChild(r),this.lastBonusWin=r,e.next=11,this.delay(500);case 11:return e.next=13,this.slots.popup._controller.animateBonusCounter(this.lastBonusWin,n);case 13:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"setLimitWidthWin",value:function(){var e=this.slots.popup._controller.view.spineContainer.getChildByName("text").children[0].children[0],t=c2d.env.device.desktop()?640:320;e.width>t&&e.scale.set(t/e.width)}}]),s}(game.src.SlotsFSM.FSEndController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/regenerator":69}],36:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/get")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}r=function(e){(0,a.default)(n,e);var t=c(n);function n(e){return(0,i.default)(this,n),t.call(this,e)}return(0,s.default)(n,[{key:"onEnterState",value:function(e){(0,o.default)((0,u.default)(n.prototype),"onEnterState",this).call(this,e),this.slots.background.light.alpha=0,this.slots.background.backgrounds.middleGround.particles.destroy(),this.slots.background.backgrounds.foreGround&&(this.slots.background.backgrounds.foreGround.alpha=0)}}]),n}(game.src.SlotsFSM.FSRestoreController);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],37:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),l=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),o=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),u=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass")),h=r(e("@babel/runtime/helpers/get")),p=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),d=r(e("@babel/runtime/helpers/getPrototypeOf"));function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,d.default)(n);return e=r?(e=(0,d.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,p.default)(s,e);var t,n,r,i=f(s);function s(e){(0,u.default)(this,s),(t=i.call(this,e)).currentPhase="",t.skipPhases=["showResult","showToggleLines"],t.steps.showMask={phase:"SHOW_MASK",check:function(){return!0},show:t.showMask,skip:t.showMask},t.steps.startBossBattle={phase:"START_BOSS_BATTLE",check:function(){return t.hasGroupWins&&!t.isBossDead},show:t.startBossBattle,skip:function(){throw new Error("skipStartShowBossBattle is not realized")}},t.steps.showToggleLines={phase:"SHOW_TOGGLE_LINES",check:function(){return t.hasAnyWinsMoreOne},show:t.showToggleLinesWins,skip:t.skipToggleLinesWins},t.steps.attackRaccoon={phase:"ATTACK_RACCOON",check:function(){return t.isFreeSpin},show:t.showBossAttack,skip:function(){throw new Error("skipShowBossAttack is not realized")}},t.steps.showBossBattle={phase:"SHOW_BOSS_BATTLE",check:function(){return t.isFightWithBoss&&t.slots.reelset.controller.isFight},show:t.showBossBattle,skip:function(){throw new Error("skipShowBossBattle is not realized")}},t.steps.addWinToRoundHistory={phase:"ADD_WIN_TO_ROUND_HISTORY",check:function(){return t.hasGroupWins},show:t.addWinToRoundHistory,skip:t.skipAddWinToRoundHistory},t.attackDict=(new Map).set([5,15],"attack_1").set([16,20],"attack_2").set([21,50],"attack_3");var t,n={};return Object.keys(t.steps).forEach(function(e){n[t.steps[e].phase]=e}),t.soundAttackDict={attack_1:"RACCOON_ATTACK_1",attack_2:"RACCOON_ATTACK_2",attack_3:"RACCOON_ATTACK_3"},e.registerPhases(n),t.dragonHpLevel=0,t.onSkipWinPress=function(){return t.onSkipWinPressed()},t.skipWinBySpace=function(e){return!c2d.env.storage.getItem("spinBySpace",!0)||32!==e.key&&32!==e.keyCode?null:t.onSkipWinPressed()},t}return(0,c.default)(s,[{key:"addSkipListeners",value:function(){c2d.env.device.desktop()?(document.addEventListener("mouseup",this.onSkipWinPress),document.addEventListener("keyup",this.skipWinBySpace)):(document.addEventListener("mousedown",this.onSkipWinPress),document.addEventListener("touchend",this.onSkipWinPress))}},{key:"removeSkipListeners",value:function(){c2d.env.device.desktop()?(document.removeEventListener("mouseup",this.onSkipWinPress),document.removeEventListener("keyup",this.skipWinBySpace)):(document.removeEventListener("mousedown",this.onSkipWinPress),document.removeEventListener("touchend",this.onSkipWinPress))}},{key:"onSkipWinPressed",value:function(){this.currentPhase!==this.state.currentPhase&&(this.currentPhase=this.state.currentPhase,this.skipPhases.includes(this.currentPhase)&&this.steps[this.state.currentPhase].skip.call(this))}},{key:"showMask",value:function(e){this.slots.reelset.controller.view.reels.forEach(function(e){e.addChild(e.maskStock),e.mask=e.maskStock}),e()}},{key:"onEnterState",value:function(){var e;this.currentPhase="",this.slots.reelset.controller.isOneWinGroup=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=(0,h.default)((0,d.default)(s.prototype),"onEnterState",this)).call.apply(e,[this].concat(n)),this.dragonHpLevel&&1!==this.slots.model.extra.boss_lvl||(this.dragonHpLevel=this.slots.model.extra.boss_lvl)}},{key:"showResult",value:function(e){if(this.state.setPhase(this.state.PHASES.SHOW_RESULT),c2d.eventManager.dispatch(game.events.Slots.ON_RESULT,e),this.slots.model.turboMode)return this.skipShowResult(e)}},{key:"skipShowResult",value:function(){c2d.eventManager.dispatch(game.events.Slots.ON_SKIP_WIN_RESULT,{})}},{key:"showBossAttack",value:(r=(0,a.default)(l.default.mark(function e(t){var n,r,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.slots.model.freespins.type,e.next=3,this.slots.freespinboss.play(n,"attack",!1,!0);case 3:return n=this.slots.model.extra,r=n.boss_current_hit,s=n.boss_general_hit,"damage"==(i=r&&0<r?"damage":"battle_idle_protection")?(c2d.eventManager.dispatch("RACCOON_DAMAGE"),s=this.slots.raccoon.health.health-s,this.slots.raccoon.health.hurt(r,s)):(c2d.eventManager.dispatch("RACCOON_PROTECT"),this.slots.raccoon.health.bigJump()),e.next=8,this.slots.raccoon.play(i,{trackId:0});case 8:return e.next=10,this.slots.raccoon.play("battle_idle",{trackId:0},!0);case 10:t();case 11:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"showReplace",value:function(e){c2d.eventManager.dispatch("FS_WILD_SHOT"),(0,h.default)((0,d.default)(s.prototype),"showReplace",this).call(this,e)}},{key:"addWinToRoundHistory",value:function(e){this.slots.roundhistory.addWin(this.slots.model.groupWins,e)}},{key:"skipAddWinToRoundHistory",value:function(e){this.slots.roundhistory.addWin(this.slots.model.groupWins,e,!0)}},{key:"isFreeSpin",get:function(){return"freespin"===this.slots.model.currentSpinType&&!this.slots.model.extra.is_boss_defeated}},{key:"isExistDamageToBoss",get:function(){return this.slots.model.extra&&0<this.slots.model.extra.raccoon_damage}},{key:"isFightWithBoss",get:function(){return this.slots.model.extra&&this.slots.model.extra.is_fight_with_boss}},{key:"isBossDead",get:function(){return this.slots.model.extra.is_boss_defeated}},{key:"isBossDying",get:function(){return!!this.slots.model.extra&&(this.slots.model.extra.is_boss_defeated&&this.slots.model.extra.is_fight_with_boss)}},{key:"hasResult",get:function(){return this.slots.model.totalWin>=14*this.slots.model.totalBetCredit&&this.hasGroupWins}},{key:"startBossBattle",value:(n=(0,a.default)(l.default.mark(function e(t){var n=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("fx_idle"!==this.slots.raccoon.currentAnimation)return c2d.eventManager.dispatch("BALL_IN"),this.slots.reelset.controller.isFight=!0,this.slots.raccoon.play("fx_in",{trackId:1}).then(function(){return n.slots.raccoon.play("fx_idle",{trackId:1},!0)}),e.next=6,this.slots.raccoon.play("battle_idle_energy_start",{trackId:0});e.next=9;break;case 6:return c2d.eventManager.dispatch("BALL_IDLE"),e.next=9,this.slots.raccoon.play("battle_idle_energy_idle",{trackId:0},!0);case 9:t();case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"showBossBattle",value:(t=(0,a.default)(l.default.mark(function e(t){var n,r,i,s,o,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getAttackPower(),r=this.slots.model.freespins.type,a=this.slots.model.extra,i=a.boss_hp,s=a.boss_lvl,o=a.is_boss_defeated,a=a.raccoon_damage,e.next=5,this.slots.raccoon.play("battle_idle_energy_end",{trackId:0});case 5:return e.next=7,this.slots.raccoon.play("empty",{trackId:1});case 7:return c2d.eventManager.dispatch(this.soundAttackDict[n]),e.next=10,this.slots.raccoon.play(n,{trackId:0});case 10:return this.slots.freespinboss.dragons[r].health.hurt(a,i,s,o),c2d.eventManager.dispatch(this.isBossDying?"DRAGON_FALL":"DRAGON_DAMAGE"),e.next=14,this.slots.freespinboss.play(r,this.isBossDying?"damage_fall":"damage");case 14:if(!this.isBossDying&&this.slots.model.extra.boss_lvl>this.dragonHpLevel)return this.dragonHpLevel=this.slots.model.extra.boss_lvl,this.playLvlUp(r,s,o),c2d.eventManager.dispatch("DRAGON_AGGRESSION"),e.next=20,this.slots.freespinboss.play(r,"agression");e.next=24;break;case 20:return e.next=22,this.slots.freespinboss.play(r,"idle",!0);case 22:e.next=27;break;case 24:return this.isBossDying&&this.slots.freespinboss.dragons[r].health.triggerText(5),e.next=27,this.slots.freespinboss.play(r,this.isBossDying?"fall_idle":"idle",!0);case 27:if(this.isBossDying)return e.next=30,this.slots.raccoon.play("battle_idle_to_calm_idle",{trackId:0});e.next=39;break;case 30:return c2d.eventManager.dispatch("RACCOON_WIN"),e.next=33,this.slots.raccoon.play("joy_win",{trackId:0});case 33:return e.next=35,this.slots.raccoon.play("calm_idle",{trackId:0},!0);case 35:return e.next=37,this.slots.popupmonsterwin.show();case 37:this.slots.freespinboss.dragons[r].health.hide(),this.slots.raccoon.health.hide();case 39:this.slots.reelset.controller.isFight=!1,t();case 41:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"playLvlUp",value:function(e,t,n){var r=this,i=(c2d.eventManager.dispatch("LEVEL_UP"),this.slots.freespinboss.dragons[e].shakeSettings);this.shake(i),n&&(t=5),c2d.Timeout.invoke(function(){0!==r.slots.model.freespins.leftCount&&(r.slots.level_up.visible=!0,r.slots.level_up._content.play());try{r.slots.level_up._content.onEvent=function(){r.slots.freespinboss.dragons[e].health.triggerText(t)}}catch(e){console.error(e)}},i.fxDelay)}},{key:"getAttackPower",value:function(){var r=this.slots.model.extra.raccoon_damage,i="attack_1";return this.attackDict.forEach(function(e,t){var t=(0,o.default)(t,2),n=t[0],t=t[1];n<=r&&r<=t&&(i=e)}),i}},{key:"reportFinish",value:function(){"freespin"===this.slots.model.availableActions[0]&&this.slots.roundhistory.reset(),(0,h.default)((0,d.default)(s.prototype),"reportFinish",this).call(this)}},{key:"shake",value:function(e,r){var i=this,s=e.power,o=e.amplitude,a=e.time,l=(new Date).getTime(),u=Math.ceil(a/(2*o)),c=0;(function t(e){var n=Math.cos(c/u*Math.PI-Math.PI/2);i.tShake=c2d.Tween.get(i.slots.view).to({x:n*+s,y:n*+s*(.5-Math.random())},1.5*o,c2d.Tween.Ease.quintInOut).to({x:n*-s,y:n*-s*(.5-Math.random())},1.25*o,c2d.Tween.Ease.quintInOut).call(function(e){l+a>(new Date).getTime()?t():(i.slots.view.position.set(0,0),r&&r())}),c++})()}},{key:"showToggleLinesWins",value:function(e){var t=this;this.toggleCb=c2d.once(function(){return e()}),this.slots.reelset.controller.isOneWinGroup=!1,this.state.setPhase(this.state.PHASES.SHOW_TOGGLE_LINES),this.slots.reelset.controller.flashToggleSymbolWins(this.slots.model.groupWins,function(){t.slots.startTogglingWinLineForShowResult(function(){return t.toggleCb()})})}},{key:"skipToggleLinesWins",value:function(){this.toggleCb(),this.slots.reelset.controller.isOneWinGroup=!0}},{key:"order",get:function(){return[this.state.PHASES.SHOW_MASK,this.state.PHASES.SHOW_REPLACE,this.state.PHASES.ATTACK_RACCOON,this.state.PHASES.START_BOSS_BATTLE,this.state.PHASES.SHOW_RESULT,this.state.PHASES.SHOW_TOGGLE_LINES,this.state.PHASES.SHOW_GROUP_WINS,this.state.PHASES.ADD_WIN_TO_ROUND_HISTORY,this.state.PHASES.SHOW_BOSS_BATTLE,this.state.PHASES.REPORT_FINISH]}}]),s}(game.src.SlotsFSM.FSShowResultController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/regenerator":69}],38:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),o=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/regenerator"))),u=r(e("@babel/runtime/helpers/slicedToArray")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),l=r(e("@babel/runtime/helpers/classCallCheck")),c=r(e("@babel/runtime/helpers/createClass")),h=r(e("@babel/runtime/helpers/inherits")),i=r(e("@babel/runtime/helpers/possibleConstructorReturn")),s=r(e("@babel/runtime/helpers/getPrototypeOf"));function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,s.default)(n);return e=r?(e=(0,s.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,i.default)(this,e)}}r=function(e){(0,h.default)(s,e);var t,i=p(s);function s(){var e;(0,l.default)(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).texts={multiplier:"description_freespins_wild_green",reel_wild:"description_freespins_wild_blue",cross_wild:"description_freespins_wild_red"},e.keys=["OpenSans-ExtraBold_glow[description_freespins_wild_blue]","popup_dragon_ray"],e._delay=400,e}return(0,c.default)(s,[{key:"onEnterState",value:function(e){this.onFinishHandler=e,!this.slots.ui.controller.model.stopAutospinsOnFreespins&&this.slots.ui.controller.model.autospinsActive&&this.slots.popup.subscribe(game.events.Popup.POPUP_DID_SHOW,this.autoStartFreespins,this),"initfreespin"===this.slots.model.nextAction?this.sendInitFreespin():this.showStartPopup()}},{key:"showStartPopup",value:(t=(0,a.default)(o.default.mark(function e(){var t,n,r=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.slots.background.backgrounds.middleGround.particles.destroy(),this._waitEvent=!0,this.slots.popup.once(game.events.Popup.POPUP_WILL_SHOW,function(){return r.state.setPhase(r.state.PHASES.POPUP_WILL_SHOW)},this),this.slots.popup.once(game.events.Popup.POPUP_DID_SHOW,function(){return r.onPopupShowed()}),this.slots.popup.once(game.events.Popup.POPUP_DID_HIDE,function(){return r.onPopupHide()}),this.slots.popup.subscribe(game.events.Popup.POPUP_EVENT,this.onPopupEvent,this),t=this.slots.model.freespins.isPlayStatus&&this.slots.popup.config.fs_restore?"fs_restore":"fs_start",this.slots.popup.show(t,{text:{GAMES_COUNT:this.slots.model.freespins.leftCount,TOTAL_WIN:this.slots.model.freespins.totalWins}}),e.next=10,this.delay();case 10:return e.next=12,this.showDragon();case 12:n=e.sent,"fs_restore"===t?c2d.eventManager.subscribeOnce(game.events.FlatUI.FREESPINS_START_PRESSED,(0,a.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.hideDragon(n);case 2:r.onSpinPressed(),r.slots.popup.hide(),r.showMask(),c2d.eventManager.dispatch("STOP_IDLE_MUSIC");case 6:case"end":return e.stop()}},e)}))):c2d.eventManager.subscribeOnce(game.events.FlatUI.FREESPINS_START_PRESSED,(0,a.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.hideDragon(n);case 2:return t=r.slots.model.extra,r.slots.popup.hide(),e.next=6,r.slots.overlay.showFreeSpinBack(t,!1,function(e){r.tryToReinitReelset(),e()});case 6:r.showMask(),r.onSpinPressed();case 8:case"end":return e.stop()}},e)})));case 14:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"delay",value:function(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(e){return c2d.call(e,n||t._delay)})}},{key:"showDragon",value:function(){var l=this;return new Promise(function(e){var t=l.slots.model.freespins.type,n=l.slots.freespinboss.getSmallDragon(t),r=l.slots.freespinboss.config[t].popupSettings.start,i=r.x,s=r.y,r=r.scale,o=l.keys.map(function(e){return l.slots.popup._controller.view.children.first.findSlot(e).currentSprite}),o=(0,u.default)(o,2),a=o[0],o=o[1];l.slots.popup._controller.view.children.first.position.set(0,0),n.position.set(i,s),n.scale.set(r,r),n.play("freespins_popup_in"),c2d.eventManager.dispatch("FS_IN"),n.onComplete=function(){return e(n)},o.addChild(n),a.children.forEach(function(e){e.text=l.texts[t].ls()})}).then(function(e){return e.play("freespins_popup_idle",!0),e})}},{key:"hideDragon",value:function(t){return new Promise(function(e){c2d.eventManager.dispatch("SMALL_DRAGON_FLY"),t.play("freespins_popup_out"),t.onComplete=function(){e(),t.removeFromParent()}})}},{key:"sendInitFreespin",value:function(e){var t=this;this._waitInit=!0,this.state.setPhase(this.state.PHASES.FREESPINS_WILL_INIT),this.slots.network.sendNextAction(e).onComplete(function(e){t.slots.setData(e),t.onInitFreespin();e=t.slots.model.extra;t.slots.roundhistory.reset(),c2d.eventManager.dispatch("GROT"),t.slots.model.freespins.isGift?(t.slots.background.setForceGrot(),t.showStartPopup()):t.slots.background.doStep(e).then(function(){return t.showStartPopup()})})}},{key:"showMask",value:function(){this.slots.reelset.controller.view.reels.forEach(function(e){e.addChild(e.maskStock),e.mask=e.maskStock})}},{key:"onPopupEvent",value:function(){this._waitEvent=!1,this.slots.setBehavior(this.freespinsBehavior),this.slots.background.backgrounds.foreGround&&(this.slots.background.backgrounds.foreGround.alpha=0)}},{key:"onSpinPressed",value:function(){this.state.setPhase(this.state.PHASES.SPIN_PRESSED),this.autostartTimeout&&(c2d.Timeout.clear(this.autostartTimeout),this.autostartTimeout=null),this._popupIsShowed=!1,this.slots.model.drop.hasPops?this.state.changeState(game.slots.FSM_STATES.FS_PLAY_POP_STATE):this.state.changeState(game.slots.FSM_STATES.FS_SPIN_START_STATE)}}]),s}(game.src.SlotsFSM.FSStartController);n.default=r},{"@babel/runtime/helpers/asyncToGenerator":47,"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61,"@babel/runtime/helpers/slicedToArray":64,"@babel/runtime/regenerator":69}],39:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/defineProperty"))),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/createClass")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){(0,i.default)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}var r=flatUI.layout,d=r.HorizontalLayout,f=r.FrameLayout,b=r.GridLayout,m=r.Spacer,y=flatUI.text.TextField,e=function(e){(0,a.default)(n,e);var t=p(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"featuresOrder",get:function(){return[this.inflateBetInfo(),this.hasReelset&&this.inflateReelset(),this.hasBonusGame&&this.inflateBonusGame(this.betRecordModel.bonusGame),this.inflateBalance(),this.inflateActionResult(),this.hasReplaces&&this.inflateReplaces(this.betRecordModel.replace),this.inflateGameFeature(),this.hasWinFreespins&&this.inflateWinFreespins(),this.hasWinBonusGame&&this.inflateWinBonusGame(),this.hasFreespins&&this.inflateFreespinsFeature(),this.hasDefeatFreespinsBoss&&this.inflateDefeatFreespinsBoss(),this.hasBonusGame&&this.inflateBonusGameFeature(),this.hasFreezes&&this.inflateFreezes(this.betRecordModel.freeze),this.hasWalks&&this.inflateWalks(this.betRecordModel.walks),this.hasExpands&&this.inflateExpands(this.betRecordModel.reels.filter(function(e){return e.expanded})),this.hasExtra&&this.inflateExtra(this.betRecordModel.extra),this.hasCreatureEvent&&this.inflateCreatureEvent(this.betRecordModel.extra),this.hasRandomEvents&&this.inflateRandomEvents(this.betRecordModel.extra),this.hasBonusEvents&&this.inflateBonusEvents(this.betRecordModel.extra),this.hasCollectibleWins&&this.inflateWinCollectibleWins(this.betRecordModel.collectibleWins),this.hasWinFirstRespin&&this.inflateWinFirstRespin(this.betRecordModel.respin),this.hasWinNextRespin&&this.inflateWinNextRespin(this.betRecordModel.respin),this.hasFreespinsExtra&&this.inflateFreespinsExtra(this.betRecordModel.freespins.extra),this.hasWins&&this.inflateWins(this.betRecordModel)]}},{key:"inflateGroupWin",value:function(e,t){var n=e.code,r=e.positions,e=e.amount,t=t.layoutHeight,i={Text:{layoutWidth:"25%",style:h(h({},this.styles.TextField.normal),{},{align:"left"}),fitInLayout:!0,align:"left"}};return new d({align:"center",layoutWidth:"100%",layoutHeight:t,style:this.styles.Panel.primary},[new game.src.FlatUI.bet.BetHistorySymbol(n,"history_idle",{zoom:.8,layoutWidth:"25%",layoutHeight:"75%"}),new y("".concat("history_symbols".ls(),": ").concat(r.length),i.Text),new y("".concat("history_amount".ls(),": ").concat(c2d.env.toCurrency(this.config.currency,e)),i.Text)])}},{key:"hasBonusEvents",get:function(){return this.betRecordModel.extra.is_creature_defeated&&this.betRecordModel.extra.is_fight_with_creature}},{key:"inflateBonusEvents",value:function(e){var e=e.creature_type,t="0";return this.betRecordModel.replace.symbols&&this.betRecordModel.replace.symbols.first&&(t=""+this.betRecordModel.replace.symbols.first.replace),this.inflateFeature({icon:t,animation:"history_idle",header:"history_bonus_header".ls(),text:("history_"+e+"_description").ls()})}},{key:"hasRandomEvents",get:function(){return this.betRecordModel.extra.random_event_type}},{key:"inflateRandomEvents",value:function(e){var e=e.random_event_type,t="0";return this.betRecordModel.replace.symbols&&this.betRecordModel.replace.symbols.first&&(t=""+this.betRecordModel.replace.symbols.first.replace),this.inflateFeature({icon:t,animation:"history_idle",header:("history_random_"+e+"_header").ls(),text:("history_random_"+e+"_description").ls()})}},{key:"createWinsReelsetSymbols",value:function(){var s=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).iconScale,o=void 0===e?this.reelsetScale:e,a=this.betRecordModel.groupWins.flatMap(function(e){return e.positions}),l=[],e=this.betRecordModel.reels.reduce(function(e,t){return e.concat(t.symbols)},[]),u=game.src.Reelset.SymbolAnimations.reelsetViewConfig;return e.forEach(function(n){n.replace&&(n.type=n.replace);var e=a.find(function(e){var t=e.reelId,e=e.symId;return n.id===e&&n.reelId===t})?"freeze_idle":"history_idle",t=u.columnsWidth+u.columnsIndent,r=u.reelViewConfig.rowsHeight+u.reelViewConfig.rowsIndent,i=n.id*s.betRecordModel.reels.length+n.reelId;l[i]=new game.src.FlatUI.bet.BetHistorySymbol(n,e,{zoom:o,layoutWidth:t*o+"px",layoutHeight:r*o+"px"})}),this.reelsetSymbols=l}},{key:"createReelsetSymbols",value:function(){var i=this,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).iconScale,s=void 0===e?this.reelsetScale:e,o=[],e=this.betRecordModel.reels.reduce(function(e,t){return e.concat(t.symbols)},[]),a=game.src.Reelset.SymbolAnimations.reelsetViewConfig;return e.forEach(function(e){void 0!==e.replace&&(e.type=e.replace);var t=a.columnsWidth+a.columnsIndent,n=a.reelViewConfig.rowsHeight+a.reelViewConfig.rowsIndent,r=e.id*i.betRecordModel.reels.length+e.reelId;o[r]=new game.src.FlatUI.bet.BetHistorySymbol(e,"history_idle",{zoom:s,layoutWidth:t*s+"px",layoutHeight:n*s+"px"})}),this.reelsetSymbols=o}},{key:"inflateReelset",value:function(){var e=this.hasWins?this.createWinsReelsetSymbols():this.createReelsetSymbols(),e=new b({layoutWidth:"100%",id:"reelset",columnCount:this.betRecordModel.reels.length,padding:0},e);return this.applyReelsetMask(e),new f({layoutWidth:"100%",align:"center"},[e])}},{key:"hasDefeatFreespinsBoss",get:function(){var e=this.betRecordModel.extra,t=e.is_boss_defeated;return!(!e.is_fight_with_boss||!t)}},{key:"inflateDefeatFreespinsBoss",value:function(){return this.inflateSpriteFeature({icon:"history_chest",iconScale:1,animation:"freeze_idle",header:"history_freespins_victory_header".ls(),text:"history_freespins_victory_description".ls()})}},{key:"inflateFreespinsFeature",value:function(){var e=this.betRecordModel.extra,t=e.boss_hp,n=e.boss_lvl,r=e.boss_type,i=e.is_boss_defeated,e=e.is_fight_with_boss,s={multiplier:["x2","x3","x4","x5","x6"],reel_wild:["2","3","4","5","6"],cross_wild:["4","8","12","16","20"]}[r][i?n:n-1],t=[100,50,20,0,0][n-1]+t,o={icon:{multiplier:"10",reel_wild:"11",cross_wild:"12"}[r],iconScale:.5,animation:i?"freeze_idle":"history_idle"},a=!1;if(i||(o.header=("history_freespins_"+r+"_header").ls(),o.hpText=0<t?"history_freespins_fight_with_dragon_description".ls({HP:t}):null,a=!0),i&&e&&(o.header=("history_freespins_"+r+"_header").ls(),o.text="history_freespins_dead_dragon_description".ls(),a=!0),"multiplier"===r&&this.hasWins&&(o.levelText="history_freespins_level_of_bonus_header".ls({LEVEL:i?n+1:n}),o.text=("history_freespins_"+r+"_description").ls({LEVEL:s})),("multiplier"!==r||this.hasWins||a)&&(["reel_wild","cross_wild"].includes(r)&&"freespin"===this.betRecordModel.currentSpinType&&(o.levelText="history_freespins_level_of_bonus_header".ls({LEVEL:i?n+1:n}),o.text=("history_freespins_"+r+"_description").ls({LEVEL:s})),!["reel_wild","cross_wild"].includes(r)||"freedrop"!==this.betRecordModel.currentSpinType||!i||e))return this.inflateBossFeature(o)}},{key:"inflateBossFeature",value:function(e){var t=e.icon,n=e.animation,r=e.header,i=e.text,s=e.levelText,o=e.hpText,e=e.iconScale,e=new game.src.FlatUI.bet.BetHistorySymbol(t,n,{id:"symbol",zoom:void 0===e?1:e,layoutWidth:"200px",layoutHeight:"200px"});return e.animation.scale.x*=-1,e.animation.animation.scale.x*=-1,e.animation.anchor.y=.75,e.animation.animation.anchor.y=.75,new d({layoutWidth:"100%",align:"center",style:this.styles.Panel.primary},[new m({layoutWidth:"10px"}),t&&n&&new f({layoutWidth:"380px",layoutHeight:"220px",align:"center"},[e]),new m({layoutWidth:"10px"}),new b({columnCount:1,padding:10},[r&&new y(r,{layoutWidth:"100%",style:h(h({},this.styles.TextField.header),{},{align:"center"})}),o&&new y(o,{layoutWidth:"100%",style:h(h({},this.styles.TextField.normal),{},{fill:"0xA4A4A4"})}),s&&new y(s,{layoutWidth:"100%",style:h(h({},this.styles.TextField.header),{},{align:"center"})}),i&&new y(i,{layoutWidth:"100%",style:h(h({},this.styles.TextField.normal),{},{fill:"0xA4A4A4"})})])])}},{key:"hasCreatureEvent",get:function(){return this.betRecordModel.extra&&(this.betRecordModel.extra.creature_appear||this.betRecordModel.extra.is_fight_with_creature)}},{key:"inflateCreatureEvent",value:function(){var e=this.betRecordModel.extra,t=e.is_fight_with_creature,n=e.is_creature_defeated,r=e.creature_type,i=e.creature_hp,e=e.creature_appear,r={icon:{scatter:"13",random_wilds:"14",symbol_cross:"15",big_symbol:"16",reel_wilds:"17"}[r],iconScale:.6,animation:n?"freeze_idle":"history_idle",header:"history_fight_with_creature_header".ls()};return t&&!n&&(r.text="history_fight_with_creature_description".ls({HP:e?16:i})),t&&n&&(r.text="history_win_fight_with_creature_description".ls()),this.inflateCreatureFeature(r)}},{key:"inflateCreatureFeature",value:function(e){var t=e.icon,n=e.animation,r=e.header,i=e.text,e=e.iconScale,e=new game.src.FlatUI.bet.BetHistorySymbol(t,n,{id:"symbol",zoom:void 0===e?1:e,layoutWidth:"200px",layoutHeight:"200px"});return e.animation.scale.x*=-1,e.animation.animation.scale.x*=-1,e.animation.anchor.y=.6,e.animation.animation.anchor.y=.6,new d({layoutWidth:"100%",align:"center",style:this.styles.Panel.primary},[new m({layoutWidth:"10px"}),t&&n&&new f({layoutWidth:"260px",layoutHeight:"220px",align:"center"},[e]),new m({layoutWidth:"10px"}),new b({columnCount:1,padding:10},[r&&new y(r,{layoutWidth:"100%",style:h(h({},this.styles.TextField.header),{},{align:"center"})}),i&&new y(i,{layoutWidth:"100%",style:h(h({},this.styles.TextField.normal),{},{fill:"0xA4A4A4"})})])])}},{key:"inflateWinFreespins",value:function(){return this.inflateSpriteFeature({icon:"history_cave",header:"history_win_freespins_header".ls(),text:"history_win_freespins_description".ls({AMOUNT:this.betRecordModel.freespins.addCount.toString()})})}},{key:"inflateSpriteFeature",value:function(e){var t=e.icon,n=e.header,r=e.text,e=e.iconScale;return new d({layoutWidth:"100%",align:"center",style:this.styles.Panel.primary},[t&&new f({layoutWidth:"260px",layoutHeight:"220px",align:"center"},[new flatUI.graphics.Icon(t,{layoutWidth:"200px",layoutHeight:"200px",align:"center",fitInLayout:!0,zoom:void 0===e?1:e})]),new b({columnCount:1,padding:10},[n&&new y(n,{layoutWidth:"100%",style:h(h({},this.styles.TextField.header),{},{align:"center"})}),r&&new y(r,{layoutWidth:"100%",style:h(h({},this.styles.TextField.normal),{},{fill:"0xA4A4A4"})})])])}}]),n}(game.src.FlatUI.bet.BetRecordDetails);n.default=e},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/defineProperty":51,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],40:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/createClass"))),s=r(e("@babel/runtime/helpers/classCallCheck")),o=r(e("@babel/runtime/helpers/inherits")),a=r(e("@babel/runtime/helpers/possibleConstructorReturn")),l=r(e("@babel/runtime/helpers/getPrototypeOf"));function u(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(n);return e=r?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,a.default)(this,e)}}r=function(e){(0,o.default)(n,e);var t=u(n);function n(e){return(0,s.default)(this,n),(e=t.call(this,e)).uiConfig.states.INTRO_STATE.enter={introTumbler:{visible:!0},home:{visible:!1},audio:{visible:!1},radio:{visible:!1,title:"",text:""},quickSettingsPanel:{visible:!1},balancePanel:{visible:!1},betPanel:{visible:!1},paytable:{visible:!1},clockText:{visible:!1},rules:{visible:!1}},e}return(0,i.default)(n)}(game.src.FlatUI.State);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],41:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault"),i=(Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r(e("@babel/runtime/helpers/classCallCheck"))),s=r(e("@babel/runtime/helpers/createClass")),o=r(e("@babel/runtime/helpers/get")),a=r(e("@babel/runtime/helpers/inherits")),l=r(e("@babel/runtime/helpers/possibleConstructorReturn")),u=r(e("@babel/runtime/helpers/getPrototypeOf"));function c(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,u.default)(n);return e=r?(e=(0,u.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,l.default)(this,e)}}r=function(e){(0,a.default)(r,e);var t=c(r);function r(){return(0,i.default)(this,r),t.apply(this,arguments)}return(0,s.default)(r,[{key:"onResize",value:function(){this.isPortrait}},{key:"onInitialize",value:function(){var n=this;(0,o.default)((0,u.default)(r.prototype),"onInitialize",this).call(this),c2d.env.device.desktop()||(flatUI.styles.Panel.paytableButtonLowerLandscape=this.config.paytableButtonLowerLandscape,this.point=(new PIXI.Graphics).beginFill(16711680,0).drawCircle(0,0,1),this.topLayout.addChild(this.point),this.point.y=this.topLayout.height,c2d.eventManager.subscribe(game.events.FlatUI.ON_HAND_MODE_CHANGED,function(){c2d.Timeout.invoke(function(){var e=n.getScale(),t=n.getPos(e);n.onResize(e,t)},300)}))}},{key:"getPos",value:function(e){var t,n,r;return r=c2d.env.device.portrait()?(t=-.5*((t=c2d.screenParams.screenWidth)*e-t),n=(e=this.config.gameSettings.portrait.posY).k,r=e.b,e=e.min,(n=n*this.ratio+r)<e?e:n):(t=0,this.config.gameSettings.desktop.posY),{x:t,y:r}}},{key:"getScale",value:function(){var e,t,n,r;return r=c2d.env.device.portrait()?(r=(n=this.config.gameSettings.portrait.scale).k,e=n.b,t=n.min,(r=(n=n.max)<(r=r*this.ratio+e)?n:r)<t?t:r):this.config.gameSettings.desktop.scale}},{key:"setActionBtnPortaritPos",value:function(){var e=new PIXI.Point,t=new PIXI.Point,n=c2d.engine._renderer,r=n.height,n=n.width;e.set(.5*n,.8*r),this.actionButton.parent.toLocal(e,null,t),t.x-=this.actionButton.width/2,t.y-=this.actionButton.height/2,this.actionButton.position.copyFrom(t)}},{key:"setTopLayoutPos",value:function(){var e=c2d.engine._renderer.height/c2d.engine._renderer.width;this.topLayout.y=6*e}},{key:"setTitlePos",value:function(){this.title.parent.toLocal(this.audioIcon.position,this.audioIcon.parent,this.title.position),this.title.x+=this.audioIcon.width+this.title.width/2+10,this.title.y+=this.topLayout.height/2}},{key:"setFontSize",value:function(){this.title.style.fontSize=this.config.titleSize}},{key:"actionButton",get:function(){return this.controlsPanel.findChildById("actionButton")}},{key:"isPortrait",get:function(){return c2d.env.device.portrait()}},{key:"topLayout",get:function(){return this.controlsPanel.findChildById("footerPanel")}},{key:"title",get:function(){return this.controlsPanel.findChildById("gameTitle").textField}},{key:"audioIcon",get:function(){return this.controlsPanel.findChildById("audio")}}]),r}(game.src.FlatUI.View);n.default=r},{"@babel/runtime/helpers/classCallCheck":48,"@babel/runtime/helpers/createClass":50,"@babel/runtime/helpers/get":52,"@babel/runtime/helpers/getPrototypeOf":53,"@babel/runtime/helpers/inherits":54,"@babel/runtime/helpers/interopRequireDefault":55,"@babel/runtime/helpers/possibleConstructorReturn":61}],42:[function(e,t,n){"use strict";e("./components/index.js"),e("./extensions/index.js"),game.run()},{"./components/index.js":11,"./extensions/index.js":24}],43:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},{}],44:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],45:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":43}],46:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],47:[function(e,t,n){function l(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}t.exports=function(a){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=a.apply(e,o);function i(e){l(r,t,n,i,s,"next",e)}function s(e){l(r,t,n,i,s,"throw",e)}i(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],48:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],49:[function(e,r,t){var i=e("./setPrototypeOf.js"),s=e("./isNativeReflectConstruct.js");function o(e,t,n){return s()?r.exports=o=Reflect.construct.bind():r.exports=o=function(e,t,n){var r=[null];r.push.apply(r,t);t=new(Function.bind.apply(e,r));return n&&i(t,n.prototype),t},r.exports.__esModule=!0,r.exports.default=r.exports,o.apply(null,arguments)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports},{"./isNativeReflectConstruct.js":56,"./setPrototypeOf.js":63}],50:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],51:[function(e,t,n){t.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],52:[function(e,t,n){var i=e("./superPropBase.js");function r(){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get.bind():t.exports=r=function(e,t,n){var r=i(e,t);if(r)return r=Object.getOwnPropertyDescriptor(r,t),r.get?r.get.call(arguments.length<3?e:n):r.value},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{"./superPropBase.js":65}],53:[function(e,t,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],54:[function(e,t,n){var r=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":63}],55:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],56:[function(e,t,n){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],57:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],58:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],59:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],60:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],61:[function(e,t,n){var r=e("./typeof.js").default,i=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":46,"./typeof.js":67}],62:[function(e,w,t){var C=e("./typeof.js").default;function n(){"use strict";w.exports=function(){return o},w.exports.__esModule=!0,w.exports.default=w.exports;var o={},e=Object.prototype,l=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",i=t.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function a(e,t,n,r){var i,s,o,a,t=t&&t.prototype instanceof h?t:h,t=Object.create(t.prototype),r=new _(r||[]);return t._invoke=(i=e,s=n,o=r,a="suspendedStart",function(e,t){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===e)throw t;return S()}for(o.method=e,o.arg=t;;){var n=o.delegate;if(n){n=function e(t,n){var r=t.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method))return c;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}r=u(r,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,c;r=r.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,c):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,c)}(n,o);if(n){if(n===c)continue;return n}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===a)throw a="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a="executing";n=u(i,s,o);if("normal"===n.type){if(a=o.done?"completed":"suspendedYield",n.arg===c)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(a="completed",o.method="throw",o.arg=n.arg)}}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=a;var c={};function h(){}function p(){}function d(){}var t={},f=(s(t,r,function(){return this}),Object.getPrototypeOf),f=f&&f(f(k([]))),b=(f&&f!==e&&l.call(f,r)&&(t=f),d.prototype=h.prototype=Object.create(t));function m(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(o,a){var t;this._invoke=function(n,r){function e(){return new a(function(e,t){!function t(e,n,r,i){var s,e=u(o[e],o,n);if("throw"!==e.type)return(n=(s=e.arg).value)&&"object"==C(n)&&l.call(n,"__await")?a.resolve(n.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):a.resolve(n).then(function(e){s.value=e,r(s)},function(e){return t("throw",e,r,i)});i(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function v(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(v,this),this.reset(!0)}function k(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(l.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:S}}function S(){return{value:void 0,done:!0}}return s(b,"constructor",p.prototype=d),s(d,"constructor",p),p.displayName=s(d,i,"GeneratorFunction"),o.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},o.awrap=function(e){return{__await:e}},m(y.prototype),s(y.prototype,n,function(){return this}),o.AsyncIterator=y,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var s=new y(a(e,t,n,r),i);return o.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},m(b),s(b,i,"Generator"),s(b,r,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),o.keys=function(n){var e,r=[];for(e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},o.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return s.type="throw",s.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],s=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var o=l.call(i,"catchLoc"),a=l.call(i,"finallyLoc");if(o&&a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}var s=(i=i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc?null:i)?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),g(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,g(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},o}w.exports=n,w.exports.__esModule=!0,w.exports.default=w.exports},{"./typeof.js":67}],63:[function(e,n,t){function r(e,t){return n.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n.exports.__esModule=!0,n.exports.default=n.exports,r(e,t)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports},{}],64:[function(e,t,n){var r=e("./arrayWithHoles.js"),i=e("./iterableToArrayLimit.js"),s=e("./unsupportedIterableToArray.js"),o=e("./nonIterableRest.js");t.exports=function(e,t){return r(e)||i(e,t)||s(e,t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":44,"./iterableToArrayLimit.js":58,"./nonIterableRest.js":59,"./unsupportedIterableToArray.js":68}],65:[function(e,t,n){var r=e("./getPrototypeOf.js");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./getPrototypeOf.js":53}],66:[function(e,t,n){var r=e("./arrayWithoutHoles.js"),i=e("./iterableToArray.js"),s=e("./unsupportedIterableToArray.js"),o=e("./nonIterableSpread.js");t.exports=function(e){return r(e)||i(e)||s(e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":45,"./iterableToArray.js":57,"./nonIterableSpread.js":60,"./unsupportedIterableToArray.js":68}],67:[function(e,t,n){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{}],68:[function(e,t,n){var r=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":43}],69:[function(t,e,n){t=t("../helpers/regeneratorRuntime")();e.exports=t;try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},{"../helpers/regeneratorRuntime":62}]},{},[42]);