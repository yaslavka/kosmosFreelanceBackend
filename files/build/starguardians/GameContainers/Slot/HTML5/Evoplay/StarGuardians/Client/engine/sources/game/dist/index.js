!function e(t,n,s){function i(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[r]={exports:{}};t[r][0].call(u.exports,(function(e){return i(t[r][1][e]||e)}),u,u.exports,e,t,n,s)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)i(s[r]);return i}({1:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Freespins=void 0;let o=class extends game.sources.VisualComponent{build(){this.active=!1,this.controller.build(),this.restore=this.store.isRestore}get isFreespins(){const e=this.store.getNextAction(),t=this.store.spinData();return"initfreespin"==e||"freespin"==e||"freedrop"==e||"freerespin"==e||this.restore&&!!(null==t?void 0:t.freespins)}get isSpin(){return!this.store.isIntro&&(this.restore=!1,this.isFreespins)}get isIntroPopup(){return!!this.store.getInitfreespin()}get hasActiveRespins(){return this.controller.hasActiveRespins}showStartPopup(){return i(this,void 0,void 0,(function*(){yield this.controller.showStartPopup()}))}hideStartPopup(){return i(this,void 0,void 0,(function*(){yield this.controller.hideStartPopup()}))}hasFSWin(){return this.config.useWinPopup||!1}showEndPopup(){return i(this,void 0,void 0,(function*(){yield this.controller.showEndPopup()}))}hideEndPopup(){return i(this,void 0,void 0,(function*(){yield this.controller.hideEndPopup()}))}endRestore(){this.restore=!1}onSkip(){this.controller.onSkip()}updateCounter(){this.controller.updateCounter(...arguments)}};o=s([modifiable],o),n.Freespins=o},{}],2:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.FreespinsController=void 0;let o=class extends game.sources.Controller{build(){this.view.build()}showStartPopup(){return i(this,void 0,void 0,(function*(){yield this.view.showStartPopup()}))}hideStartPopup(){return i(this,void 0,void 0,(function*(){yield this.view.hideStartPopup()}))}showEndPopup(){return i(this,void 0,void 0,(function*(){yield this.view.showEndPopup()}))}hideEndPopup(){return i(this,void 0,void 0,(function*(){yield this.view.hideEndPopup()}))}get hasActiveRespins(){return this.store.hasActiveRespins}onAbort(){this.view.onAbort()}onSkip(){this.view.onSkip()}updateCounter(e=!1,t){let n=this.fsLeft;n&&!e&&(n=+n-1),t(n)}get fsLeft(){const e=this.store.getInitfreespin(),t=this.store.spinData();let n=0;return e&&e.freespins?n=e.freespins.left:t&&t.freespins&&(n=t.freespins.left),n}};o=s([modifiable],o),n.FreespinsController=o},{}],3:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FreespinsHandler=void 0;let i=class extends game.sources.Handler{get statesConfig(){return{Init:{enter:this.onInitEnter},Intro:{enter:this.onIntroEnter,begin:this.onIntroBegin,exit:this.onIntroExit},Idle:{enter:this.onIdleEnter},Replay:{enter:this.onIntroEnter,begin:this.onIntroBegin,exit:this.onIntroExit},Spin:{check:this.hasSpin,enter:this.onSpinEnter},Freespins:{check:this.hasFreespins,enter:this.onFreespinsEnter,exit:this.onFreespinsExit},FreespinsProgress:{check:this.hasFreespins,enter:this.onFreespinsProgressEnter,exit:this.onFreespinsProgressExit},FreespinsRestore:{check:this.hasFreespinsRestore,enter:this.onFreespinsRestoreEnter},FreespinsPopup:{check:this.hasShowPopup},ShowFreespinsPopup:{enter:this.onShowFreespinPopupEnter},HideFreespinsPopup:{enter:this.onHideFreespinPopupEnter},ShowFreespinsReels:{check:this.hasFreespinsReels,enter:this.onShowFreespinsReelsEnter},HideFreespinsReels:{check:this.hasHideFreespins},FreespinsWin:{check:this.hasFreespinsWin},ShowFreespinsWin:{enter:this.onShowFreespinsWinEnter},HideFreespinsWin:{enter:this.onHideFreespinsWinEnter}}}onInitialize(){game.fsm.actions.updateFreespinsCounter={}}onInitEnter({finish:e}){this.component.build(),e()}onIdleEnter({finish:e}){this.component.endRestore(),e()}onIntroEnter({finish:e}){return e(),{onAbort:()=>this.onAbort()}}onAbort(){this.isAbort||(this.isAbort=!0,this.component.controller.onAbort())}onIntroBegin({finish:e}){return e(),{onFinish:()=>this.isAbort=!1}}onIntroExit({finish:e}){this.isAbort=!1,e()}onFreespinsRestoreEnter({finish:e}){this.component.updateCounter(!0,this.counterAction),e()}hasFreespins(){return!this.isAbort&&(this.component.active=this.component.isFreespins,this.component.active)}hasFreespinsReels(){return!this.isAbort&&this.component.isFreespins}hasFreespinsRestore(){const e=this.component.store.getInitfreespin();return this.component.store.isRestore&&!e}hasShowPopup(){if(this.component.store.isIntro){return!!this.component.store.getInitfreespin()}return this.component.store.freespinsLeft}onFreespinsEnter({finish:e,actions:t}){this.counterAction=t.updateFreespinsCounter,e()}onShowFreespinPopupEnter({finish:e}){if(!this.isAbort)return this.component.showStartPopup().then(e),{onSkip:()=>this.component.onSkip()};e()}onHideFreespinPopupEnter({finish:e}){this.isAbort?e():this.component.hideStartPopup().then(e)}onShowFreespinsReelsEnter({finish:e}){this.isFreespinsReels=!0,this.component.updateCounter(!0,this.counterAction),e()}hasHideFreespins(){return!!this.isFreespinsReels&&(this.isFreespinsReels=!1,!0)}hasSpin(){return!this.isAbort&&(this.component.store.isReplay?(this.component.restore=!1,!1):this.component.isSpin)}hasFreespinsWin(){return this.hasFSWin=this.component.hasFSWin(),this.hasFSWin}onShowFreespinsWinEnter({finish:e,skip:t}){if(this.hasFSWin){if(!this.isAbort)return this.component.showEndPopup().then(e),{onSkip:()=>this.component.onSkip()};e()}else e()}onHideFreespinsWinEnter({finish:e}){this.hasFSWin?this.isAbort?e():this.component.hideEndPopup().then(e):e()}onFreespinsProgressEnter({finish:e}){this.component.updateCounter(!0,this.counterAction),e()}onFreespinsProgressExit({finish:e}){this.counterAction=!1,e()}onFreespinsExit({finish:e}){this.component.active=!1,e()}onSpinEnter({finish:e}){if(!this.component.active)return void e();this.component.hasActiveRespins||this.component.updateCounter(!1,this.counterAction),e()}};i=s([modifiable],i),n.FreespinsHandler=i},{}],4:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.FreespinsStore=void 0;let i=class extends game.sources.Store{addToGlobal(){this.addItem("isFreespins"),this.addItem("freespinsLeft")}get isFreespins(){return this.component.active}get freespinsLeft(){return this.component.controller.fsLeft}getSymbolPosition(e,t){return this.getItem("getSymbolPosition")(e,t)}getInitData(){return this.getItem("initData")}getNextAction(){return this.getItem("getNextAction")}getCurrentAction(){return this.spinData().type}spinData(){return this.getItem("spinData")}getInitfreespin(){return this.getItem("initfreespin")}hasWins(){const e=this.getItem("spinData");return e&&e.drop_chain.count}get isIntro(){return this.getItem("isIntro")}get isReplay(){return this.getItem("isReplay")}get isRestore(){return!!this.getInitData()}get hasActiveRespins(){return this.respins&&this.respins.count<this.respins.total}get respins(){return this.getItem("respins")}};i=s([modifiable],i),n.FreespinsStore=i},{}],5:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.FreespinsView=void 0;let o=class extends game.sources.View{build(){this.buildDesktop(),this.updateView()}buildDesktop(){this.popup=new c2d.display.Spine(this.assetsStore.getSkeleton(this.config.spinePopup)),this.popup.name="freespins_popup",this.layers.freespins.addChild(this.popup),this.popup.visible=!1,this.popup.label=this.addLabels(this.popup),this.config.spineEndPopup?(this.popupEnd=new c2d.display.Spine(this.assetsStore.getSkeleton(this.config.spineEndPopup)),this.popupEnd.name="freespins_popup_end",this.layers.freespins.addChild(this.popupEnd),this.popupEnd.visible=!1,this.popupEnd.label=this.addLabels(this.popupEnd)):this.popupEnd=this.popup}addLabels(e,t="text"){const n={},s="freespins_popup_end"===e.name&&this.config.fontEndPrefix?this.config.fontEndPrefix:this.config.fontPrefix;Object.entries(this.assetsStore.textures).forEach(([e,t])=>{if(e.includes(s)){const i=e.substr(s.length);n[i]=t}});const i=game.device.desktop?this.config.desktopPadding:this.config.mobilePadding,o=new c2d.display.BitmapText(10,{textures:n,padding:i});return o.scale.set(2),e.attach(t,o),o}onResizeScreen(){super.onResizeScreen(),this.updateView()}updateView(){game.engine.device.desktop}onAbort(){this.abortStartPopup(),this.abortEndPopup()}abortStartPopup(){this.popup.visible&&(this.isHideState||this.hideStartPopup(),this.finishTrack(this.popup),c2d.Timeout.completeInvoke("FreespinsStartPopupDelay"))}abortEndPopup(){this.popupEnd.visible&&(this.isHideState||this.hideEndPopup(),this.finishTrack(this.popupEnd),c2d.Timeout.completeInvoke("FreespinsEndPopupDelay"))}finishTrack(e){let t=e.state.getCurrent(0);for(;t;)t.trackTime=t.animationEnd,t=t.next}showStartPopup(){return i(this,void 0,void 0,(function*(){const e=this.store.getInitfreespin()||this.store.spinData();c2d.type.isNumber(e.freespins.left)&&(this.popup.label.text=e.freespins.left,this.popup.visible=!0,this.popup.play("in"),this.popup.play("idle",{force:!1,loop:!0}),this.store.isReplay||this.store.isIntro||!this.config.startPopupWaitSkip?this.config.startPopupDelay&&(yield c2d.Timeout.wait(this.config.startPopupDelay,"FreespinsStartPopupDelay")):yield this.waitSkipPopup())}))}hideStartPopup(){return i(this,void 0,void 0,(function*(){this.isHideState=!0,yield this.popup.play("out"),this.popup.visible=!1,this.isHideState=!1}))}showEndPopup(){return i(this,void 0,void 0,(function*(){const e=+this.store.spinData().freespins.wins.total;this.popupEnd.label.text=e||0,this.popupEnd.visible=!0,this.popupEnd.play("in"),this.popupEnd.play("idle",{force:!1,loop:!0}),this.store.isReplay||this.store.isIntro||!this.config.endPopupWaitSkip?this.config.endPopupDelay&&(yield c2d.Timeout.wait(this.config.endPopupDelay,"FreespinsEndPopupDelay")):yield this.waitSkipPopup()}))}hideEndPopup(){return i(this,void 0,void 0,(function*(){this.isHideState=!0,yield this.popupEnd.play("out"),this.popupEnd.visible=!1,this.isHideState=!1}))}waitSkipPopup(){return new Promise(e=>{this.waitHandler=e})}onSkip(){this.waitHandler&&this.waitHandler(),this.waitHandler=null}};o=s([modifiable],o),n.FreespinsView=o},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./Freespins"),i=e("./FreespinsHandler"),o=e("./FreespinsStore"),r=e("./FreespinsController"),a=e("./FreespinsView"),l={Component:s.Freespins,Handler:i.FreespinsHandler,Store:o.FreespinsStore,Controller:r.FreespinsController,View:a.FreespinsView};game.componentsManager.registerComponent("Freespins",l)},{"./Freespins":1,"./FreespinsController":2,"./FreespinsHandler":3,"./FreespinsStore":4,"./FreespinsView":5}],7:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameScreen=void 0;let i=class extends game.sources.VisualComponent{set visible(e){this.view.visible=e}_getForceSpin(){return!1}get forceSpin(){return this._getForceSpin()}get respins(){return this.store.respins}get activeRespins(){return this.store.activeRespins}build(){this.controller.build()}onInitState(){this.controller.onIdleFinish()}onReplayExit(){this.visible=!0}onIdleEnter(){this.controller.onIdleEnter()}onIdleBegin(e){this.controller.onIdleBegin()}onIdleFinish(){this.controller.onIdleFinish()}onSpin(){this.controller.onSpin()}onSpinExit(){this.controller.onSpinExit()}callSpinAction(){this.controller.callSpinAction()}toHome(){this.controller.toHome()}set balance(e){this.store.setBalance(e),this.controller.updateBalance(e)}get balance(){return this.store.getbalance()}};i=s([modifiable],i),n.GameScreen=i},{}],8:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameScreenController=void 0;let i=class extends game.sources.Controller{onInitialize(){super.onInitialize(),game.remoteApi.depositPopupHandler=e=>this.store.isShowDepositPopup=e}onDestroy(){game.remoteApi.depositPopupHandler=null}create(){super.create(),this.spinHandler=null}get isRoundCheck(){return!1}toHome(){console.info("Home"),game.goToUrl(this.store.backURL,"lobby")}build(){this.view.build(),this.addListeners()}onIdleEnter(){this.view.onIdleEnter()}onIdleBegin(){this.isIdle=!0,this.view.onIdleBegin()}onIdleFinish(){this.isIdle=!1,this.view.onIdleFinish()}onSpin(){this.view.interactive&&this.view.onSpin()}onSpinButton(){this.callSpinAction()}onChangeBet(){}onSpinExit(){}onCollectEnter(){}onRoundEnter(){}onCollectExit(){}getActionHandlers(){return{panelDarkness:()=>this.view.closeAllPanel()}}addListeners(){const e=this.getActionHandlers();this.view.setHandlers(e)}callSpinAction(){this.spinHandler&&(!this.isIdle||this.store.enoughMoneyToSpin?(this.view.onSpinAction(),this.spinHandler&&this.spinHandler(),this.spinHandler=null):this.showNotMoney())}showNotMoney(){if(this.store.isShowDepositPopup){const e=this.store.cashURL?()=>this.makeDeposit():null;this.view.showNotMoneyPopup(e)}}makeDeposit(){console.info("Make Deposit"),this.store.cashURL&&game.goToUrl(this.store.cashURL,"bank")}};i=s([modifiable],i),n.GameScreenController=i},{}],9:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameScreenHandler=void 0;let i=class extends game.sources.Handler{get statesConfig(){return{Start:{enter:this.onStart},Init:{enter:this.onInitEnter,exit:this.onInitExit},Intro:{enter:this.onReplayEnter,exit:this.onReplayExit},Replay:{enter:this.onReplayEnter,exit:this.onReplayExit},Gifts:{begin:this.onIdleBegin},Idle:{enter:this.onIdleEnter,begin:this.onIdleBegin},Spin:{check:this.onSpinCheck,enter:this.onSpinEnter,exit:this.onSpinExit},ShowAllLines:{enter:this.onShowAllLinesEnter},Celebration:{enter:this.onCelebration},SpinSymbols:{enter:this.onSkipWait},DropSymbols:{enter:this.onSkipWait},ShowResult:{enter:this.onSkipWait},ShowSingleLines:{enter:this.onShowSingleLinesEnter},ShowFreespinsPopup:{enter:this.onFreespinsPopupEnter},ShowFreespinsWin:{enter:this.onFreespinsWinEnter}}}get globalActionsConfig(){return this.getGlobalActionsConfig()}getGlobalActionsConfig(){return{}}onStart({finish:e}){this.isSpin=!1,e()}onInitEnter({finish:e}){this.component.build(),e()}onInitExit({finish:e}){this.component.onInitState(),e()}onReplayEnter({finish:e}){this.component.visible=!1,e()}onReplayExit({finish:e}){return e(),{onFinish:()=>this.component.onReplayExit()}}onIdleEnter({finish:e}){this.component.onIdleEnter(),e()}onIdleBegin({finish:e}){this.isSpin=!1,this.component.onIdleBegin();const t=()=>{this.onSpinAction(),e()},n=this.component.activeRespins;this.component.forceSpin||n?t():this._updateSpinHandler(t);return{onFinish:()=>this.onIdleFinish(),actions:{playReplay:e,applyBonus:t}}}onSpinAction(){this.isSpin=!0}onIdleFinish(){this.component.onIdleFinish()}onSpinCheck(){return this.isSpin}onSpinEnter({finish:e}){this.component.onSpin(),e()}onSpinExit({finish:e}){this.component.onSpinExit(),e()}onShowAllLinesEnter({finish:e,skip:t}){this._updateSpinHandler(t),e()}onShowSingleLinesEnter({finish:e,skip:t}){this._updateSpinHandler(t),e()}onCelebration({finish:e,skip:t}){this._updateSpinHandler(t),e()}onSkipWait({finish:e,skip:t}){this._updateSpinHandler(t),e()}onFreespinsPopupEnter({finish:e,skip:t}){this._updateSpinHandler(t),e()}onFreespinsWinEnter({finish:e,skip:t}){this.component.store.isReplay?e():this._updateSpinHandler(()=>{t(),e()})}_updateSpinHandler(e){this.component.controller.spinHandler=e}};i=s([modifiable],i),n.GameScreenHandler=i},{}],10:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameScreenStore=void 0;let i=class extends game.sources.Store{onCreate(){this._isShowDepositPopup=!0}get cashURL(){return this.getItem("cashURL")}get showInfo(){return this.getItem("showInfo")}get spaceSpin(){return this.getItem("spaceSpin")}getBalance(){return this.getItem("balance")}setBalance(e){this.getItem("setBalance")(e)}getTotalWin(){return this.getItem("totalWin")}getFsWin(){return this.getItem("fsWin")}getGifts(){return this.getItem("giftSpins")||{}}get nextAction(){return this.getItem("getNextAction")}getNextAction(){return this.getItem("getNextAction")}get availableActions(){return this.getItem("getAvailableActions")}getInitData(){return this.getItem("initData")}get isRestore(){return!!this.getInitData()}getCurrentAction(){return this.getItem("getCurrentAction")}getInitSpin(){return this.getItem("initSpin")}getInitFreespin(){return this.getItem("initfreespin")}getBet(){return this.getItem("bet")}get enoughMoneyToSpin(){const e=this.getGifts();return!(!e||!e.left)||this.getBet()<=this.getBalance()}hasCelebration(){return this.getItem("hasCelebration")}get showPrompts(){return this.getItem("showPrompts")}getWinsData(){return this.getItem("wins")}getSpinData(){return this.getItem("spinData")}get isIntro(){return this.getItem("isIntro")}get isReplay(){return this.getItem("isReplay")}get isFreespins(){return this.getItem("isFreespins")}get respins(){return this.getItem("respins")}get activeRespins(){return this.respins&&this.respins.count<this.respins.total}get isShowDepositPopup(){return this._isShowDepositPopup}set isShowDepositPopup(e){this._isShowDepositPopup=e}get bonusBuy(){return this.getItem("bonusBuy")}};i=s([modifiable],i),n.GameScreenStore=i},{}],11:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.GameScreenView=void 0;let i=class extends game.sources.FactoryView{build(){this.isIdle=!1,this._interactive=!0,this.buildTree(),this.initButtonsAnimations(),this.onSkipState()}buildTree(){const e=this.layers.game_screen;super.buildTree("gamescreen_tree",e)}_getInteractive(){return this._interactive}get interactive(){return this._getInteractive()}getAnimationButtons(){return[this.tree.nodeMap.betButtonClose]}initButtonsAnimations(){this.getAnimationButtons().forEach(e=>{e&&(e=c2d.type.isArray(e)?e:[e]).forEach(e=>{const t=()=>{e.tween.tl.clear(),e.tween.scaleTo(.9,.2)},n=()=>{e.tween.tl.clear(),e.tween.scaleTo(1,.2)};e&&e.addButtonListener?(e&&e.addButtonListener("pointerDown",t),e&&e.addButtonListener("pointerUp",n),e&&e.addButtonListener("pointerUpOutside",n)):e.setHandlers(()=>{e.tween.tl.clear(),e.tween.scaleTo(.9,.1),e.tween.scaleTo(1,.1)})})})}onIdleEnter(){}onIdleBegin(){this.isIdle=!0}onIdleFinish(){this.isIdle=!1}onSpin(){this.onSkipState()}onRoundEnter(){}onCollectEnter(){}onSkipState(){}set visible(e){this.layer.visible=e}hideDarkness(){const e=this.tree.nodeMap.panelDarkness;e&&(e.tween.tl.clear(),e.tween.fadeTo(0,.2,{onComplete:()=>{e.visible=!1}}))}showDarkness(){const e=this.tree.nodeMap.panelDarkness;e&&(e.visible=!0,e.tween.tl.clear(),e.tween.fadeTo(1,.2))}closeAllPanel(){}showNotMoneyPopup(e){this.showPopup({text:"${texts.core.not_money_msg}",buttonText:"${texts.core.make_deposit}",confirm:e,isConfirm:e})}showPopup({text:e="",confirm:t}){console.warn(e),t&&t()}onSpinAction(){}};i=s([modifiable],i),n.GameScreenView=i},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./GameScreen"),i=e("./GameScreenHandler"),o=e("./GameScreenStore"),r=e("./GameScreenController"),a=e("./GameScreenView"),l={Component:s.GameScreen,Handler:i.GameScreenHandler,Store:o.GameScreenStore,Controller:r.GameScreenController,View:a.GameScreenView};game.componentsManager.registerComponent("GameScreen",l),e("./modifications/spin/index"),e("./modifications/balance/index"),e("./modifications/gifts/index"),e("./modifications/bet/index"),e("./modifications/win/index"),e("./modifications/autospins/index"),e("./modifications/popup/index"),e("./modifications/swipemode/index"),e("./modifications/home/index"),e("./modifications/menu/index"),e("./modifications/rules/index"),e("./modifications/freespins/index"),e("./modifications/spindelay/index")},{"./GameScreen":7,"./GameScreenController":8,"./GameScreenHandler":9,"./GameScreenStore":10,"./GameScreenView":11,"./modifications/autospins/index":18,"./modifications/balance/index":23,"./modifications/bet/index":29,"./modifications/freespins/index":32,"./modifications/gifts/index":38,"./modifications/home/index":42,"./modifications/menu/index":47,"./modifications/popup/index":53,"./modifications/rules/index":58,"./modifications/spin/index":63,"./modifications/spindelay/index":67,"./modifications/swipemode/index":72,"./modifications/win/index":77}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{_getForceSpin(){return super._getForceSpin()||this.autoSpinsLeft}get autoSpinsLeft(){return this.controller.checkAutospinsOptions(),this.controller.autoSpinsLeft}}s.modify(i)},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{create(){return this._autoSpinsLeft=0,super.create()}onSpin(){const e=super.onSpin();return this.store.isFreespins?e:this.autoSpinsLeft?(this.store.activeRespins||(this.autoSpinsLeft--,this.view.disableAutospinsButton()),e):e}onSpinExit(){return this.checkAutospinsOptions(),super.onSpinExit()}getActionHandlers(){const e=super.getActionHandlers();return e.autospinsButtonShow=()=>this.showAutoSpins(),e.autospinsButtonClose=()=>this.view.hideAutoSpinsPanel(),e.autospinCountButton=e=>this.view.changeCountAutoSpins(e),e.autospinsButtonOk=()=>this.playAutoSpins(),e}showAutoSpins(){if(this.autoSpinsLeft)this.autoSpinsLeft=0,this.view.disableAutospinsButton();else{if(this.isIdle&&!this.store.enoughMoneyToSpin)return void this.showNotMoney();this.view.showAutoSpinsPanel()}}playAutoSpins(){this.autoSpinsLeft=this.view.autoSpinsCount,this.autoSpinsLeft&&(this.view.hideAutoSpinsPanel(),this.onSpinButton())}showNotMoney(){return this.autoSpinsLeft=0,super.showNotMoney()}checkAutospinsOptions(){if(!this._autoSpinsLeft)return void this.view.disableAutospinsButton();const{nextAction:e}=this.store;if("freespin"===e||"initfreespin"===e)return this.autoSpinsLeft=0,void this.view.disableAutospinsButton();!this.store.enoughMoneyToSpin&&this.showNotMoney();const t=this.store.getBalance();this.view.autoSpinSingleWin&&this.view.autoSpinSingleWin<=this.lastWin&&(this.autoSpinsLeft=0),this.view.autoSpinIncreased&&this.view.autoSpinIncreased<t&&(this.autoSpinsLeft=0),this.view.autoSpinReduced&&this.view.autoSpinReduced>=t&&(this.autoSpinsLeft=0),this.view.disableAutospinsButton()}get autoSpinsLeft(){return this._autoSpinsLeft}set autoSpinsLeft(e){e<0||(this._autoSpinsLeft=e,this.view.setAutoSpinsLeft(e))}onChangeBet(){return this.view.savedAutoSpinOpiton=!1,super.onChangeBet()}}s.modify(i)},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Autospins(){return{Freespins:{enter:this.onFreespinsEnter_Autospins}}}onInitialize(){return this.registerStates(this.stateConfig_Autospins),super.onInitialize()}onFreespinsEnter_Autospins({finish:e}){this.component.controller.autoSpinsLeft=0,this.component.controller.checkAutospinsOptions(),e()}}s.modify(i)},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{addToGlobal(){return this.addItem("isAutospins"),super.addToGlobal()}get isAutospins(){return!!this.component.controller.autoSpinsLeft}get enableAutospins(){return this.getItem("enableAutospins")}}s.modify(i)},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{_getInteractive(){return super._getInteractive()&&!this.isShowAutospinsPanel}build(){const e=super.build();return this.initAutoSpin(),e}initAutoSpin(){this.isShowAutospinsPanel=!1,this.autospinsActive=!1,this.hideAutoSpinsPanel(),this.setAutoSpinsLeft(0);const e=this.tree.nodeMap.autospinCountButton.first;this.changeCountAutoSpins(e);const t=this.tree.nodeMap.AutoSpinSliderSingleWin,n=this.tree.nodeMap.AutoSpinSliderIncreased,s=this.tree.nodeMap.AutoSpinSliderReduced,i=(e,t)=>{if(t==e.minValue){const t=this.tree.variables;e.label.text=c2d.display.Factory.realizeProperty("${texts.core.off}",t)}};t.setHandlers(i),n.setHandlers(i),s.setHandlers(i),this.hideAutoSpinButton()}hideAutoSpinButton(){const e=this.tree.nodeMap.autospinsButtonShow;!this.store.enableAutospins&&e&&(e.visible=!1)}getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.autospinsButtonShow),e.push(this.tree.nodeMap.autospinsButtonOk),e.push(this.tree.nodeMap.autospinCountButton),e}onIdleBegin(){const e=super.onIdleBegin();return this.enableAutospinsButton(),e}enableAutospinsButton(){this.tree.nodeMap.autospinsButtonShow.enable(!0)}onIdleFinish(){const e=super.onIdleFinish();return this.disableAutospinsButton(),e}disableAutospinsButton(){this._autoSpinsLeft||this._autoSpinsLeft||this.isIdle||this.tree.nodeMap.autospinsButtonShow.enable(!1)}onSpin(){const e=super.onSpin();return this.savedAutoSpinOpiton=!1,e}closeAllPanel(){const e=super.closeAllPanel();return this.hideAutoSpinsPanel(),e}hideAutoSpinsPanel(){if(!this.autoSpinsPanel.visible)return;this.isShowAutospinsPanel=!1,this.hideDarkness();const e=c2d.display.Factory.calcProperty("$[100sh]")-this.autoSpinsPanel.children[0].y;this.autoSpinsPanel.tween.tl.clear(),this.autoSpinsPanel.tween.moveTo(null,e,.2,{onComplete:()=>{this.autoSpinsPanel.visible=!1}})}showAutoSpinsPanel(){if(this.closeAllPanel(),this.isShowAutospinsPanel=!0,this.showDarkness(),this.autoSpinsPanel.y=c2d.display.Factory.calcProperty("$[100sh]")-this.autoSpinsPanel.children[0].y,this.autoSpinsPanel.visible=!0,this.autoSpinsPanel.tween.tl.clear(),this.autoSpinsPanel.tween.moveTo(null,0,.2),!this.savedAutoSpinOpiton){this.savedAutoSpinOpiton=!0;const e=this.tree.nodeMap.AutoSpinSliderSingleWin,t=this.tree.nodeMap.AutoSpinSliderIncreased,n=this.tree.nodeMap.AutoSpinSliderReduced,s=this.store.getBalance(),i=this.store.getBet();e.maxValue=100*i,e.value=0,e.redraw(e.value),e.handler(e,e.value),t.minValue=Math.ceil(s),t.maxValue=s+1e3*i,t.value=t.minValue,t.redraw(t.value),t.handler(t,t.value),n.maxValue=Math.max(0,s-i),n.value=0,n.redraw(n.value),n.handler(n,n.value)}this.autoSpinsPanel.visible=!0}get autoSpinSingleWin(){const e=this.tree.nodeMap.AutoSpinSliderSingleWin;return e.value!=e.minValue&&e.value}get autoSpinIncreased(){const e=this.tree.nodeMap.AutoSpinSliderIncreased;return e.value!=e.minValue&&e.value}get autoSpinReduced(){const e=this.tree.nodeMap.AutoSpinSliderReduced;return e.value!=e.minValue&&e.value}changeCountAutoSpins(e){this.currentAutoSpinCountNode&&this.currentAutoSpinCountNode.enable(!0),e.enable(!1),this.currentAutoSpinCount=e.variables.count,this.currentAutoSpinCountNode=e}get autoSpinsPanel(){return this.tree.nodeMap.autospinsPanel}get autoSpinsCount(){return this.currentAutoSpinCount}setAutoSpinsLeft(e){this._autoSpinsLeft=e,this.tree.nodeMap.autospinLeft.visible=!!e,this.tree.nodeMap.autospinLeftValue.text=e,this.tree.nodeMap.autospinsButtonShow.toggle(e?1:0),e>0&&!this.autospinsActive&&(this.autospinsActive=!0,this.tree.nodeMap.autospinsArrow.rotation=0,this.tree.nodeMap.autospinsArrow.tween.rotateTo(2*Math.PI,1.5,{repeat:-1,ease:c2d.easing.Linear.easeNone})),0==e&&this.autospinsActive&&(this.autospinsActive=!1,this.tree.nodeMap.autospinsArrow.tween.tl.clear(),this.tree.nodeMap.autospinsArrow.tween.rotateTo(2*Math.PI,.3))}}s.modify(i)},{}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenAutospins"),e("./GameScreenAutospinsHandler"),e("./GameScreenAutospinsStore"),e("./GameScreenAutospinsController"),e("./GameScreenAutospinsView")},{"./GameScreenAutospins":13,"./GameScreenAutospinsController":14,"./GameScreenAutospinsHandler":15,"./GameScreenAutospinsStore":16,"./GameScreenAutospinsView":17}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{onInitState(){return this.controller.initializeBalance(),super.onInitState()}onReplayExit(){return this.controller.initializeBalance(),super.onReplayExit()}updateBalance(){const e=this.store.getBalance();this.controller.updateBalance(e)}updateBalanceOnRound(){this.controller.updateBalanceOnSpin()}getViewBalance(){return this.view.tree.nodeMap.balanceValue.text}}s.modify(i)},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{onInitialize(){super.onInitialize(),game.remoteApi.balanceHandler=e=>this.updateBalance(e)}onDestroy(){super.onDestroy(),game.remoteApi.balanceHandler=null}initializeBalance(){var e;let t=this.store.getBalance();if("freespin"==this.store.getCurrentAction()){const n=null===(e=this.store.getWinsData())||void 0===e?void 0:e.total;c2d.type.isNumber(n)&&(t-=n)}this.updateBalance(t)}onIdleEnter(){return this.updateBalance(),super.onIdleEnter()}onSpin(){const e=super.onSpin();return this.updateBalanceOnSpin(),e}updateBalanceOnSpin(){const e=this.store.getBalance();let t=e;if(this.store.bonusBuy){const{price:e}=this.store.bonusBuy;t-=e}else if(!this.store.isGifts&&!this.store.isFreespins&&!this.store.activeRespins){t-=this.store.getBet()}t!=e&&(this.updateBalance(t),this.store.setBalance(t))}updateBalance(e){if(!e&&!c2d.type.isNumber(e))return;!c2d.type.isString(e)&&e.before&&(e=e.before);const t=this.store.getItem("currency");e=c2d.utils.formatters.StringFormatter.toCurrency(e.toFixed(2),{currency:t}),this.view.setBalance(e)}}s.modify(i)},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Balance(){return{Gifts:{enter:this.onGiftsEnter_Balance,begin:this.onIdleBegin_Balance},ShowAllLines:{enter:this.onShowAllLinesEnter_Balance},Celebration:{exit:this.onCelebrationExit_Balance},BonusGameFinish:{exit:this.onBonusGameFinishExit_Balance},RoundStart:{enter:this.onRoundStartEnter_Balance},Round:{exit:this.onRoundExit_Balance},Idle:{begin:this.onIdleBegin_Balance}}}onInitialize(){return game.fsm.actions.updateBalance={},this.registerStates(this.stateConfig_Balance),super.onInitialize()}onGiftsEnter_Balance({finish:e}){this.component.updateBalance(),e()}onShowAllLinesEnter_Balance({finish:e}){this.component.store.hasCelebration()||this.component.updateBalance(),e()}onCelebrationExit_Balance({finish:e}){this.component.updateBalance(),e()}onBonusGameFinishExit_Balance({finish:e}){this.component.updateBalance(),e()}onRoundStartEnter_Balance({finish:e}){this.component.updateBalanceOnRound(),e()}onRoundExit_Balance({finish:e}){this.component.updateBalance(),e()}onIdleBegin_Balance({finish:e}){e();const t=()=>{this.component.updateBalance()};return t(),{actions:{updateBalance:t}}}}s.modify(i)},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{setBalance(e){this.tree.nodeMap.balanceValue.text=e}}s.modify(i)},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenBalanceHandler"),e("./GameScreenBalance"),e("./GameScreenBalanceController"),e("./GameScreenBalanceView")},{"./GameScreenBalance":19,"./GameScreenBalanceController":20,"./GameScreenBalanceHandler":21,"./GameScreenBalanceView":22}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{onInitState(){const e=super.onInitState();return this.controller.initializeBet(),this.updateBet(),this.disableBet(),e}onReplayExit(){return this.updateBet(),this.disableBet(),super.onReplayExit()}onIdleBegin(e){const t=super.onIdleBegin(e);return e||this.updateBet(),t}onIdleFinish(){const e=super.onIdleFinish();return this.disableBet(),e}resetBet(){this.controller.resetBet()}updateBet(){this.controller.updateBet()}disableBet(){this.controller.disableBet()}getViewBet(){return this.view.tree.nodeMap.betValue.text}clickBetSubButton(){var e;null===(e=this.view.tree.nodeMap.betSubButton)||void 0===e||e.clickAction()}clickBetAddButton(){var e;null===(e=this.view.tree.nodeMap.betAddButton)||void 0===e||e.clickAction()}}s.modify(i)},{}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{create(){return this.betIndex=null,this.betRanges=null,this.changeBetHandler=null,this.showedChangeBetPopup=!1,super.create()}initializeBet(){const e=this.store.getRanges();if(!e)return;const t=e.bet;this.betRanges=t,this.view.initializeBet({ranges:t}),this.updateBet()}onIdleEnter(){return this.updateBet(),super.onIdleEnter()}onSpin(){return this.view.interactive&&(this.showedChangeBetPopup=!1),super.onSpin()}getActionHandlers(){const e=super.getActionHandlers();return e.betAddButton=()=>this.onBetAddButton(),e.betSubButton=()=>this.onBetSubButton(),e.betButtonShow=()=>this.showBetPanel(),e.betPanelSlider=(e,t)=>this.slideBet(e,t),e.betButtonClose=()=>this.hideBetPanel(),e.betButtonConfirm=()=>this.betConfirm(),e}addListeners(){return this.addBetListeners(),super.addListeners()}addBetListeners(){game.device.desktop&&document.addEventListener("keyup",e=>{this.view.interactive&&(this.store.showInfo||this.store.arrowBet&&("ArrowLeft"===e.code?this.onBetSubButton():"ArrowRight"===e.code?this.onBetAddButton():"ArrowDown"===e.code?this.onBetSubButton():"ArrowUp"===e.code&&this.onBetAddButton()))})}showChangeBetPopup(){this.assetsStore.getConfig("config").changeBetPopup&&!this.showedChangeBetPopup&&(this.showedChangeBetPopup=!0,this.view.showChangeBetPopup()),this.changeBetHandler&&this.changeBetHandler(this.store.getBet())}showBetPanel(){this.view.interactive&&(this.view.betPanel.visible||(this.updateBet(),this.view.showBetPanel()))}hideBetPanel(){this.slideBetIndex=this.betIndex,this.view.hideBetPanel()}resetBet(){const e=this.store.getBet();this.betRanges.includes(e)||this.updateBet(this.betRanges.first)}updateBet(e,t){if(!this.betRanges)return!1;e||(e=this.store.getBet());const n=this.betRanges.indexOf(e);let s=0==n,i=n==this.betRanges.length-1;const o=this.store.getGifts();o&&o.left&&(e=o.bet,s=i=!0);const r={min:s,max:i,value:e,index:n,enoughMoney:e>this.store.getBalance()};if(this.view.updateBet(r,t),t)this.slideBetIndex=n;else{const t=this.store.getBet();if(this.betIndex=n,this.store.setBet(e),c2d.type.isNumber(t)&&t!=e)return this.onChangeBet(),!0}return!1}slideBet(e,t){const n=this.betRanges[t];this.updateBet(n,!0)}betConfirm(){this.view.hideBetPanel();const e=this.betRanges[this.slideBetIndex];this.updateBet(e)&&this.showChangeBetPopup()}disableBet(){this.view.hideBetPanel(),this.view.confirmBet({min:!0,max:!0})}onBetSubButton(){if(!this.view.interactive)return;if(!this.isIdle)return;if(0==this.betIndex)return;this.betIndex--;const e=this.betRanges[this.betIndex];this.updateBet(e),this.showChangeBetPopup()}onBetAddButton(){if(!this.view.interactive)return;if(!this.isIdle)return;if(this.betIndex==this.betRanges.length-1)return;this.betIndex++;const e=this.betRanges[this.betIndex];this.updateBet(e),this.showChangeBetPopup()}}s.modify(i)},{}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Bet(){return{Start:{enter:this.onStart_Bet},Gifts:{enter:this.onGiftsEnter_Bet},Idle:{enter:this.onIdleEnter_Bet}}}onInitialize(){return game.fsm.actions.changeBet={},this.registerStates(this.stateConfig_Bet),super.onInitialize()}onStart_Bet({finish:e,actions:t}){this.component.controller.changeBetHandler=t.changeBet,e()}onGiftsEnter_Bet({finish:e}){this.component.updateBet(),e()}onIdleEnter_Bet({finish:e}){this.component.resetBet(),e()}}s.modify(i)},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{get arrowBet(){return this.getItem("arrowBet")}setBet(e){this.getItem("setBet")(e)}getRanges(){return this.getItem("ranges")}get showMaxWinRtpMessage(){return this.getItem("showMaxWinRtpMessage")}get maxWinRTP(){return this.getItem("maxWinRTP")}get showBetButtons(){return this.getItem("showBetButtons")}get rtp(){return this.getItem("rtp")}}s.modify(i)},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{_getInteractive(){return super._getInteractive()&&!this.isShowBetPanel}get betPanel(){return this.tree.nodeMap.betPanel}initializeBet({ranges:e}){this.tree.nodeMap.betPanelSlider.maxValue=e.length-1,this.tree.nodeMap.betPanelMin.text=e.first,this.tree.nodeMap.betPanelMax.text=e.last,this.tree.nodeMap.betPanelSlider.pin.setStates("big"),this.hideBetPanel(),this.showBetInfoText(),this.hideBetBarButton()}getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.betSubButton),e.push(this.tree.nodeMap.betAddButton),e.push(this.tree.nodeMap.betButtonShow),e.push(this.tree.nodeMap.betButtonConfirm),e}showBetInfoText(){const e=this.tree.nodeMap.betPanelInfoText,t=this.store.showMaxWinRtpMessage;e&&t&&(this.updateMaxWinRTP(),e.visible=!0)}updateMaxWinRTP(){const e=this.tree.nodeMap.betPanelInfoText,t=this.getTexts()["core.max_win"],n=this.store.maxWinRTP;if(!e||!t||!n)return;let s=.01*Math.floor(100*this.rawBet*n);const i=this.store.getItem("currency");s=c2d.utils.formatters.StringFormatter.toCurrency(s.toFixed(2),{currency:i});const o={rtp:this.store.rtp,max:this.tree.nodeMap.betPanelValue.text,min:s};e.text=c2d.display.Factory.realizeProperty(t,o)}hideBetBarButton(){this.store.showBetButtons||(this.tree.nodeMap.betSubButton&&(this.tree.nodeMap.betSubButton.visible=!1),this.tree.nodeMap.betAddButton&&(this.tree.nodeMap.betAddButton.visible=!1))}onIdleBegin(){const e=super.onIdleBegin();return this.enableBetButton(),e}onIdleFinish(){const e=super.onIdleFinish();return this.disableBetButton(),e}closeAllPanel(){const e=super.closeAllPanel();return this.hideBetPanel(),e}updateBet(e,t){const{value:n,index:s,enoughMoney:i}=e;this.rawBet=n;const o=this.store.getItem("currency"),r=c2d.utils.formatters.StringFormatter.toCurrency(n.toFixed(2),{currency:o});this.tree.nodeMap.betPanelValue.text=r,this.updateMaxWinRTP(),t||(this.tree.nodeMap.betPanelSlider.redraw(s),this.tree.nodeMap.betPanelSlider.value=s,this.confirmBet(Object.assign(Object.assign({},e),{value:r})));const a=[this.tree.nodeMap.betPanelSlider.sliderBackFull];i?c2d.Tween.to(a,.2,{pixi:{colorize:16711680,colorizeAmount:1,brightness:3}}):c2d.Tween.to(a,.2,{pixi:{colorMatrixFilter:null}})}confirmBet({value:e,index:t,min:n,max:s,enoughMoney:i}){e&&(this.tree.nodeMap.betValue.text=e),this.tree.nodeMap.betSubButton&&this.tree.nodeMap.betSubButton.enable(this.isBetInteractive&&!n),this.tree.nodeMap.betAddButton&&this.tree.nodeMap.betAddButton.enable(this.isBetInteractive&&!s)}hideBetPanel(){if(!this.betPanel.visible)return;this.isShowBetPanel=!1,this.hideDarkness();const e=c2d.display.Factory.calcProperty("$[bottom]")-this.betPanel.children[0].y;this.betPanel.tween.tl.clear(),this.betPanel.tween.moveTo(null,e,.2,{onComplete:()=>{this.betPanel.visible=!1}})}showBetPanel(){this.closeAllPanel(),this.isShowBetPanel=!0,this.showDarkness(),this.betPanel.y=c2d.display.Factory.calcProperty("$[bottom]")-this.betPanel.children[0].y,this.betPanel.visible=!0,this.betPanel.tween.tl.clear(),this.betPanel.tween.moveTo(null,0,.2)}enableBetButton(){const e=this.store.getGifts();if(e&&+e.left)return;let t=this.tree.nodeMap.betButtonShow;t=c2d.type.isArray(t)?t:[t],t.forEach(e=>{e.enable?e.enable(!0):e.interactive=!0}),this.isBetInteractive=!0}disableBetButton(){let e=this.tree.nodeMap.betButtonShow;e=c2d.type.isArray(e)?e:[e],e.forEach(e=>{e.enable?e.enable(!1):e.interactive=!1}),this.isBetInteractive=!1}showChangeBetPopup(){this.showPopup({text:"${texts.core.change_bet_msg}",isClose:!1})}}s.modify(i)},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenBetHandler"),e("./GameScreenBet"),e("./GameScreenBetStore"),e("./GameScreenBetController"),e("./GameScreenBetView")},{"./GameScreenBet":24,"./GameScreenBetController":25,"./GameScreenBetHandler":26,"./GameScreenBetStore":27,"./GameScreenBetView":28}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Freespins(){return{Freespins:{enter:this.onFreespinsEnter_Freespins},FreespinsProgress:{exit:this.onFreespinsProgressExit_Freespins}}}onInitialize(){return this.registerStates(this.stateConfig_Freespins),super.onInitialize()}onFreespinsEnter_Freespins({finish:e}){e();return{actions:{updateFreespinsCounter:e=>this.component.view.updateFreespinsCounter(e)}}}onFreespinsProgressExit_Freespins({finish:e}){this.component.view.hideFreespinsCounter(),e()}}s.modify(i)},{}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{hideFreespinsCounter(){this.tree.nodeMap.freespinsPanel.visible=!1}updateFreespinsCounter(e=0){if(this.store.isReplay)return;if(this.store.isIntro)return;e=+e;const t=+this.tree.nodeMap.freespinsValue.text;e>0&&t!=e&&this.shakeFreespinsIcon(),this.tree.nodeMap.freespinsValue.text=e,this.tree.nodeMap.freespinsPanel.visible||(this.tree.nodeMap.freespinsPanel.visible=!0)}shakeFreespinsIcon(){const e=this.tree.nodeMap.freespinsIcon;e&&(new c2d.Timeline).to(e,.2,{rotation:Math.PI/20}).to(e,.2,{rotation:-Math.PI/20}).to(e,.2,{rotation:0})}}s.modify(i)},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenFreespinsHandler"),e("./GameScreenFreespinsView")},{"./GameScreenFreespinsHandler":30,"./GameScreenFreespinsView":31}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{get isGifts(){return!!this.controller.giftLeft}updateGifts(e){this.controller.updateGifts(e)}useGifts(){this.controller.useGifts()}}s.modify(i)},{}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{get giftLeft(){const e=this.store.getGifts();return e&&e.left}updateGifts(e){c2d.type.isNumber(e)||(e=this.giftLeft),this.view.updateGifts(e)}useGifts(){const e=this.giftLeft&&this.giftLeft-1;this.view.updateGifts(e)}}s.modify(i)},{}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Gifts(){return{Replay:{exit:this.onReplayExit_Gifts},Gifts:{check:this.onGiftsCheck_Gifts,enter:this.onGiftsEnter_Gifts,exit:this.onGiftsExit_Gifts},Freespins:{enter:this.onFreespinsEnter_Gifts},FreespinsProgress:{exit:this.onFreespinsProgressExit_Gifts}}}onInitialize(){return this.registerStates(this.stateConfig_Gifts),super.onInitialize()}onReplayExit_Gifts({finish:e}){return e(),{onFinish:()=>this.component.updateGifts()}}onGiftsCheck_Gifts(){return this.component.isGifts}onGiftsEnter_Gifts({finish:e}){const t=this.component.store.getGifts();this.component.showPopup({text:"${texts.core.you_prize} "+t.left+" ${texts.core.gift_spins}",buttonText:"OK",isClose:!1}),this.component.updateGifts(),e()}onGiftsExit_Gifts({finish:e}){this.component.updateGifts(0),e()}onFreespinsEnter_Gifts({finish:e}){e();return{actions:{updateFreespinsCounter:()=>this.component.updateGifts(0)}}}onFreespinsProgressExit_Gifts({finish:e}){this.component.updateGifts(),e()}onSpinAction(){return this.useGifts(),super.onSpinAction()}useGifts(){const e=this.component.activeRespins;!this.component.store.isGifts||this.component.store.isFreespins||e||this.component.useGifts()}}s.modify(i)},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{addToGlobal(){return this.addItem("isGifts"),super.addToGlobal()}get isGifts(){return!!this.component.controller.giftLeft}}s.modify(i)},{}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){const e=super.build();return this.updateGifts(0),e}updateGifts(e=0){e=+e;const t=+this.tree.nodeMap.giftsValue.text;e>0&&t!=e&&this.shakeGiftIcon(),this.tree.nodeMap.giftsValue.text=e,this.tree.nodeMap.giftsPanel.visible=!!e}shakeGiftIcon(){const e=this.tree.nodeMap.giftsIcon;e&&(new c2d.Timeline).to(e,.2,{rotation:Math.PI/20}).to(e,.2,{rotation:-Math.PI/20}).to(e,.2,{rotation:0})}}s.modify(i)},{}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenGiftsHandler"),e("./GameScreenGifts"),e("./GameScreenGiftsStore"),e("./GameScreenGiftsController"),e("./GameScreenGiftsView")},{"./GameScreenGifts":33,"./GameScreenGiftsController":34,"./GameScreenGiftsHandler":35,"./GameScreenGiftsStore":36,"./GameScreenGiftsView":37}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{getActionHandlers(){const e=super.getActionHandlers();return e.homeButton=()=>this.onHomeButton(),e}onHomeButton(){this.view.showHomePopup(()=>this.toHome())}}s.modify(i)},{}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{get backURL(){return this.getItem("backURL")}}s.modify(i)},{}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.homeButton),e}showHomePopup(e){this.showPopup({text:"${texts.core.home_msg}",buttonText:"${texts.core.leave}",confirm:e})}}s.modify(i)},{}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenHomeStore"),e("./GameScreenHomeController"),e("./GameScreenHomeView")},{"./GameScreenHomeController":39,"./GameScreenHomeStore":40,"./GameScreenHomeView":41}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{enableMenuButton(){this.controller.enableMenuButton()}disableMenuButton(){this.controller.disableMenuButton()}}s.modify(i)},{}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{create(){const e=super.create();return this.menuHandler=null,e}getActionHandlers(){const e=super.getActionHandlers();return e.menuButton=()=>this.onInfoButton(),e}onInfoButton(){this.menuHandler&&this.menuHandler()}enableMenuButton(){this.view.enableMenuButton()}disableMenuButton(){this.view.disableMenuButton()}}s.modify(i)},{}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Menu(){return{Start:{enter:this.onStart_Menu},Gifts:{begin:this.onIdleBegin_Menu},Idle:{begin:this.onIdleBegin_Menu},Choice:{enter:this.onChoiceEnter_Menu}}}onInitialize(){return this.registerStates(this.stateConfig_Menu),super.onInitialize()}onStart_Menu({finish:e,actions:t}){this.component.controller.menuHandler=t.infoButton,e()}onIdleBegin_Menu(e){return this.updateButton_Menu(e)}onChoiceEnter_Menu(e){return this.updateButton_Menu(e)}updateButton_Menu({finish:e}){this.component.enableMenuButton(),e();return{onFinish:()=>this.component.disableMenuButton()}}}s.modify(i)},{}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){super.build(),this.disableMenuButton()}getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.menuButton),e}enableMenuButton(){this.tree.nodeMap.menuButton.enable(!0)}disableMenuButton(){this.tree.nodeMap.menuButton.enable(!1)}}s.modify(i)},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenMenuHandler"),e("./GameScreenMenuController"),e("./GameScreenMenuView"),e("./GameScreenMenu")},{"./GameScreenMenu":43,"./GameScreenMenuController":44,"./GameScreenMenuHandler":45,"./GameScreenMenuView":46}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{showPopup(e){this.controller.showPopup(e)}closePopup(){this.controller.closePopup()}isShowPopup(){return this.view.tree.nodeMap.popup.visible}clickConfirmPopup(){this.isShowPopup||console.error("Impossible to press the Confirm button. Popup not shown"),this.view.tree.nodeMap.popupButtonConfirm.visible||console.error("Impossible to press the Confirm button. Button not shown"),this.view.tree.nodeMap.popupButtonConfirm.clickAction()}clickClosePopup(){this.isShowPopup||console.error("Impossible to press the Close button. Popup not shown"),this.view.tree.nodeMap.popupButtonClose.visible||console.error("Impossible to press the Close button. Button not shown"),this.view.tree.nodeMap.popupButtonClose.clickAction()}}s.modify(i)},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{getActionHandlers(){const e=super.getActionHandlers();return e.popupButtonClose=()=>this.view.closePopup(),e}showPopup(e){this.view.showPopup(e)}closePopup(){this.view.closePopup()}}s.modify(i)},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Popup(){return{RestorePopup:{check:this.checkMainRestore_Popup,enter:this.onMainRestore_Popup},ShowFreespinsPopup:{enter:this.onFreespinsPopupRestore_Popup},FreespinsRestore:{enter:this.onFreespinsRestore_Popup}}}onInitialize(){return this.registerStates(this.stateConfig_Popup),super.onInitialize()}checkMainRestore_Popup(){const{nextAction:e,isRestore:t,showRestoreSessionPopup:n}=this.component.store;return n&&"spin"!==e&&"extrabonus_spin"!==e&&"initspin"!==e&&"freespin"!==e&&t}checkFreespinPopupRestore_Popup(){const{nextAction:e,isRestore:t,showRestoreSessionPopup:n}=this.component.store;return n&&"freespin"===e&&t}checkFreespinRestore_Popup(){const{nextAction:e,isRestore:t,showRestoreSessionPopup:n}=this.component.store;return n&&"initspin"===e&&t}onMainRestore_Popup({finish:e}){this.showRestorePopup().then(e)}onFreespinsPopupRestore_Popup({finish:e}){this.checkFreespinPopupRestore_Popup()&&this.showRestorePopup(),e()}onFreespinsRestore_Popup({finish:e}){this.checkFreespinRestore_Popup()?this.showRestorePopup().then(e):e()}showRestorePopup(){const e=c2d.waitLast(),t=c2d.call(()=>{this.component.closePopup(),e.call()},5);return this.component.showPopup({text:"${texts.core.restore_popup}",isClose:!1,isConfirm:!0,buttonText:"${texts.core.close}",confirm:()=>{c2d.Timeout.clear(t),e.call()}}),e}getGlobalActionsConfig(){const e=super.getGlobalActionsConfig();return e.networkError=e=>this.networkError(e),e.networkResolveError=()=>this.networkResolveError(),e}networkError(e){this.component.showPopup({text:e.message,isClose:!1,isConfirm:c2d.type.isNumber(e.code),buttonText:"${texts.core.back_to_lobby}",confirm:()=>this.component.toHome()})}networkResolveError(){this.component.closePopup()}}s.modify(i)},{}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{get backURL(){return this.getItem("backURL")}get showRestoreSessionPopup(){return this.getItem("showRestoreSessionPopup")}}s.modify(i)},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){return this._isShowPopup=!1,super.build()}_getInteractive(){return super._getInteractive()&&!this._isShowPopup}getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.popupButtonConfirm),e}showPopup({text:e,confirm:t,isClose:n=!0,isConfirm:s=!0,buttonText:i="${texts.core.confirm}"}){if(!this.tree)return;if(!this.store.showPrompts)return void(t&&t());this._isShowPopup=!0;const o=this.tree.variables;e=c2d.display.Factory.realizeProperty(e,o),i=c2d.display.Factory.realizeProperty(i,o);const r=this.tree.nodeMap.popup;if(this.tree.nodeMap.popupText.text=e,this.tree.nodeMap.popupButtonClose.visible=n,game.audioManager.playAudio("popup"),s){this.tree.nodeMap.popupButtonConfirm.visible=!0;const e=this.tree.nodeMap.popupButtonText,n=this.tree.nodeMap.popupButtonBg;e.text=i,e.fitToArea(.9*n.width,n.height),this.tree.nodeMap.popupButtonConfirm.setHandlers(()=>{this.closePopup(),t&&t()},!0)}else this.tree.nodeMap.popupButtonConfirm.visible=!1;const a=this.tree.nodeMap.panelDarkness;a&&(a.visible=!0,a.tween.tl.clear(),a.tween.fadeTo(1,.2)),r.y=c2d.display.Factory.calcProperty("$[bottom]")-r.children[0].y,r.visible=!0,r.tween.tl.clear(),r.tween.moveTo(null,0,.2)}closePopup(){if(!this.tree)return;const e=this.tree.nodeMap.popup;if(!e.visible)return;this._isShowPopup=!1;const t=this.tree.nodeMap.panelDarkness;t&&(t.tween.tl.clear(),t.tween.fadeTo(0,.2,{onComplete:()=>{t.visible=!1}}));const n=c2d.display.Factory.calcProperty("$[bottom]")-e.children[0].y;e.tween.tl.clear(),e.tween.moveTo(null,n,.2,{onComplete:()=>{e.visible=!1}})}}s.modify(i)},{}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenPopup"),e("./GameScreenPopupHandler"),e("./GameScreenPopupController"),e("./GameScreenPopupView"),e("./GameScreenPopupStore")},{"./GameScreenPopup":48,"./GameScreenPopupController":49,"./GameScreenPopupHandler":50,"./GameScreenPopupStore":51,"./GameScreenPopupView":52}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{enableRulesButton(){this.controller.enableRulesButton()}disableRulesButton(){this.controller.disableRulesButton()}}s.modify(i)},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{create(){const e=super.create();return this.rulesHandler=null,e}getActionHandlers(){const e=super.getActionHandlers();return e.rulesButton=()=>this.onRulesButton(),e}onRulesButton(){this.rulesHandler&&this.rulesHandler()}enableRulesButton(){this.view.enableRulesButton()}disableRulesButton(){this.view.disableRulesButton()}}s.modify(i)},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Rules(){return{Start:{enter:this.onStart_Rules},Gifts:{begin:this.onIdleBegin_Rules},Idle:{begin:this.onIdleBegin_Rules},Choice:{enter:this.onChoiceEnter_Rules}}}onInitialize(){return this.registerStates(this.stateConfig_Rules),super.onInitialize()}onStart_Rules({finish:e,actions:t}){this.component.controller.rulesHandler=t.rulesButton,e()}onIdleBegin_Rules(e){return this.updateButton_Rules(e)}onChoiceEnter_Rules(e){return this.updateButton_Rules(e)}updateButton_Rules({finish:e}){this.component.enableRulesButton(),e();return{onFinish:()=>this.component.disableRulesButton()}}}s.modify(i)},{}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){super.build(),this.disableRulesButton()}getAnimationButtons(){const e=super.getAnimationButtons();return e.push(this.tree.nodeMap.rulesButton),e}enableRulesButton(){this.tree.nodeMap.rulesButton&&this.tree.nodeMap.rulesButton.enable(!0)}disableRulesButton(){this.tree.nodeMap.rulesButton&&this.tree.nodeMap.rulesButton.enable(!1)}}s.modify(i)},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenRulesHandler"),e("./GameScreenRulesController"),e("./GameScreenRulesView"),e("./GameScreenRules")},{"./GameScreenRules":54,"./GameScreenRulesController":55,"./GameScreenRulesHandler":56,"./GameScreenRulesView":57}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{clickSpinButton(){this.view.tree.nodeMap.spinButton.clickAction()}}s.modify(i)},{}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{getActionHandlers(){const e=super.getActionHandlers();return e.spinButton=()=>this.onSpinButton(),e}addListeners(){return this.addSpinListeners(),super.addListeners()}addSpinListeners(){game.device.desktop&&document.addEventListener("keyup",e=>{this.view.interactive&&(this.store.showInfo||this.store.spaceSpin&&"Space"===e.code&&(this.view.tweenSpinButton(),this.onSpinButton()))})}changeSpinButtonState(e="normal"){"normal"==e?this.view.toNormalSpinButton():"skip"==e?this.view.toSkipSpinButton():"collect"===e?this.view.toCollectSpinButton():"disable"===e?this.view.toDisableSpinButton():console.error("wrong spin button state",e)}}s.modify(i)},{}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Spin(){return{ShowFreespinsPopup:{enter:this.onFreespinsPopupEnter_Spin},ShowFreespinsWin:{enter:this.onFreespinsWinEnter_Spin},BonusGame:{enter:this.onBonusGameEnter_Spin}}}onInitialize(){return this.registerStates(this.stateConfig_Spin),super.onInitialize()}onFreespinsPopupEnter_Spin({finish:e,skip:t}){this.component.controller.changeSpinButtonState("collect"),e();return{onFinish:(...e)=>{this.component.controller.changeSpinButtonState("skip")}}}onFreespinsWinEnter_Spin({finish:e,skip:t}){this.component.controller.changeSpinButtonState("collect"),e();return{onFinish:(...e)=>{this.component.controller.changeSpinButtonState("skip")}}}onBonusGameEnter_Spin({finish:e,skip:t}){this.component.controller.changeSpinButtonState("disable"),e()}}s.modify(i)},{}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){const e=super.build();return this.initSpinAnimation(),e}initSpinAnimation(){this.tree.nodeMap.spinButton.addButtonListener("pointerDown",()=>this.tweenSpinButtonDown()),this.tree.nodeMap.spinButton.addButtonListener("pointerUp",()=>this.tweenSpinButtonUp()),this.tree.nodeMap.spinButton.addButtonListener("pointerUpOutside",()=>this.tweenSpinButtonUp())}tweenSpinButton(){const e=this.tree.nodeMap.spinButton;e.isEnabled&&(e.tween.tl.clear(),e.tween.scaleTo(.9,.1),e.tween.scaleTo(1,.1))}tweenSpinButtonDown(){const e=this.tree.nodeMap.spinButton;e.isEnabled&&(e.tween.tl.clear(),e.tween.scaleTo(.9,.1))}tweenSpinButtonUp(){const e=this.tree.nodeMap.spinButton;e.isEnabled&&(e.tween.tl.clear(),e.tween.scaleTo(1,.1))}onIdleEnter(){return this.toNormalSpinButton(),super.onIdleEnter()}onIdleBegin(){return this.toNormalSpinButton(),this.enableSpinButton(),super.onIdleBegin()}onSkipState(){return this.toSkipSpinButton(),super.onSkipState()}onCollectEnter(){return this.disableSpinButton(),super.onCollectEnter()}hasActualRespin(){const e=this.store.respins;return e&&e.count<e.total}toNormalSpinButton(){this.tree.nodeMap.spinButton.enable(!0),this.hasActualRespin()?this.tree.nodeMap.spinButton.setStates("respin"):this.tree.nodeMap.spinButton.setStates("normal")}toSkipSpinButton(){this.tree.nodeMap.spinButton.enable(!0),this.hasActualRespin()?this.tree.nodeMap.spinButton.setStates("respin"):this.tree.nodeMap.spinButton.setStates("skip")}toCollectSpinButton(){this.tree.nodeMap.spinButton.enable(!0),this.tree.nodeMap.spinButton.setStates("normal",!1),this.tree.nodeMap.spinButton.setStates("collect")}enableSpinButton(){this.tree.nodeMap.spinButton.enable(!0)}disableSpinButton(){this.tree.nodeMap.spinButton.enable(!1)}toDisableSpinButton(){this.tree.nodeMap.spinButton.enable(!1)}}s.modify(i)},{}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenSpin"),e("./GameScreenSpinHandler"),e("./GameScreenSpinController"),e("./GameScreenSpinView")},{"./GameScreenSpin":59,"./GameScreenSpinController":60,"./GameScreenSpinHandler":61,"./GameScreenSpinView":62}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_SpinDelay(){return{Gifts:{begin:this.onIdleBegin_SpinDelay},Idle:{begin:this.onIdleBegin_SpinDelay}}}onInitialize(){return this.registerStates(this.stateConfig_SpinDelay),super.onInitialize()}onIdleBegin_SpinDelay({finish:e}){this.component.view.updateSpinDelay(),e()}}s.modify(i)},{}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{get minSpinTime(){return this.getItem("minSpinTime")}}s.modify(i)},{}],66:[function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const i=game.sources.components.GameScreen.View;class o extends i.Latest{_getInteractive(){return super._getInteractive()&&!this.isSpinDelay}updateSpinDelay(){return s(this,void 0,void 0,(function*(){this.spinTimeout&&(this.layers.game_screen.alpha=.6,this.layers.game_screen.interactiveChildren=!1,this.isSpinDelay=!0,yield this.spinTimeout,this.layers.game_screen.alpha=1,this.layers.game_screen.interactiveChildren=!0,this.isSpinDelay=!1)}))}onSpinAction(){const e=super.onSpinAction(),t=this.store.minSpinTime;return t&&(this.spinTimeout=c2d.Timeout.wait(t)),e}}i.modify(o)},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenSpinDelayHandler"),e("./GameScreenSpinDelayStore"),e("./GameScreenSpinDelayView")},{"./GameScreenSpinDelayHandler":64,"./GameScreenSpinDelayStore":65,"./GameScreenSpinDelayView":66}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{getActionHandlers(){const e=super.getActionHandlers();return e.swipeModeButtonClose=()=>this.view.hideSwipeModePopup(),e.enableSwipeModeButton=()=>this.enableSwipeMode(),e}addListeners(){const e=super.addListeners();return game.device.mobile&&(this.view.swipeHandler=()=>this.onSpinButton()),e}enableSwipeMode(){this.view.hideSwipeModePopup(),this.store.setSwipeMode(!0)}}s.modify(i)},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_SwipeMode(){return{BonusGame:{enter:this.onBonusGameEnter_SwipeMode,exit:this.onBonusGameExit_SwipeMode}}}onInitialize(){return this.registerStates(this.stateConfig_SwipeMode),super.onInitialize()}onBonusGameEnter_SwipeMode({finish:e}){this.component.view.hideSwipeMode(),e()}onBonusGameExit_SwipeMode({finish:e}){this.component.view.showSwipeMode(),e()}}s.modify(i)},{}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Store;class i extends s.Latest{get swipeMode(){return this.getItem("swipeMode")}setSwipeMode(e){this.getItem("setSwipeMode")(e)}}s.modify(i)},{}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{_getInteractive(){return super._getInteractive()&&!this.isShowSwipePopup}build(){const e=super.build();return this.initSwipeMode(),e}initSwipeMode(){if(this.isShowSwipePopup=!1,this.layers.touch_area&&!game.device.desktop){const e=+game.localStorage.getItem("swipeMode"),t=new c2d.display.Factory.types.Container,n={left:-game.size.gameField.x,top:-game.size.gameField.y,width:game.size.gameField.width,height:game.size.gameField.height};t.setHitArea(n.left,n.top,n.width,n.height),t.interactive=!0,this.layers.touch_area.addChild(t),this.swipeContainer=t;let s=!e,i=[];t.on("pointerdown",({data:e})=>{const{y:t}=e.global;i.push(t)}).on("pointerup",({data:e})=>{if(!i.length)return;if(i.length>1||!this.interactive)return void(i=[]);const{y:t}=e.global,[n]=i;if(t-n>100){!+game.localStorage.getItem("swipeMode")&&s?this.isIdle&&(s=!1,this.showSwipeModePopup()):this.store.swipeMode&&this.swipeHandler&&this.swipeHandler()}i=[]})}}onResizeScreen(){if(super.onResizeScreen(),game.device.desktop||!this.swipeContainer)return;const e={left:-game.size.gameField.x,top:-game.size.gameField.y,width:game.size.gameField.width,height:game.size.gameField.height};this.swipeContainer.setHitArea(e.left,e.top,e.width,e.height)}showSwipeModePopup(){this.isShowSwipePopup=!0;const e=this.tree.nodeMap.panelDarkness;e&&(e.visible=!0,e.tween.tl.clear(),e.tween.fadeTo(1,.2));const t=this.tree.nodeMap.swipeModePopup;t.y=c2d.display.Factory.calcProperty("$[bottom]")-t.children[0].y,t.visible=!0,t.tween.tl.clear(),t.tween.moveTo(null,0,.2)}hideSwipeModePopup(){this.store.setSwipeMode(!1),this.isShowSwipePopup=!1;const e=this.tree.nodeMap.swipeModePopup;if(!e||!e.visible)return;const t=this.tree.nodeMap.panelDarkness;t&&(t.tween.tl.clear(),t.tween.fadeTo(0,.2,{onComplete:()=>{t.visible=!1}}));const n=c2d.display.Factory.calcProperty("$[bottom]")-e.children[0].y;e.tween.tl.clear(),e.tween.moveTo(null,n,.2,{onComplete:()=>{e.visible=!1}})}hideSwipeMode(){this.tree.nodeMap.touchArea&&(this.tree.nodeMap.touchArea.visible=!1)}showSwipeMode(){this.tree.nodeMap.touchArea&&(this.tree.nodeMap.touchArea.visible=!0)}}s.modify(i)},{}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenSwipeModeHandler"),e("./GameScreenSwipeModeStore"),e("./GameScreenSwipeModeController"),e("./GameScreenSwipeModeView")},{"./GameScreenSwipeModeController":68,"./GameScreenSwipeModeHandler":69,"./GameScreenSwipeModeStore":70,"./GameScreenSwipeModeView":71}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Component;class i extends s.Latest{onReplayExit(){const e=super.onReplayExit();return this.clearTotalWin(),e}onSpin(){return this.onSpinUpdateTotal(),super.onSpin()}onSpinUpdateTotal(){if(this.store.isFreespins){const e=this.store.getFsWin();e&&this.showFsWin(e)}else this.clearTotalWin()}updateTotalWin(e){this.controller.updateTotalWin(e)}showFsWin(e){this.controller.showFsWin(e)}clearTotalWin(){this.controller.clearTotalWin()}getViewWin(){return this.view.tree.nodeMap.winValue.text}}s.modify(i)},{}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Controller;class i extends s.Latest{clearTotalWin(){this.store.isFreespins||(this.lastWin=0,this.view.clearTotalWin())}updateTotalWin(e){if(!e)return void this.clearTotalWin();this.lastWin=e;const t=this.store.getItem("currency");e=c2d.utils.formatters.StringFormatter.toCurrency(e.toFixed(2),{currency:t}),this.view.updateTotalWin(e)}showFsWin(e){if(!e&&0!==e)return;const t=this.store.getItem("currency");e=c2d.utils.formatters.StringFormatter.toCurrency(e.toFixed(2),{currency:t}),this.view.updateFsWin(e)}}s.modify(i)},{}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.Handler;class i extends s.Latest{get stateConfig_Win(){return{Gifts:{begin:this.onIdleBegin_Win},Idle:{begin:this.onIdleBegin_Win},ShowAllLines:{enter:this.onShowAllLinesEnter_Win},Freespins:{enter:this.onFreespinsEnter_Win},FreespinsProgress:{enter:this.onFreespinsProgressEnter_Win},ShowFreespinsWin:{enter:this.onFreespinsWinEnter_Win},Celebration:{enter:this.onCelebration_Win,exit:this.onCelebrationExit_Win}}}onInitialize(){return this.registerStates(this.stateConfig_Win),super.onInitialize()}onIdleBegin_Win({finish:e}){const t=this.component.store.getTotalWin();this.component.updateTotalWin(t),e()}onShowAllLinesEnter_Win({finish:e}){this.component.store.hasCelebration()||this.updateTotalWin_Win(),e()}onFreespinsEnter_Win({finish:e}){this.component.view.clearTotalWin(),e()}onFreespinsWinEnter_Win({finish:e}){const t=this.component.store.getFsWin();this.component.showFsWin(t),e()}onFreespinsProgressEnter_Win({finish:e}){const t=this.component.store.getFsWin();this.component.showFsWin(t||0),e()}onCelebration_Win({finish:e}){this.component.clearTotalWin(),e()}onCelebrationExit_Win({finish:e}){this.updateTotalWin_Win(),e()}updateTotalWin_Win(){let e;e=this.component.config.showEveryWin?this.component.store.getWinsData().total:this.component.store.getTotalWin(),this.component.updateTotalWin(e)}}s.modify(i)},{}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen.View;class i extends s.Latest{build(){const e=super.build();return this.clearTotalWin(),e}clearTotalWin(){this.tree.nodeMap.winValue.text="",this.tree.nodeMap.winPanel.visible=!1}updateTotalWin(e){this.tree.nodeMap.fsLabel&&(this.tree.nodeMap.winLabel.visible=!0,this.tree.nodeMap.fsLabel.visible=!1),this.tree.nodeMap.winValue.text=e,this.tree.nodeMap.winPanel.visible=!0}updateFsWin(e){this.tree.nodeMap.fsLabel&&(this.tree.nodeMap.winLabel.visible=!1,this.tree.nodeMap.fsLabel.visible=!0,this.tree.nodeMap.winValue.text=e,this.tree.nodeMap.winPanel.visible=!0)}}s.modify(i)},{}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenWinHandler"),e("./GameScreenWin"),e("./GameScreenWinController"),e("./GameScreenWinView")},{"./GameScreenWin":73,"./GameScreenWinController":74,"./GameScreenWinHandler":75,"./GameScreenWinView":76}],78:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoScreen=void 0;let i=class extends game.sources.VisualComponent{build(){this.view.build()}onIntroShow(){this.view.onIntroShow()}onIntroHide(){this.view.onIntroHide()}showMenu(){this.view.showMenu()}closeMenu(){this.view.closeMenu()}onDestroy(){game.remoteApi.soundHandler=null}callRules(){this.view.callRules()}switchTab(e){this.view.switchTab(e)}};i=s([modifiable],i),n.InfoScreen=i},{}],79:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoScreenHandler=void 0;let i=class extends game.sources.Handler{constructor(e){super(e),this.subscribeEvents()}subscribeEvents(){this.events.subscribe(this.events.config.COMPONENTS_INFOSCREEN_CLOSE_MENU,this.closeMenu.bind(this))}get statesConfig(){return{Start:{enter:this.onStartEnter},Init:{exit:this.onInitExit},Intro:{enter:this.onIntroEnter,exit:this.onIntroExit},Gifts:{begin:this.onIdleBegin},Idle:{begin:this.onIdleBegin},Replay:{exit:this.onReplayExit}}}get globalActionsConfig(){return this.getGlobalActionsConfig()}getGlobalActionsConfig(){return{infoButton:()=>this.component.showMenu(),rulesButton:()=>this.component.callRules()}}onStartEnter({finish:e}){e()}onInitExit({finish:e}){this.component.build(),e()}onIntroEnter({finish:e}){this.component.onIntroShow(),e()}onIntroExit({finish:e}){this.component.onIntroHide(),e()}onIdleBegin({finish:e}){return e(),{onFinish:()=>this.component.closeMenu()}}onReplayExit({finish:e}){e()}closeMenu(){this.component.closeMenu()}};i=s([modifiable],i),n.InfoScreenHandler=i},{}],80:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoScreenStore=void 0;let i=class extends game.sources.Store{onCreate(){this.isShowInfo=!1,this.showTurboButton=!1,this._turboMode=this.initTumbler("turboMode",!1),this._showIntro=this.initTumbler("showIntro",!0),game.device.desktop&&(this._spaceSpin=this.initTumbler("spaceSpin",!0),this._arrowBet=this.initTumbler("arrowBet",!0)),game.device.mobile&&(this._swipeMode=this.initTumbler("swipeMode",!1),this._hideSpin=this.initTumbler("hideSpin",!1))}initTumbler(e,t){let n=game.localStorage.getItem(e);return n=c2d.type.isString(n)?"1"===n:t,n}addToGlobal(){this.addItem("showInfo"),this.addItem("turboMode"),this.addItem("setTurboMode"),this.addItem("showIntro"),this.addItem("setShowIntro"),game.device.desktop&&(this.addItem("spaceSpin"),this.addItem("arrowBet")),game.device.mobile&&(this.addItem("swipeMode"),this.addItem("setSwipeMode"),this.addItem("hideSpin"))}get showInfo(){return this.isShowInfo}getMusicVolume(){return game.getAudioGroupVolume("music")}getSoundVolume(){return game.getAudioGroupVolume("sfx")}getMasterVolume(){return game.getMasterVolume()}isAudioEnabled(){return game.isAudioEnabled()}get turboMode(){return this._turboMode}get showTurboButton(){return this._showTurboButton||!1}set showTurboButton(e){this._showTurboButton=e}get showControl(){return this._showControl||!1}set showControl(e){this._showControl=e}setTurboMode(e){e=!!e,game.localStorage.setItem("turboMode",e?"1":"0"),this._turboMode=e}get showIntro(){return this._showIntro}setShowIntro(e){game.localStorage.setItem("showIntro",e?"1":"0"),this._showIntro=e}get spaceSpin(){return this._spaceSpin}setSpaceSpin(e){game.localStorage.setItem("spaceSpin",e?"1":"0"),this._spaceSpin=e}get arrowBet(){return this._arrowBet}setArrowBet(e){game.localStorage.setItem("arrowBet",e?"1":"0"),this._arrowBet=e}get swipeMode(){return this._swipeMode}setSwipeMode(e){game.localStorage.setItem("swipeMode",e?"1":"0"),this._swipeMode=e}get hideSpin(){return this._hideSpin}setHideSpin(e){game.localStorage.setItem("hideSpin",e?"1":"0"),this._hideSpin=e}get rtp(){return this.getItem("rtp")}get reelsCount(){return Object.values(this.getItem("symbols")||{}).length}get symbolsCount(){const e=Object.values(this.getItem("symbols")||{});return Object.keys(e[0]||{}).length}get showHistory(){return this.getItem("showHistory")}get enableSoundButton(){return this.getItem("enableSoundButton")}get showSoundButton(){return this.getItem("showSoundButton")}get enableFullscreenButton(){return this.getItem("enableFullscreenButton")}get showFullscreenButton(){return this.getItem("showFullscreenButton")}get hideCurrency(){return this.getItem("hideCurrency")}get userSupportPageLink(){return this.getItem("userSupportPageLink")}get gameVersion(){return game.application.version}};i=s([modifiable],i),n.InfoScreenStore=i},{}],81:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.InfoScreenView=void 0;let i=class extends game.sources.View{constructor(e){super(e),this.screensView=new this.classes.ScreensView(e),this.darknessView=new this.classes.DarknessView(e),this.menuView=new this.classes.MenuView(e)}create(...e){super.create(...e),this.screensView.create&&this.screensView.create(),this.darknessView.create&&this.darknessView.create(),this.menuView.create&&this.menuView.create()}initialize(...e){super.initialize(...e),this.screensView.initialize(...e),this.darknessView.initialize(...e),this.menuView.initialize(...e)}resizeScreen(...e){super.resizeScreen(...e),this.screensView.resizeScreen(...e),this.darknessView.resizeScreen(...e),this.menuView.resizeScreen(...e)}getHandlers(){return{sound_button:e=>this.soundButtonHandler(Boolean(e.toggleIndex%2)),turbo_button:e=>this.turboButtonHandler(Boolean(e.toggleIndex%2)),closeButton:()=>this.closeMenu()}}onInitialize(){super.onInitialize(),this.playSoundAfterIntro=game.isAudioEnabled(),game.setAudioEnabled(!1),game.remoteApi.soundHandler=e=>this.soundButtonHandler(e)}build(){this.buildViews(),this.addListeners(),this.layers.info_screen.visible=!1,this.playSoundAfterIntro&&game.setAudioEnabled(!0),this.store.showTurboButton||this.store.setTurboMode(!1)}buildViews(){this.darknessView.build(),this.menuView.build(),this.screensView.build()}onIntroShow(){game.setAudioEnabled(!1),this.toggleTurboAfterIntro=this.store.turboMode,this.store.setTurboMode(!1)}onIntroHide(){this.playSoundAfterIntro&&game.setAudioEnabled(!0),this.toggleTurboAfterIntro&&this.store.setTurboMode(!0)}showMenu(){this.layers.info_screen.visible=!0,this.store.isShowInfo=!0,this.menuView.showMenu(),this.darknessView.showMenu(),this.screensView.showMenu()}closeMenu(){this.store.isShowInfo=!1,this.screensView.closeMenu(),this.darknessView.closeMenu(),this.menuView.closeMenu()}onDestroy(){game.remoteApi.soundHandler=null}callRules(){this.showMenu(),this.switchTab("rules")}addListeners(){const e=this.getHandlers();this.darknessView.setHandlers(e),this.menuView.setHandlers(e),this.screensView.setHandlers(e)}soundButtonHandler(e){game.setAudioEnabled(e),game.remoteApi.onSoundChange(e),this.darknessView.updateSoundButton(),this.screensView.updateSettings()}turboButtonHandler(e){this.store.setTurboMode(e),this.darknessView.updateTurboButton(),this.screensView.updateSettings()}switchTab(e){this.screensView.switchTab(e),this.menuView.switchTab(e)}setComponent(e){super.setComponent(e),this.darknessView.setComponent(e),this.menuView.setComponent(e),this.screensView.setComponent(e),this.darknessView.setBaseView(this),this.menuView.setBaseView(this),this.screensView.setBaseView(this)}setAnimations(e){e.forEach(e=>{const t=()=>{const{icon:t}=e.nodeMap;t.tween.tl.clear(),t.tween.scaleTo(1,.2)};e&&e.addButtonListener("pointerDown",()=>{const{icon:t}=e.nodeMap;t.tween.tl.clear(),t.tween.scaleTo(.9,.2)}),e&&e.addButtonListener("pointerUp",t),e&&e.addButtonListener("pointerUpOutside",t)})}};i=s([modifiable],i),n.InfoScreenView=i},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./InfoScreenComponent"),i=e("./InfoScreenHandler"),o=e("./InfoScreenStore"),r=e("./views/ScreensView"),a=e("./views/MenuView"),l=e("./views/DarknessView"),c=e("./InfoScreenView");e("./views/modifications/paytable/index"),e("./views/modifications/fullscreen/index"),e("./views/modifications/settings/index"),e("./views/modifications/history/index"),e("./views/modifications/bonusroom/index"),e("./views/modifications/turbo/index"),e("./views/modifications/control/index");const u={ScreensView:r.ScreensView,MenuView:a.MenuView,DarknessView:l.DarknessView},h={Component:s.InfoScreen,Handler:i.InfoScreenHandler,Store:o.InfoScreenStore,View:c.InfoScreenView,classes:u};game.componentsManager.registerComponent("InfoScreen",h)},{"./InfoScreenComponent":78,"./InfoScreenHandler":79,"./InfoScreenStore":80,"./InfoScreenView":81,"./views/DarknessView":83,"./views/MenuView":84,"./views/ScreensView":85,"./views/modifications/bonusroom/index":90,"./views/modifications/control/index":93,"./views/modifications/fullscreen/index":97,"./views/modifications/history/index":102,"./views/modifications/paytable/index":105,"./views/modifications/settings/index":108,"./views/modifications/turbo/index":111}],83:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.DarknessView=void 0;let i=class extends game.sources.FactoryView{build(){this.buildTree(),this.darkness=this.tree.nodeMap.panelDarkness,this.needUpdateTree=!0}buildVariables(){return{}}buildTree(){const e=this.layers.darkness_area,t=this.buildVariables();super.buildTree("darkness_tree",e,t),this.init()}init(){this.initButtonsAnimations(),this.initSoundButton()}initButtonsAnimations(){const e=[this.tree.nodeMap.sound_button,this.tree.nodeMap.turbo_button];this.view.setAnimations(e)}initSoundButton(){const e=this.tree.nodeMap.sound_button;e&&(this.store.showSoundButton||(e.visible=!1),this.store.enableSoundButton||e.enable(!1))}showMenu(){this.isCanClose=!0,this.needUpdateTree&&(this.needUpdateTree=!1,this.updateTree()),this.showDarkness()}closeMenu(){this.isCanClose&&(this.isCanClose=!1,this.hideDarkness())}updateMenuButtons(){this.updateSoundButton(),this.updateTurboButton()}updateSoundButton(){const e=this.store.isAudioEnabled()?0:1;this.tree.nodeMap.sound_button.toggle(e,!0)}updateTurboButton(){const e=this.store.turboMode?0:1;this.tree.nodeMap.turbo_button.toggle(e,!0)}showDarkness(){this.layers.game_screen.visible=!1,this.darkness.alpha=0,this.darkness.tween.tl.clear(),this.darkness.tween.fadeTo(1,.3),this.updateMenuButtons()}hideDarkness(){this.layers.game_screen.visible=!0,this.darkness.tween.tl.clear(),this.darkness.tween.fadeTo(0,.3,{onComplete:()=>{this.layers.info_screen.visible=!1}})}onResizeScreen(){this.isCanClose?this.updateTree():this.needUpdateTree=!0}setBaseView(e){this.view=e}};i=s([modifiable],i),n.DarknessView=i},{}],84:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.MenuView=void 0;let i=class extends game.sources.FactoryView{build(){this.buildTree(),this.buildButtons(),this.init(),this.needUpdateTree=!0}init(){this.initButtonsAnimations()}buildVariables(){return{}}buildTree(){const e=this.layers.menu_area,t=this.buildVariables();super.buildTree("menu_tree",e,t)}initButtonsAnimations(){const e=[this.tree.nodeMap.paytableTab_button,this.tree.nodeMap.rulesTab_button,this.tree.nodeMap.historyTab_button,this.tree.nodeMap.settingTab_button,this.tree.nodeMap.bonus_button,this.tree.nodeMap.fullscreen_button];this.view.setAnimations(e)}buildButtons(){this._buttons=[],Object.values(this.tree.nodeMap.menuButtons.nodeMap).forEach(e=>{e.config&&e.config.tab&&(this._buttons.push(e),e.addButtonListener("pointerUp",()=>this.switchTab(e.config.tab)))})}showMenu(){this.isCanClose=!0,this.needUpdateTree&&(this.needUpdateTree=!1,this.updateTree());const e=this.tree.nodeMap.menu_container;e.tween.tl.clear(),game.device.portrait?(e.x=0,e.y=c2d.display.Factory.calcProperty("$[100sh]")-e.children[0].width,e.tween.moveTo(null,0,.2)):(e.y=0,e.x=-e.children[0].width,e.tween.moveTo(0,null,.2))}closeMenu(){if(!this.isCanClose)return;this.isCanClose=!1;const e=this.tree.nodeMap.menu_container;e.tween.tl.clear();const t=()=>{};if(game.device.portrait){const t=c2d.display.Factory.calcProperty("$[100sh]")-e.children[0].width;e.tween.moveTo(null,t,.3)}else{const n=-e.children[0].width;e.tween.moveTo(n,null,.3,{onComplete:t})}this.switchTab()}switchTab(e){Object.values(this._buttons).forEach((t,n)=>{e&&t.config.tab===e?(t._setInteraction(!1),t.setFactoryState("tint","select"),this.view.screensView.switchTab(e)):(t._setInteraction(!0),t.setFactoryState("tint","normal"))}),this._currentActiveButton=e}onResizeScreen(){this.isCanClose?this.updateTree():this.needUpdateTree=!0}showBonusRoomButton(){}setBaseView(e){this.view=e}};i=s([modifiable],i),n.MenuView=i},{}],85:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.ScreensView=void 0;let i=class extends game.sources.FactoryView{build(){this.addGameVersion(),this.addUserSupportPageLink(),this.buildTree(),this.buildScreens(),this.init(),this.needUpdateTree=!0}addGameVersion(){const e=this.getPrefabs();this._findRules(e.rulesTab).children.push({__prefab:"sectionText",__variables:{text:"${texts.core.game_version}"}})}addUserSupportPageLink(){const e=this.store.userSupportPageLink;if(!e)return;const t=this.getPrefabs();this._findRules(t.rulesTab).children.push({__prefab:"user_support_link"}),t.user_support_link.__variables={user_support_link:e},this.getTexts()["core.contacts"]+=" "+e}_findRules(e){var t;if("rules"==(null==e?void 0:e.name))return e;if(!(null===(t=e.children)||void 0===t?void 0:t.length))return;e.children.find(e=>this._findRules(e));for(const t of e.children){const e=this._findRules(t);if(e)return e}}buildVariables(){return{rtp:this.store.rtp,columns:this.store.reelsCount,rows:this.store.symbolsCount,gameVersion:this.store.gameVersion}}buildTree(){const e=this.layers.screens_area,t=this.buildVariables();super.buildTree("screens_tree",e,t)}buildScreens(){this._optionsScreens=[];const e=this.tree.nodeMap.content_container;Object.values(e.nodeMap).forEach(e=>{e.config&&e.config.screen&&this._optionsScreens.push(e)}),e.y=c2d.display.Factory.calcProperty("$[100sh]")}showMenu(){this.needUpdateTree&&(this.needUpdateTree=!1,this.updateTree()),this.switchTab()}closeMenu(){this.switchTab()}switchTab(e){this.isCanClose=Boolean(e),e&&this.needUpdateTree&&(this.needUpdateTree=!1,this.updateTree());const t=()=>{Object.values(this._optionsScreens).forEach(t=>{t&&(e&&t.config.screen===e?(t.visible=!0,this.showTab(e)):(this.onTabHide(t),t.visible=!1))}),this._currentScreen=e},n=this.tree.nodeMap.content_container;if(n.tween.tl.clear(),e){t();const e=0;n.y=c2d.display.Factory.calcProperty("$[100sh]"),n.tween.moveTo(null,e,.3)}else{const e=c2d.display.Factory.calcProperty("$[100sh]");n.tween.moveTo(null,e,.3,{onComplete:()=>t()})}}onResizeScreen(){this.updateTree(),this.isCanClose?this.updateTree():this.needUpdateTree=!0}setBaseView(e){this.view=e}init(){}showTab(e){}showHistoryInfo(...e){}setSettingsHandlers(e){}updateAudio(...e){}onTabHide(e){}updateSettings(){}disableBonusRoomButtons(){}enableBonusRoomButtons(){}addBonusButton(e){}};i=s([modifiable],i),n.ScreensView=i},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenComponent").InfoScreen;class i extends s.Latest{addBonusButton(e){this.view.screensView.addBonusButton(e),this.view.menuView.showBonusRoomButton()}callBonusRoom(){this.showMenu(),this.switchTab("bonus")}disableBonusRoomButtons(){this.view.screensView.disableBonusRoomButtons()}enableBonusRoomButtons(){this.view.screensView.enableBonusRoomButtons()}emitShowCustomMenu(e){this.handler.emitShowCustomMenu(e)}emitHideCustomMenu(){this.handler.emitHideCustomMenu()}emitHideInstantCustomMenu(){this.handler.emitHideInstantCustomMenu()}}s.modify(i)},{"../../../InfoScreenComponent":78}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenHandler").InfoScreenHandler;class i extends s.Latest{get stateConfig_BonusRoom(){return{Init:{exit:this.onInitExit_BonusRoom},Idle:{begin:this.onIdleBegin_BonusRoom}}}getGlobalActionsConfig(){const e=super.getGlobalActionsConfig();return e.bonusButton=()=>this.component.callBonusRoom(),e}onInitExit_BonusRoom({finish:e}){return e(),{actions:{addBonusButton:e=>{this.component.addBonusButton(e)}},onFinish:()=>{this.component.disableBonusRoomButtons()}}}onIdleBegin_BonusRoom({finish:e}){return this.component.enableBonusRoomButtons(),e(),{onFinish:()=>{this.component.disableBonusRoomButtons()}}}onInitialize(){return game.fsm.actions.addBonusButton={},game.fsm.actions.bonusButton={},this.registerStates(this.stateConfig_BonusRoom),super.onInitialize()}emitShowCustomMenu(e){this.events.emit(this.events.config.COMPONENTS_INFOSCREEN_SHOW_CUSTOM_SCREEN,e)}emitHideCustomMenu(){this.events.emit(this.events.config.COMPONENTS_INFOSCREEN_HIDE_CUSTOM_SCREEN)}emitHideInstantCustomMenu(){this.events.emit(this.events.config.COMPONENTS_INFOSCREEN_HIDE_INSTANT_CUSTOM_SCREEN)}}s.modify(i)},{"../../../InfoScreenHandler":79}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../MenuView").MenuView;class i extends s.Latest{showBonusRoomButton(){this.tree.nodeMap.bonus_button.visible||(this.tree.nodeMap.bonus_button.visible=!0)}}s.modify(i)},{"../../MenuView":84}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{build(){super.build(),this.bonusItems=[]}addBonusButton(e){this.bonusItems.push(e),this.buildButtonNode(e),this.addBonusButtonListener(e)}buildButtonNode({title:e,name:t,texture:n}){const s=this.getPrefabs(),i=this.tree.nodeMap.bonusItems,o={texts:this.getTexts(),styles:this.getStyles(),textures:this.assetsStore.textures,skeletons:this.assetsStore.skeletons},r={__prefab:"bonusButton",__variables:{title:e,texture:n,name:t}};this.tree.actualConfigMap.bonusItems.children.push(r),i.nodeMap||(i.nodeMap={}),i.nodeList=this.tree._buildDeeper({config:r,variables:o,prefabs:s,parent:i,nodeMaps:[i.nodeMap]}),this.tree.update()}addBonusButtonListener({name:e}){this.tree.nodeMap.bonusItems.nodeMap[e].setHandlers(this.emitShowCustomMenu.bind(this,e))}hideBonusScreens(){this.component.emitHideInstantCustomMenu()}onTabHide(e){super.onTabHide(e),"bonusTab_container"===e.name&&this.hideBonusScreens()}closeMenu(){super.closeMenu(),this.bonusItems&&this.component.emitHideCustomMenu()}emitShowCustomMenu(e){this.component.emitShowCustomMenu(e)}disableBonusRoomButtons(){this.bonusItems.forEach(({name:e})=>{this.tree.nodeMap.bonusItems.nodeMap[e].setStates("disabled")})}enableBonusRoomButtons(){this.bonusItems.forEach(({name:e})=>{this.tree.nodeMap.bonusItems.nodeMap[e].setStates("normal")})}}s.modify(i)},{"../../ScreensView":85}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./MenuBonusRoomView"),e("./ScreensBonusRoomView"),e("./InfoScreenBonusRoom"),e("./InfoScreenBonusRoomHandler")},{"./InfoScreenBonusRoom":86,"./InfoScreenBonusRoomHandler":87,"./MenuBonusRoomView":88,"./ScreensBonusRoomView":89}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenView").InfoScreenView;class i extends s.Latest{addListeners(){return this.addControlListener(),super.addListeners()}addControlListener(){const e={spaceSpin:e=>{this.store.setSpaceSpin(e),this.store.setArrowBet(e)},swipeMode:e=>{this.store.setSwipeMode(e)}};this.screensView.setControlHandlers(e)}}s.modify(i)},{"../../../InfoScreenView":81}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{init(){return this.initControlSettings(),super.init()}initControlSettings(){this.tree.nodeMap.control.visible=!0,game.device.desktop&&this.tree.nodeMap.spaceSpin&&(this.spaceSpinTumbler=this.tree.nodeMap.spaceSpin.nodeMap.tumbler),game.device.mobile&&this.tree.nodeMap.swipeMode&&(this.swipeModeTumbler=this.tree.nodeMap.swipeMode.nodeMap.tumbler)}showTab(e){return"settings"==e&&this.updateControlSettings(),super.showTab(e)}updateControlSettings(){if(this.spaceSpinTumbler){const e=this.store.spaceSpin;this.spaceSpinTumbler.toggle(e,!1)}if(this.swipeModeTumbler){const e=this.store.swipeMode;this.swipeModeTumbler.toggle(e,!1)}}setControlHandlers(e){this.spaceSpinTumbler?this.spaceSpinTumbler.setHandlers(e.spaceSpin):e.spaceSpin(!1),this.swipeModeTumbler?this.swipeModeTumbler.setHandlers(e.swipeMode):e.swipeMode(!1)}}s.modify(i)},{"../../ScreensView":85}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./ScreensControlView"),e("./InfoScreenControlView")},{"./InfoScreenControlView":91,"./ScreensControlView":92}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenView").InfoScreenView;class i extends s.Latest{getHandlers(){const e=super.getHandlers();return e.fullscreen_button=e=>{const t=Boolean(document.fullscreenElement);t?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen(),game.remoteApi.onFullscreenChange(!t)},e}}s.modify(i)},{"../../../InfoScreenView":81}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenComponent").InfoScreen;class i extends s.Latest{onInitialize(){super.onInitialize(),game.remoteApi.fullscreenHandler=e=>this.view.screensView.updateFullscreenButtonState(e)}onDestroy(){super.onDestroy(),game.remoteApi.fullscreenHandler=null}}s.modify(i)},{"../../../InfoScreenComponent":78}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../MenuView").MenuView;class i extends s.Latest{constructor(e){super(e),this._button=null}init(){return this._button=this.tree.nodeMap.fullscreen_button,this._button&&this.initFullscreen(),super.init()}initFullscreen(){if(this.store.showFullscreenButton||(this._button.visible=!1),!this.store.enableFullscreenButton)return void this._button.enable(!1);const e=()=>c2d.Timeout.invoke(()=>{const e=Boolean(document.fullscreenElement);this.updateFullscreenButtonState(e)},.1);document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("fullscreenchange",e)}updateFullscreenButtonState(e){this._button&&this._button.toggle(e?1:0,!0,"pointerDown")}}s.modify(i)},{"../../MenuView":84}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./InfoScreenFullscreenComponent"),e("./InfoScreenFullScreenView"),e("./MenuFullscreenView")},{"./InfoScreenFullScreenView":94,"./InfoScreenFullscreenComponent":95,"./MenuFullscreenView":96}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenComponent").InfoScreen;class i extends s.Latest{updateHistoryHandler(e){this.store.showHistory&&this.view.screensView.updateHistoryHandler(e)}updateReplayHandler(e){this.view.screensView.updateReplayHandler(e)}}s.modify(i)},{"../../../InfoScreenComponent":78}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenHandler").InfoScreenHandler;class i extends s.Latest{get stateConfig_History(){return{Start:{enter:this.onStartEnter_History},Gifts:{begin:this.onIdleBegin_History},Idle:{begin:this.onIdleBegin_History},Replay:{exit:this.onReplayExit_History}}}onInitialize(){return this.registerStates(this.stateConfig_History),super.onInitialize()}onStartEnter_History({finish:e,actions:{getHistory:t}}){this.component.updateHistoryHandler(t),e()}onIdleBegin_History({finish:e,actions:t}){const{playReplay:n}=t;this.component.updateReplayHandler(n),e()}onReplayExit_History({finish:e}){this.component.showMenu(),this.component.view.screensView.switchTab("history"),e()}}s.modify(i)},{"../../../InfoScreenHandler":79}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../MenuView").MenuView;class i extends s.Latest{init(){this.hideHistory(),super.init()}hideHistory(){this.store.showHistory||(this.tree.nodeMap.historyTab_button.visible=!1)}}s.modify(i)},{"../../MenuView":84}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{init(){return this.isReplay=!0,this.isHistoryInfo=!1,this.initHistory(),this.clearHistoryData(),super.init()}initHistory(){this.historyTree=this.tree.nodeMap.history,this.historyTree.nodeMap.historyScrollContainer.setTopOverScrollHandler(()=>this.historyTopOverScroll()),this.historyTree.nodeMap.historyScrollContainer.setBottomOverScrollHandler(()=>this.historyBottomOverScroll()),this.historyTree.nodeMap.prevScroller.setHandlers(()=>this.historyTopOverScroll()),this.historyTree.nodeMap.nextScroller.setHandlers(()=>this.historyBottomOverScroll())}historyTopOverScroll(){this.current_page>1&&this.page_handler(this.current_page-1)}historyBottomOverScroll(){this.current_page<this.total_page&&this.page_handler(this.current_page+1)}updateHistoryHandler(e){this.historyHandler=(t=0)=>{e(e=>this.updateHistoryData(e),t)}}updateReplayHandler(e){this.playReplay=e}showTab(e){"history"==e&&this.isClear&&this.historyHandler();const t=super.showTab(e);return this.updateHistoryNodes(),t}onResizeScreen(){const e=super.onResizeScreen();return this.updateHistoryNodes(),e}updateHistoryNodes(){if(!this.historyTree)return;const[e,t,n,s]=this.historyTree.customBounds;this.historyTree.nodeMap.historyList.forEach(e=>{const{historyLineGraphics:t}=e.nodeMap;t.width=n-2})}updateHistoryData({data:e,settings:t}){let n,s,i,o,r,a,l,c;this.isClear||this.clearHistoryData(),this.isClear=!1;let u=-1;const h=()=>{const e=this.historyTree.nodeMap.historyList[u],t=e.nodeMap;e.visible=!0,e.y=0,n=t.historyLineGraphics,s=t.historyDateValue,i=t.historyTimeValue,o=t.historyActionValue,r=t.historyBetValue,a=t.historyLoseValue,l=t.historyWinValue,c=t.clickGroup},d=Array.fromObject(e.events),[p,m,f,g]=this.historyTree.customBounds;let b=0;for(let e=0;e<d.length;e++){const t=d[e].aggregated_data,p=b%20;0==p?(u++,h(),n.scale.x=1):(s.text+="\n",i.text+="\n",o.text+="\n",r.text+="\n",a.text+="\n",l.text+="\n");const m=n.config.__variables.fieldHeight,g=n.config.__variables.fieldPadding;n.beginFill(b%2?"0x07080a":"0x171b23"),n.drawRect(1,(m+g)*p,f-2,m);const[_,y]=t.datetime.split(" "),S=this.store.hideCurrency?"":t.currency;s.text+=_,i.text+=y,o.text+=t.round_id,r.text+=t.total_bet+" "+S,+t.total_win?l.text+=t.total_win+" "+S:a.text+=t.total_win+" "+S;const w=this.createButton({y:(m+g)*b+.5*m,field:t,event:d[e]});w&&c.addChild(w),b++}this.updateHistoryNavigation(e.navigation),this.historyTree.nodeMap.historyScrollContainer.scrollTop(),this.historyTree.nodeMap.historyScrollContainer.content.y=0}createButton(e){return this.isReplay?this.createReplayButton(e):this.isHistoryInfo?this.createInfoButton(e):void 0}createReplayButton({y:e,field:t,event:n}){const s=Array.fromObject(n.actions).last.cutted_response.available_actions[0];if("spin"==s||"extrabonus_spin"==s){const n=this.historyTree.__variables.textures.btn_start_replay,s=new c2d.display.Sprite(n);return s.pointerdown=()=>{game.audioManager.playAudio("click"),this.playReplay(t.round_id)},s.y=e,s.anchor.set(.5),s.interactive=!0,s.buttonMode=!0,s}}createInfoButton({y:e,field:t}){const n=this.historyTree.__variables.textures.btn_info,s=new c2d.display.Sprite(n);return s.pointerdown=()=>{this.showHistoryInfo(t.round_id)},s.y=e,s.anchor.set(.5),s.interactive=!0,s.buttonMode=!0,s}updateHistoryNavigation(e){const{pages:t,current_page:n,total_pages_count:s}=e;this.current_page=n,this.total_page=s,this.page_handler=e=>{this.isClear||this.clearHistoryData(),this.historyHandler(e)},this.historyTree.nodeMap.prevScroller.visible=this.current_page>1,this.historyTree.nodeMap.nextScroller.visible=this.current_page<this.total_page,this.historyTree.nodeMap.historyContent.onTreeDidUpdate(),this.historyTree.nodeMap.historyScrollContainer.onTreeDidUpdate()}clearHistoryData(){this.historyTree.nodeMap.clickGroup.forEach(e=>{for(;e.children.length;){const t=e.children.last;e.removeChild(t),t.destroy()}}),this.historyTree.nodeMap.prevScroller.visible=!1,this.historyTree.nodeMap.nextScroller.visible=!1,this.historyTree.nodeMap.historyList.forEach(e=>{const{historyLineGraphics:t,historyDateValue:n,historyTimeValue:s,historyActionValue:i,historyBetValue:o,historyLoseValue:r,historyWinValue:a}=e.nodeMap;e.visible=!1,e.y=0,t.clear(),n.text=s.text=i.text=o.text=r.text=a.text=""}),this.historyTree.nodeMap.historyContent.onTreeDidUpdate(),this.historyTree.nodeMap.historyScrollContainer.onTreeDidUpdate(),this.isClear=!0}switchTab(e){super.switchTab(e),e||this.clearHistoryData()}}s.modify(i)},{"../../ScreensView":85}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./InfoScreenHistoryHandler"),e("./InfoScreenHistoryComponent"),e("./MenuHistoryView"),e("./ScreensHistoryView")},{"./InfoScreenHistoryComponent":98,"./InfoScreenHistoryHandler":99,"./MenuHistoryView":100,"./ScreensHistoryView":101}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{init(){return this.initPaytable(),super.init()}initPaytable(){const e=this.store.getItem("directory"),t=e.paytable,n=this.tree.nodeMap.paytable.nodeMap;let s;s=c2d.type.isArray(n.symbols)?n.symbols:[n.symbols],s.forEach((e,n)=>{e.children.forEach(e=>{c2d.type.isNullOrUndefined(e.id)||e.setPayments(t[e.id])})}),n.LinesWinMap&&n.LinesWinMap.drawLines(e.lines)}showTab(e){return super.showTab(e)}}s.modify(i)},{"../../ScreensView":85}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../MenuView").MenuView;class i extends s.Latest{init(){super.init(),this.tree.nodeMap.paytableTab_button.visible=!0}}s.modify(i)},{"../../MenuView":84}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./InfoScreenPaytableView"),e("./MenuPaytableView")},{"./InfoScreenPaytableView":103,"./MenuPaytableView":104}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../../InfoScreenView").InfoScreenView;class i extends s.Latest{addListeners(){return this.addSettingsListener(),super.addListeners()}addSettingsListener(){const e={audioEnabled:e=>{game.setAudioEnabled(e),game.remoteApi.onSoundChange(e),this.darknessView.updateMenuButtons()},soundVolume:(e,t)=>game.setAudioGroupVolume("sfx",t),musicVolume:(e,t)=>game.setAudioGroupVolume("music",t),spaceSpin:e=>{this.store.setSpaceSpin(e),this.store.setArrowBet(e)},swipeMode:e=>{this.store.setSwipeMode(e)}};this.screensView.setSettingsHandlers(e),this.screensView.updateAudio()}}s.modify(i)},{"../../../InfoScreenView":81}],107:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{init(){return this.initSettings(),super.init()}initSettings(){this.audioEnabledTumbler=this.tree.nodeMap.audio.nodeMap.tumbler,this.soundVolumeSlider=this.tree.nodeMap.soundVolume.nodeMap.slider,this.musicVolumeSlider=this.tree.nodeMap.musicVolume.nodeMap.slider,this.showIntroTumbler=this.tree.nodeMap.showIntro.nodeMap.tumbler;this.showIntroTumbler.setHandlers(e=>this.store.setShowIntro(e))}showTab(e){return"settings"==e&&this.updateSettings(),super.showTab(e)}updateSettings(){const e=this.store.isAudioEnabled();this.audioEnabledTumbler.toggle(e,!1);const t=this.store.showIntro;this.showIntroTumbler.toggle(t,!1)}setSettingsHandlers(e){super.setSettingsHandlers(e),this.audioEnabledTumbler.setHandlers(e.audioEnabled),this.soundVolumeSlider.setHandlers(e.soundVolume),this.musicVolumeSlider.setHandlers(e.musicVolume)}updateAudio(){this.audioEnabledTumbler.toggle(this.store.isAudioEnabled(),!1);const e=this.store.getSoundVolume();this.soundVolumeSlider.value=e,this.soundVolumeSlider.redraw(e);const t=this.store.getMusicVolume();this.musicVolumeSlider.value=t,this.musicVolumeSlider.redraw(t)}}s.modify(i)},{"../../ScreensView":85}],108:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./ScreensSettingsView"),e("./InfoScreenSettingsView")},{"./InfoScreenSettingsView":106,"./ScreensSettingsView":107}],109:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../DarknessView").DarknessView;class i extends s.Latest{init(){super.init(),this.tree.nodeMap.turbo_button.visible=!0,this.store.showTurboButton=!0}}s.modify(i)},{"../../DarknessView":83}],110:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../ScreensView").ScreensView;class i extends s.Latest{init(){return this.initSettingsTurbo(),super.init()}initSettingsTurbo(){this.tree.nodeMap.turboMode&&(this.turboModeTumbler=this.tree.nodeMap.turboMode.nodeMap.tumbler),this.tree.nodeMap.turboModeTumbler.visible=!0}showTab(e){return"settings"==e&&this.updateSettingsTurbo(),super.showTab(e)}updateSettingsTurbo(){if(this.turboModeTumbler){const e=this.store.turboMode;this.turboModeTumbler.toggle(e,!1)}}setSettingsHandlers(e){super.setSettingsHandlers(e),this.turboModeTumbler?this.turboModeTumbler.setHandlers(e.turboMode):e.turboMode(!1)}}s.modify(i)},{"../../ScreensView":85}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./ScreensTurboView"),e("./DarknessTurboView")},{"./DarknessTurboView":109,"./ScreensTurboView":110}],112:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Network=void 0;let o=class extends game.sources.Component{constructor(){super(...arguments),this._logger=c2d.Logger.Of("Component.Network.Store")}onCreate(){this.onReconnectStart=new c2d.Signal,this.onReconnectSuccess=new c2d.Signal}onInitialize(){this.customVars=game.application.setup.customVars||this.customVars}initErrorAction(e){this.reportError=e}paramsForRequest(){const e={};return this.store.freespins&&(e.freegame_type=this.store.freespins.type),e}sendRequest({url:e,method:t,payload:n={},reconnectOnError:s=!1}){return i(this,void 0,void 0,(function*(){this.closeSession&&(this.reportCloseSession(),yield c2d.waitLast());const o=e=>i(this,void 0,void 0,(function*(){return new Promise(t=>c2d.call(t,e))})),r=()=>i(this,void 0,void 0,(function*(){return yield new Promise(s=>{const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState)if(200===i.status&&i.responseText.length)try{s(JSON.parse(i.responseText))}catch(e){s()}else s()},i.onerror=()=>{s()};const o=this._toFormData(n);i.open(t,e,!0),i.send(o)})}));let a=null,l=0;do{l>0&&(yield o(2)),l++,a=yield r(),!a&&s&&1===l&&this.onReconnectStart.emit()}while(!a&&s);return l>1&&this.onReconnectSuccess.emit(),a}))}sendApiRequest(e,t={}){return i(this,void 0,void 0,(function*(){const{url:n,password:s,login:i}=this.store.userApi;return yield this.sendRequest({url:n,method:"POST",payload:{login:i,password:s,action:e,args:JSON.stringify(t)},reconnectOnError:!1})}))}sendGameRequest(e={}){return i(this,void 0,void 0,(function*(){return e=Object.assign({time_offset:this.store.timezoneOffset,game:this.store.gameName,customVars:this.customVars,bet:this.store.global.bet,lines:this.store.global.lines&&this.store.global.lines.length,request_id:this.store.nextRequestId,action:this.store.getNextAction},e),yield this.sendRequest({url:this.store.actionURL,method:"POST",payload:{data:JSON.stringify(e),shifter:game.cookies.get("shifter")||"{}"},reconnectOnError:!0})}))}createUser(){return i(this,void 0,void 0,(function*(){return this.customVars?Promise.resolve():yield this.sendApiRequest("registerUser",{currency:this.store.currency}).then(({newUserId:e})=>(this.userId=e,{mode:"real",user_id:e,game:this.store.gameName})).then(e=>this.sendApiRequest("getCustomVars",e)).then(({customVars:e})=>{this.customVars=e}).catch(e=>{this._logger.error(e)})}))}registerBonus(e){return i(this,void 0,void 0,(function*(){return e=Object.assign({user_id:this.userId,game:this.store.gameName,currency:this.store.currency},e),yield this.sendApiRequest("registerBonus",e)}))}setBalance(e){return i(this,void 0,void 0,(function*(){const t={user_id:this.userId,balance:e};return this.sendApiRequest("setBalance",t)}))}getHistory({page:e}){return i(this,void 0,void 0,(function*(){return this.sendGameRequest({action:"history",type:"byrounds",page:e})}))}getRoundHistory(e){return i(this,void 0,void 0,(function*(){const{round_id:t}=e;return this.sendGameRequest({action:"replay",type:"round",round_id:t})}))}getGameSettings(){return i(this,void 0,void 0,(function*(){return this.sendGameRequest({action:"settings"})}))}_toFormData(e){const t=new FormData;return Object.entries(e).forEach(([e,n])=>{t.append(e,n)}),t}get customVars(){return game.localStorage.get("customVars")}set customVars(e){game.localStorage.set("customVars",e)}get userId(){return game.localStorage.get("userId")}set userId(e){game.localStorage.set("userId",e)}getRawResponse(){return this.store.rawResponse}loadGameSettings(){return i(this,void 0,void 0,(function*(){if(!this.store.showMaxWinRtpMessage)return;const e=yield this.getGameSettings();this.store.setGameSettings(e)}))}ping(){if(this.closeSession)return;const e=this.store.pingUrl;if(!e)return;const t=new XMLHttpRequest;t.open("GET",e,!0),t.overrideMimeType("application/json"),t.onreadystatechange=()=>{4===Number(t.readyState)&&200===Number(t.status)&&setTimeout(()=>{this.ping()},1e4)},t.onerror=()=>this._logger.error("Ping broken."),t.send(null)}connectGameSocket(){const e=this.store.gameSocket;if(!e)return;const{encrypted:t}=e;c2d.transport.init(),c2d.transport.setReadyHandler(()=>{setTimeout(()=>{c2d.transport.send({encrypted:t},"auth")},10)}),c2d.transport.setResponseHandler(e=>{const{payload:t}=e;t&&(null!=t.balance?this.updateBalance&&(this.store.setBalance(t.balance),this.updateBalance()):"closeSession"==t.name&&(this.closeSession=!0,this.checkSession()))})}checkSession(){this.closeSession&&this.closeSessionAction&&this.reportCloseSession()}reportCloseSession(){this.reportError({message:"core.session_close".ls(),code:1})}};o=s([modifiable],o),n.Network=o},{}],113:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkHandler=void 0;let o=class extends game.sources.Handler{constructor(){super(...arguments),this._logger=c2d.Logger.Of("Component.Network.Store")}get statesConfig(){return{Start:{enter:this.onStartEnter},Init:{exit:this.onInitExit},Intro:{enter:this.onIntroEnter,exit:this.onIntroExit},Replay:{enter:this.onIntroEnter,exit:this.onIntroExit},ReplayProgress:{enter:this.onReplayProgressEnter},Gifts:{begin:this.onIdleBegin},Idle:{begin:this.onIdleBegin},SpinStart:{enter:this.onSpinStartEnter},SpinProgress:{enter:this.onSpinProgressEnter},BonusGame:{check:this.checkBonusGame,begin:this.onBonusGameBegin},BonusGameInit:{check:this.checkBonusGameInit,enter:this.onBonusGameInitEnter},BonusGameStep:{check:this.checkBonusGameStep,begin:this.onBonusGameStepBegin},BonusGameFinish:{enter:this.onBonusGameFinishEnter},PresentDrop:{exit:this.onDropProgressEnter},FreeSpins:{check:this.checkGetFreespins},InitFreespin:{check:this.checkInitFreespin,enter:this.onInitFreespinEnter},InitSpin:{check:this.checkInitSpin,enter:this.onInitSpinEnter}}}get globalActionsConfig(){return{}}get actionsConfig(){return{networkError:{},networkResolveError:{}}}onInitialize(){this.startData=null,this.ignoreParseResponse=!1,this.component.initErrorAction(e=>this.reportError(e)),this.component.store.setTimezoneOffset(),this.component.onReconnectStart.connect(()=>this.reportReconnectStart()),this.component.onReconnectSuccess.connect(()=>this.reportReconnectSuccess())}checkGetFreespins(){return!1}onInitExit({finish:e}){return this.component.connectGameSocket(),this.component.ping(),e(),{onFinish:()=>{game.loadComplete()}}}onStartEnter({finish:e}){this.component.store.addSpinData(),this.component.createUser().then(()=>this.component.sendGameRequest({action:"init"})).then(e=>!e||e.error?Promise.reject(e.error):e).then(e=>this.onGameApiResponse(e)).then(()=>this.component.loadGameSettings()).then(e).catch(e=>this.reportError(e));return{actions:{getHistory:(e,t=1)=>this.component.getHistory({page:t}).then(t=>e(t)),getRoundHistory:(e,t)=>this.component.getRoundHistory({round_id:t}).then(t=>e(t))}}}onIntroEnter({finish:e}){this.ignoreParseResponse=!0,e();return{onAbort:()=>this.abort=!0}}onReplayProgressEnter({finish:e}){this.abort=!1,e()}onIntroExit({finish:e}){this.abort=!1,this.ignoreParseResponse=!1,this.onGameApiResponse(this.startData).then(e)}onIdleBegin({finish:e,actions:t}){const{updateBalance:n}=t;return this.component.updateBalance=n,this.component.closeSessionAction=!0,this.component.checkSession(),game.remoteApi.onEnterIdle(),e(),{onFinish:()=>{game.remoteApi.onExitIdle(),this.component.updateBalance=null,this.component.closeSessionAction=!1}}}checkBonusGame(){return!this.abort&&this.checkBonusGameStep()}onBonusGameBegin({finish:e}){e()}checkBonusGameInit(){return!this.abort&&"initbonus"===this.component.store.getNextAction}onBonusGameInitEnter({finish:e}){this.sendBaseGameRequest({bonus_game:this.component.store.bonusType}).then(e,e=>this.reportError(e))}checkBonusGameStep(){return"bonus"===this.component.store.getNextAction}onBonusGameStepBegin({finish:e}){return{actions:{bonusChoice:t=>{this.sendBaseGameRequest({bonus_game:this.component.store.bonusType,choice:t}).then(e,e=>this.reportError(e))}}}}onBonusGameFinishEnter({finish:e}){e()}onSpinStartEnter({finish:e}){const t=this.component.paramsForRequest();this.spinCompleteCall=c2d.waitLast(2),this.sendBaseGameRequest(t).then(()=>{this.spinCompleteCall.call()},e=>this.reportError(e)),e()}onSpinProgressEnter({finish:e}){this.spinCompleteCall.then(e),this.spinCompleteCall.call()}onDropProgressEnter({finish:e}){const t=this.component.paramsForRequest();this.sendBaseGameRequest(t).then(e,e=>this.reportError(e))}checkInitFreespin(){return"initfreespin"==this.component.store.getNextAction}onInitFreespinEnter({finish:e}){const t=this.component.paramsForRequest();this.sendBaseGameRequest(t).then(e,e=>this.reportError(e))}checkInitSpin(){return"initspin"==this.component.store.getNextAction}onInitSpinEnter({finish:e}){this.sendBaseGameRequest().then(e,e=>this.reportError(e))}onGameApiResponse(e){return i(this,void 0,void 0,(function*(){this.component.config.isForceInit&&(yield this.checkInitData(e)),this.startData=e,this.component.store.setResponseToStore(e)}))}checkInitData(e){return i(this,void 0,void 0,(function*(){"initfreespin"==e.available_actions[0]?e.spin.wins.total||(yield this.initFreespin(e)):"initspin"==e.available_actions[0]&&e.spin&&e.spin.freespins&&!e.spin.freespins.wins.total&&(yield this.initSpin(e))}))}initFreespin(e){return i(this,void 0,void 0,(function*(){this.component.store.setNextRequestId(e),this.component.store.updateAvailableActions(e),yield this.component.sendGameRequest().then(e=>e.error?Promise.reject(e.error):e).then(t=>{e.initfreespin=t.initfreespin,e.available_actions=t.available_actions}).catch(e=>this.reportError(e))}))}initSpin(e){return i(this,void 0,void 0,(function*(){this.component.store.setNextRequestId(e),this.component.store.updateAvailableActions(e),yield this.component.sendGameRequest().then(e=>e.error?Promise.reject(e.error):e).then(t=>{e.initspin=t.initspin,e.available_actions=t.available_actions}).catch(e=>this.reportError(e))}))}sendBaseGameRequest(e){return i(this,void 0,void 0,(function*(){this.ignoreParseResponse||(yield this.component.sendGameRequest(e).then(e=>e.error?Promise.reject(e.error):e).then(e=>this.onGameApiResponse(e)))}))}reportReconnectStart(){this.fireAction("networkError",{message:"core.trying_to_reconnect".ls()})}reportReconnectSuccess(){this.fireAction("networkResolveError")}reportError(e){this._logger.error(e);[0,37,40].includes(e.code)&&(e.message=`core.server_error_${e.code}`.ls()),this.fireAction("networkError",e),game.remoteApi.onError(e)}};o=s([modifiable],o),n.NetworkHandler=o},{}],114:[function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkStore=void 0;let i=class extends game.sources.Store{constructor(){super(...arguments),this._logger=c2d.Logger.Of("Component.Network.Store")}onCreate(){const{actionURL:e,backURL:t,cashURL:n,userApi:s,gameName:i,showHistory:o,currency:r,hideCurrency:a,showPrompts:l=!0,enableSoundButton:c=!0,showSoundButton:u=!0,enableFullscreenButton:h=!0,showFullscreenButton:d=!0,gameConfig:p,pingUrl:m,gameSocket:f}=game.application.setup,{autoSpins:g=!0,minSpinTime:b,showExitButton:_,userSupportPageLink:y,showMaxWinRtpMessage:S,showBetButtons:w=!0,showRestoreSessionPopup:v}=(null==p?void 0:p.data)||{};this.global={gameName:i,actionURL:e,backURL:t,cashURL:n,userApi:s,currency:r,hideCurrency:a,showHistory:o,showPrompts:l,enableSoundButton:c,showSoundButton:u,showRestoreSessionPopup:v,enableFullscreenButton:h,showFullscreenButton:d,showMaxWinRtpMessage:S,showBetButtons:w,enableAutospins:g,minSpinTime:b,showExitButton:_,userSupportPageLink:y,pingUrl:m,gameSocket:f}}addToGlobal(){this.addItem("setResponseToStore"),this.addItem("setBalance"),this.addItem("setBet"),this.addItem("rawResponse"),this.addItem("initData"),this.addItem("getAvailableActions"),this.addItem("getNextAction"),this.addItem("getCurrentAction"),this.addItem("rtp"),this.addItem("balance"),this.addItem("currency"),this.addItem("denomination"),this.addItem("bet"),this.addItem("multiplier"),this.addItem("freezeData"),this.addItem("ranges"),this.addItem("totalWin"),this.addItem("fsWin"),this.addItem("directory"),this.addItem("giftSpins"),this.addItem("giftFreeSpins"),this.addItem("backURL"),this.addItem("cashURL"),this.addItem("showHistory"),this.addItem("bonusType"),this.addItem("bonusGames"),this.addItem("bonus"),this.addItem("freespins"),this.addItem("showPrompts"),this.addItem("enableSoundButton"),this.addItem("showSoundButton"),this.addItem("enableFullscreenButton"),this.addItem("showFullscreenButton"),this.addItem("hideCurrency"),this.addItem("winNumbers"),this.addItem("setWinNumbers"),this.addItem("showBetButtons"),this.addItem("showMaxWinRtpMessage"),this.addItem("enableAutospins"),this.addItem("minSpinTime"),this.addItem("showExitButton"),this.addItem("userSupportPageLink"),this.addItem("showRestoreSessionPopup"),this.addItem("restoreState"),this.addItem("maxWinRTP")}addSpinData(){this.addItem("wins"),this.addItem("groupWin"),this.addItem("refactorWins"),this.addItem("symbols"),this.addItem("patterns"),this.addItem("spinData"),this.addItem("extraData"),this.addItem("initfreespin"),this.addItem("initSpin"),this.addItem("respins")}get showBetButtons(){return this.global.showBetButtons}get showRestoreSessionPopup(){return this.global.showRestoreSessionPopup}get showMaxWinRtpMessage(){return this.global.showMaxWinRtpMessage}get enableAutospins(){return this.global.enableAutospins}get minSpinTime(){return this.global.minSpinTime||0}get showExitButton(){return this.global.showExitButton}get userSupportPageLink(){return this.global.userSupportPageLink}get pingUrl(){return this.global.pingUrl}get gameSocket(){return this.global.gameSocket}get maxWinRTP(){return this.global.maxWinRTP}get userApi(){return this.global.userApi}get actionURL(){return this.global.actionURL}get timezoneOffset(){return this.global.timezoneOffset}get gameName(){return this.global.gameName}get rawResponse(){return this.global.rawResponse}get initData(){return this.global.initData}get getAvailableActions(){return this.global.availableActions}get getNextAction(){return this.global.nextActions}get getCurrentAction(){return this.global.currentAction}get rtp(){return this.global.rtp}get backURL(){return this.global.backURL}get showHistory(){return this.global.showHistory}get showPrompts(){return this.global.showPrompts}get enableSoundButton(){return this.global.enableSoundButton}get showSoundButton(){return this.global.showSoundButton}get enableFullscreenButton(){return this.global.enableFullscreenButton}get showFullscreenButton(){return this.global.showFullscreenButton}get hideCurrency(){return this.global.hideCurrency}get cashURL(){return this.global.cashURL}get balance(){return this.global.balance}get currency(){return this.global.currency}get denomination(){return this.global.denomination}get lines(){return this.global.lines}get bet(){return this.global.bet}get ranges(){return this.global.ranges}get totalWin(){return this.global.totalWin}get fsWin(){return this.global.fsWin}get wins(){return this.global.wins}get symbols(){return this.global.symbols}get directory(){return this.global.directory}get patterns(){return this.global.patterns}get spinData(){return this.global.spinData}get extraData(){return this.global.extra}get initfreespin(){return this.global.initfreespin}get initSpin(){return this.global.initSpin}get respins(){return this.global.respins}get groupWin(){return this.global.groupWin}get refactorWins(){return this.global.refactorWins}get giftSpins(){return this.global.giftSpins}get giftFreeSpins(){return this.global.giftFreeSpins}get bonusType(){const e=this.bonusGames&&Object.values(this.bonusGames).find(e=>"START"==e.status);return this.bonus.bonus_name||e.name||Object.keys(this.bonus)[0]}get bonusGames(){return this.global.bonusGames}get bonus(){return this.global.bonusGame}get freespins(){return this.global.freespins}get multiplier(){return this.global.multiplier}get freezeData(){return this.global.freezeData}get winNumbers(){return this.global.winNumbers}get restoreState(){return this.global.restoreState}setWinNumbers(e){this.global.winNumbers=e}setTimezoneOffset(){this.global.timezoneOffset=(new Date).getTimezoneOffset()}setBalance(e){this.global.balance=parseFloat(e)}setBet(e){this.global.bet=parseFloat(e)}setGameSettings(e){this.global.maxWinRTP=e.max_win_in_total_bets}setResponseToStore(e){this._logger.info("data:",e),this._logger.info("extra:",e.spin&&e.spin.extra),this.updateRawResponse(e),this.updateInit(e),this.setNextRequestId(e),this.updateRTP(e),this.updateBalance(e),this.updateDenomination(e),this.updateBet(e),this.updateMultiplier(e),this.updateFreezeData(e),this.updateFixedBet(e),this.updateCurrency(e),this.updateAvailableActions(e),this.updateNextActions(e),this.updateCurrentActions(e),this.updateDirectory(e),this.updateRanges(e),this.updateSymbols(e),this.updateWins(e),this.updateLines(e),this.updatePatterns(e),this.updateSpinData(e),this.updateFsWin(e),this.updateExtra(e),this.updateInitFreespins(e),this.updateInitSpin(e),this.updateGiftSpins(e),this.updateGiftFreeSpins(e),this.updateBonusGames(e),this.updateBonusGame(e),this.updateFreespins(e),this.updateRespins(e),this.updateRestoreState(e)}updateRestoreState({init:e}){this.global.restoreState=(null==e?void 0:e.restorestate)||!1}updateRawResponse(e){this.global.rawResponse=c2d.utils.Object.cloneDeep(e)}updateInit({init:e}){this.global.initData=e}setNextRequestId({init:e}){(null==e?void 0:e.next_request_id)?this.global.nextRequestId=e.next_request_id:this.global.nextRequestId++}updateRTP({init:e}){var t;const n=null===(t=null==e?void 0:e.directory)||void 0===t?void 0:t.rtp;n&&(this.global.rtp=n)}updateBalance({balance:e}){if(!e)return;const{before:t,after:n}=e;this.global.balance=parseFloat(n),this._logger.info("Balance:",this.global.balance)}updateDenomination({denomination:e}){e&&(this.global.denomination=parseFloat(e))}updateBet({init:e,spin:t,initspin:n,initfreespin:s,extrabonus:i}){const o=null==i?void 0:i.spins,{bet:r=this.global.bet}=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),s),n),t),o);this.setBet(r)}updateMultiplier({init:e,spin:t,initspin:n,initfreespin:s,extrabonus:i}){const o=null==i?void 0:i.spins,{multiplier:r=1}=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),s),n),t),o);this.global.multiplier=r}updateFreezeData({init:e,spin:t,initspin:n,initfreespin:s,extrabonus:i}){const o=null==i?void 0:i.spins,{freeze:r}=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),s),n),t),o);this.global.freezeData=r}updateFixedBet({fixedBet:e}){e&&(this.global.fixedBet=parseInt(e,10))}updateCurrency({init:e}){e&&(this.global.currency=this.global.hideCurrency?"":e.currency)}updateAvailableActions({available_actions:e}){e&&(this.global.availableActions=Object.values(e))}updateNextActions({available_actions:e}){e&&(this.global.nextActions=this.global.availableActions.find(e=>"collect"!==e&&"gamble"!==e))}updateCurrentActions({spin:e}){this.global.currentAction=null==e?void 0:e.type}updateDirectory({init:e}){(null==e?void 0:e.directory)&&(this.global.directory=e.directory)}updateLines(e){var t;(null===(t=this.global.directory)||void 0===t?void 0:t.lines)&&(this.global.lines=Array.fromObject(this.global.directory.lines))}updateRanges({init:e}){if(!(null==e?void 0:e.ranges))return;this.global.ranges=e.ranges;const t=e.ranges.bet,n=t[Object.keys(t)[0]];this.global.ranges.bet=Array.fromObject(n)}updateWins({spin:e,macro_round:t}){var n,s,i,o,r;(null===(n=null==t?void 0:t.wins)||void 0===n?void 0:n.total)?this.global.totalWin=t.wins.total:(null===(s=null==e?void 0:e.wins)||void 0===s?void 0:s.total)?this.global.totalWin=e.wins.total:this.global.totalWin=0,this.global.wins={},this.global.wins.total=null===(i=null==e?void 0:e.wins)||void 0===i?void 0:i.total;let a=(null===(o=null==e?void 0:e.wins)||void 0===o?void 0:o.pos_wins)&&Array.fromObject(e.wins.pos_wins),l=(null===(r=null==e?void 0:e.wins)||void 0===r?void 0:r.line_wins)&&Array.fromObject(e.wins.line_wins);a=this.global.wins.posWins=a||[],l=this.global.wins.lineWins=l||[],this.global.groupWin=[...l,...a];const c=this.global.symbols,u=this.global.groupWin.map(e=>{e.pos=Array.fromObject(e.pos);const t=e.pos.map((e,t)=>{const[n,s]=Array.fromObject(e),i=c[n][s];return Object.assign(Object.assign({},i),{column:n,row:s})});return Object.assign(Object.assign({},e),{pos:t})}).sort((e,t)=>e.amount-t.amount||t.code-e.code||e.idx-t.idx);this.global.refactorWins=u}updateSymbols({init:e={},spin:t={},initspin:n={},initfreespin:s={}}){const{symbols:i}=Object.assign(Object.assign(Object.assign(Object.assign({symbols:e.start_symbols},e),n),s),t);e.start_symbols&&this._logger.error("Replace init.start_symbols to init.symbols!"),i&&(this.global.symbols=i)}updateExtra({init:e={},spin:t={},initspin:n={},initfreespin:s={}}){const i=Object.assign(Object.assign(Object.assign(Object.assign({},e.extra),t.extra),n.extra),s.extra);this.global.extra=i}updateInitFreespins({initfreespin:e}){this.global.initfreespin=e}updateInitSpin({initspin:e}){this.global.initSpin=e}updatePatterns({spin:e}){if(this.global.patterns={},!e)return;const{extra:t,symbols:n}=e,{swap_positions:s,move_position:i}=t||{};this.global.patterns.swapSymbols=Array.fromObject(s||[]),this.global.patterns.moveSymbols=Array.fromObject(i||[]),this.global.patterns.replaceSymbols=this.parseReplaceSymbols(n)}parseReplaceSymbols(e){const t=[];return Array.fromObject(e).forEach((e,n)=>{Array.fromObject(e).forEach(({extra:e},s)=>{e&&void 0!==e.replace&&t.push({column:n,row:s,id:e.replace})})}),t}updateSpinData({spin:e}){this.global.spinData=e}updateFsWin({spin:e}){var t;this.global.fsWin=null===(t=null==e?void 0:e.freespins)||void 0===t?void 0:t.wins.total}updateGiftSpins({extrabonus:e}){this.global.giftSpins=null==e?void 0:e.spins}updateGiftFreeSpins({extrabonus:e}){this.global.giftFreeSpins=null==e?void 0:e.freespins}updateBonusGames({bonus_games:e}){e&&(this.global.bonusGames=e)}updateBonusGame({bonus:e={},initbonus:t={}}){this.global.bonusGame=Object.assign(Object.assign({},t),e)}updateFreespins({initfreespin:e={},spin:t={}}){const{freespins:n}=Object.assign(Object.assign({},e),t);this.global.freespins=n}updateRespins({spin:e}){this.global.respins=null==e?void 0:e.respin_chain}updateInitBonus({initbonus:e={}}){this.global.initbonus=e}};i=s([modifiable],i),n.NetworkStore=i},{}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./Network"),i=e("./NetworkHandler"),o=e("./NetworkStore");e("./modifications/bonusbuy/index");const r={Component:s.Network,Handler:i.NetworkHandler,Store:o.NetworkStore};game.componentsManager.registerComponent("Network",r)},{"./Network":112,"./NetworkHandler":113,"./NetworkStore":114,"./modifications/bonusbuy/index":118}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../Network").Network;class i extends s.Latest{paramsForRequest(){let e=super.paramsForRequest();if(this.store.bonusBuy){const{params:t}=this.store.bonusBuy;e=Object.assign(Object.assign({},t),e)}return e}}s.modify(i)},{"../../Network":112}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../../NetworkStore").NetworkStore;class i extends s.Latest{addToGlobal(){super.addToGlobal(),this.addItem("bonusBuy"),this.addItem("setBonusBuy")}get bonusBuy(){return this.global.bonusBuy}setBonusBuy(e){this.global.bonusBuy=e}setResponseToStore(e){super.setResponseToStore(e),this.setBonusBuy(null)}}s.modify(i)},{"../../NetworkStore":114}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./NetworkBonusBuy"),e("./NetworkBonusBuyStore")},{"./NetworkBonusBuy":116,"./NetworkBonusBuyStore":117}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SlideIntro=void 0;class s extends game.sources.Component{build(e){this.controller.build(e)}destroy(e){this.controller.destroy(e)}clickCloseButton(){const e=this.view.tree.nodeMap.skipButton;e||console.error("Intro close button not initialize."),e.clickAction()}clickShowToggle(){var e;const t=null===(e=this.view.tree)||void 0===e?void 0:e.nodeMap.tumbler;t||console.error("Intro show toggle not initialize."),t.clickAction()}getShowToggleState(){var e;const t=null===(e=this.view.tree)||void 0===e?void 0:e.nodeMap.tumbler;return t?!!(t.toggleIndex%2):(console.error("Intro show toggle not initialize."),null)}clickSlideButton(e){var t;const n=null===(t=this.view.steps[e])||void 0===t?void 0:t.slideButton;n||console.error(`Intro slide button ${e} not initialize.`),n.clickAction()}clickPreviousButton(){const e=this.view.tree.nodeMap.swipe_button_prev;e||console.error("Intro previous button not initialize."),e.clickAction()}clickNextButton(){const e=this.view.tree.nodeMap.swipe_button_next;e||console.error("Intro next button not initialize."),e.clickAction()}getCurrentSlideIndex(){return this.view.currentSlide}getSlidesCount(){return this.view.steps.length}}n.SlideIntro=s},{}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SlideIntroController=void 0;class s extends game.sources.Controller{build(e){this.view.build(),this.view.addSkipButtonListener(e),this.view.addShowToggleListener(e=>{this.store.setSkipIntro(e)})}destroy(e){this.view.destroy(e)}}n.SlideIntroController=s},{}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SlideIntroHandler=void 0;class s extends game.sources.Handler{get statesConfig(){return{Intro:{check:this.checkIntro,enter:this.onIntroEnter,exit:this.onIntroExit}}}checkIntro(){return!this.component.store.isIntroSkipped}onIntroEnter({finish:e}){this.component.build(e)}onIntroExit({finish:e}){this.component.destroy(e)}}n.SlideIntroHandler=s},{}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SlideIntroStore=void 0;class s extends game.sources.Store{get isIntroSkipped(){return!this.getItem("showIntro")}get setSkipIntro(){return this.getItem("setShowIntro")}}n.SlideIntroStore=s},{}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SlideIntroView=void 0;class s extends game.sources.FactoryView{build(){const e=this.layers.intro;this.actionIndex=0,this.settings=this.assetsStore.getConfig("settings"),this.buildTree("intro_tree",e);const t=Object.values(this.tree.nodeMap);this.steps=t.filter(e=>{var t;return 0===(null===(t=e.name)||void 0===t?void 0:t.indexOf("step"))}).sort((e,t)=>e.name.localeCompare(t.name)).map((e,t)=>{const n=t+1;return{slideButton:this.tree.nodeMap[`slideButton_${n}`],buttonLabel:this.tree.nodeMap[`slide_${n}_buttonLabel`],description:this.tree.nodeMap[`slide_${n}_description`],step:e}}),this.addListeners(),this.startAutoplay()}startAutoplay(){this.abortAutoplay(),this.delay=c2d.Timeout.invoke(()=>{this.delay=null,this.increaseActionIndex(),this.showActualSlide(),this.startAutoplay()},this.settings.delay)}abortAutoplay(){this.delay&&(c2d.Timeout.clear(this.delay),this.delay=null)}addShowToggleListener(e){const t=this.tree.nodeMap.tumbler;t.setHandlers(()=>{const n=!(t.toggleIndex%2);e(n)})}addSkipButtonListener(e){this.closeHandler=e,this.tree.nodeMap.skipButton.addButtonListener("pointerDown",e)}showActualSlide(){this.isOneSlideIntro||(this.steps.forEach(({buttonLabel:e,step:t,slideButton:n,description:s},i)=>{const o=this.actionIndex===i;e.visible=o,s.visible=o,this.updateSlideVisibility(t,o),n.setStates(o?"active":"normal")}),this.currentSlide=this.actionIndex)}updateSlideVisibility(e,t){e.visible=t,e instanceof c2d.display.Spine&&(t?e.play(e.lastFactoryAnimation,{loop:!0}):e.stop())}increaseActionIndex(){this.actionIndex=this.actionIndex===this.stepsAmount-1?0:this.actionIndex+1}decreaseActionIndex(){this.actionIndex=0===this.actionIndex?this.stepsAmount-1:this.actionIndex-1}addListeners(){this.showActualSlide(),this.isOneSlideIntro||this.steps.forEach(({slideButton:e},t)=>{e.clickAction=()=>{this.abortAutoplay(),this.actionIndex=t,this.showActualSlide()},e.on("pointerup",e.clickAction)});const e=()=>{this.abortAutoplay(),this.decreaseActionIndex(),this.showActualSlide()},t=()=>{this.abortAutoplay(),this.increaseActionIndex(),this.showActualSlide()};if(this.tree.nodeMap.touchArea){let n;const{swipeSize:s}=this.settings;this.tree.nodeMap.touchArea.on("pointerdown",e=>{this.abortAutoplay(),n=e.data.global.x}).on("pointerup",i=>{n&&!this.isOneSlideIntro&&(i.data.global.x-n>s?e():i.data.global.x-n<-s&&t(),n=null)})}const n=this.tree.nodeMap.swipe_button_prev,s=this.tree.nodeMap.swipe_button_next;n&&n.setHandlers(e),s&&s.setHandlers(t)}destroy(e){this.abortAutoplay(),this.tree&&(this.tree.mainNode.destroy(),this.tree=null,this.steps=null,e())}get isOneSlideIntro(){return this.stepsAmount<2}get stepsAmount(){return this.steps.length}}n.SlideIntroView=s},{}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./SlideIntro"),i=e("./SlideIntroController"),o=e("./SlideIntroStore"),r=e("./SlideIntroHandler"),a=e("./SlideIntroView"),l={Component:s.SlideIntro,Handler:r.SlideIntroHandler,Store:o.SlideIntroStore,Controller:i.SlideIntroController,View:a.SlideIntroView};game.componentsManager.registerComponent("SlideIntro",l)},{"./SlideIntro":119,"./SlideIntroController":120,"./SlideIntroHandler":121,"./SlideIntroStore":122,"./SlideIntroView":123}],125:[function(e,t,n){"use strict";e("core-js/modules/es.promise");var s=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.Tournament=void 0;class i extends game.sources.Component{init(){return s(this,void 0,void 0,(function*(){yield this.controller.init()}))}startAutoupdate(){this.controller.startAutoupdate()}stopAutoupdate(){this.controller.stopAutoupdate()}disableTournamentButton(){this.controller.disableTournamentButton()}enableTournamentButton(){this.controller.enableTournamentButton()}}n.Tournament=i,n.Tournament=i=c2d.utils.decorators.modifiable(i)},{"core-js/modules/es.promise":306}],126:[function(e,t,n){"use strict";e("core-js/modules/es.promise");var s=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TournamentController=void 0;const i=e("./TournamentServerManager.js");class o extends game.sources.Controller{constructor(e){super(e),this._serverManager=new i.default}init(){return s(this,void 0,void 0,(function*(){yield this._serverManager.init({tournamentStatusChanged:e=>this.onTournamentStatusChanged(e),positionUpdate:e=>this.onPositionUpdate(e)}),yield this._updateTournaments(),yield this._updateUserPosition(),this.view.build(),this.view._serverManager=this._serverManager}))}startAutoupdate(){}stopAutoupdate(){}_updateTournaments(){return s(this,void 0,void 0,(function*(){const e=yield this._serverManager.requestTournamentsList();this.store.updateTournaments(e),this.view.updateTournaments()}))}_updateUserPosition(){return s(this,void 0,void 0,(function*(){if(this.store.currentTournament){const e=yield this._serverManager.requestUserPosition(this.store.currentTournament.id);this.onPositionUpdate(e)}}))}_updateLeaderboard(){return s(this,void 0,void 0,(function*(){if(this.store.currentTournament){const e=yield this._serverManager.requestTournamentLeaderboard(this.store.currentTournament.id);this.store.updateLeaderboard(e),this.view.updateLeaderboard()}}))}onTournamentStatusChanged(){return s(this,void 0,void 0,(function*(){if(yield this._updateTournaments(),this.store.currentTournament){const e=yield this._serverManager.requestUserPosition(this.store.currentTournament.id);this.store.clearUserData(),this.store.updateUserData(e.position,e.score),this.view.updateButtonWithTimer(),this._updateLeaderboard()}}))}onPositionUpdate(e){this.store.updateUserData(null==e?void 0:e.position,null==e?void 0:e.score),this.view.updateUserPosition()}disableTournamentButton(){this.view.disableTournamentButton()}enableTournamentButton(){this.view.enableTournamentButton(),this.view.updateUserPosition()}}n.TournamentController=o,n.TournamentController=o=c2d.utils.decorators.modifiable(o)},{"./TournamentServerManager.js":128,"core-js/modules/es.promise":306}],127:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TournamentHandler=void 0;class s extends game.sources.Handler{get statesConfig(){return{Init:{enter:this.onInitEnter},Idle:{begin:this.onIdleBegin},Gifts:{begin:this.onIdleBegin}}}onInitEnter(e){let{finish:t}=e;this.component.init().then(t)}onIdleBegin(e){let{finish:t}=e;this.component.startAutoupdate(),this.component.enableTournamentButton();return t(),{onFinish:()=>{this.component.stopAutoupdate(),this.component.disableTournamentButton()}}}}n.TournamentHandler=s,n.TournamentHandler=s=c2d.utils.decorators.modifiable(s)},{}],128:[function(e,t,n){"use strict";e("core-js/modules/es.promise");var s=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(){this._baseUrl="",this._token=null,this._currency=null,this._language=null}init(e){return s(this,void 0,void 0,(function*(){const{api:t,user:n}=game.application.setup.tournament;this._baseUrl="".concat(t.host).concat("tsb/api/v1","/tournament"),this._token=t.token,this._currency=n.currency,this._language=n.language,yield this._initSocket(e)}))}requestTournamentsList(){return s(this,void 0,void 0,(function*(){const e="".concat(this._baseUrl,"?currency=").concat(this._currency,"&lang=").concat(this._language,"&token=").concat(this._token),t=yield this._sendRequest(e);return null==t?void 0:t.list}))}requestTournamentLeaderboard(e){var t;return s(this,void 0,void 0,(function*(){const n="".concat(this._baseUrl,"/").concat(e,"/result?currency=").concat(this._currency),s=yield this._sendRequest(n);return null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.result}))}requestUserPosition(e){return s(this,void 0,void 0,(function*(){const t="".concat(this._baseUrl,"/").concat(e,"/position?currency=").concat(this._currency,"&token=").concat(this._token),n=yield this._sendRequest(t);return null==n?void 0:n.data}))}_sendRequest(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState)if(200===n.status&&n.responseText.length)try{t(JSON.parse(n.responseText))}catch(e){t(null)}else t(null)},n.onerror=()=>t(null),n.open("GET",e,!0),n.send()})}))}_requestSocketConfig(){return s(this,void 0,void 0,(function*(){const e="".concat(this._baseUrl,"/socket?token=").concat(this._token);return this._sendRequest(e)}))}_initSocket(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{c2d.transport.init(),c2d.transport.setReadyHandler(()=>{t()}),c2d.transport.setResponseHandler(t=>{try{const{payload:n}=t;n.name in e&&e[n.name](n)}catch(e){console.error("ServerManager: error:",e)}})})}))}}},{"core-js/modules/es.promise":306}],129:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.TournamentStore=void 0;class s extends game.sources.Store{constructor(){super(...arguments),this._tournaments=[],this._currentTournament=null,this._leaderboard=[],this._ranges=[],this._userPosition=null,this._userPosition=null}get tournaments(){return this._tournaments}get currentTournament(){return this._currentTournament}get isCurrentTournamentImmediatelyUpdates(){return["money_total_bets","total_spins"].includes(this.currentTournament.rankingType)}updateTournaments(e){if(!e)return;const t=this.ranges;e.forEach(e=>{const n=t.find(t=>t>=+e.minimalBetAmount);e.minBet=n}),this._tournaments=e,this._currentTournament=e.first,this.updateMinBet()}get ranges(){return this._ranges.length>0||(this._ranges=this.getItem("ranges").bet.slice()),this._ranges}get leaderboard(){return this._leaderboard}updateLeaderboard(e){this._leaderboard=e}get userPosition(){return this._userPosition}get userScore(){return this._userScore}get betRanges(){return this.getItem("ranges").bet}get currency(){return this.getItem("currency")}get currentTournamentIsPending(){var e;return"pending"===(null===(e=this.currentTournament)||void 0===e?void 0:e.status)}updateMinBet(){this._tournaments.forEach(e=>{const{minBet:t}=e;e.updatedMinBet="".concat(t," ").concat(this.currency)})}clearUserData(){this._userPosition=null,this._userScore=null}updateUserData(e,t){this._userPosition=e,this._userScore=t}}n.TournamentStore=s,n.TournamentStore=s=c2d.utils.decorators.modifiable(s)},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],130:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),e("core-js/modules/es.promise");var s=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TournamentView=void 0;const i=e("./prefab/TournamentList.js"),o=e("./prefab/LeaderBoardTable.js"),r=e("./prefab/Timer.js"),a=e("./prefab/RulesText.js");class l extends game.sources.FactoryView{constructor(e){super(e),this.welcomeScreenTimer=null}build(e){if(this._interactive=!0,!this.store.currentTournament)return;this.buildTree(e),this.initTournamentList(),this.initLeaderBoard(),this.initRules(),this.addButtonsHandler(),this.createTimerForButton();const{currentTournament:t}=this.store;"finished"!==(null==t?void 0:t.status)&&this.showTournamentWelcomeScreen()}buildTree(){const e=this.layers.tournament;super.buildTree("tournament_tree",e),this.buildButton(),this.updateUserPosition(),this.disableTournamentButton()}buildButton(){const e={__prefab:"tournament_button",name:"tournamentButton"};e.__prefabs=Object.assign({},this.getPrefabs());const t={texts:this.getTexts(),styles:this.getStyles(),textures:this.assetsStore.textures,skeletons:this.assetsStore.skeletons},n=new c2d.display.Container;this.buttonTree=new c2d.display.FactoryTree({config:e,parent:n,variables:t}),this.layers.custom_buttons.addChild(n)}addButtonsHandler(){this.buttonTree.nodeMap.tournamentButton.addButtonListener("pointerDown",()=>this.showTournamentScreen()),this.tree.nodeMap.tournamentScreen.nodeMap.closeButton.pointerup=()=>this.closeTournamentScreen(),this.tree.nodeMap.rules.nodeMap.backButton.pointerup=()=>this.hideWindows(),this.tree.nodeMap.leaderboard.nodeMap.backButton.pointerup=()=>this.hideWindows()}initTournamentList(){this.tournamentList=new i.default(this.tree,this.tree.variables,this.getPrefabs()),this.tournamentList.update(this.store.tournaments),this.tournamentList.rulesHandler=e=>{this.showRules(e)},this.tournamentList.leaderBoardHandler=e=>{this.showLeaderBoard(e)}}initRules(){this.rulesText=new a.default(this.tree,this.tree.variables,this.getPrefabs())}initLeaderBoard(){this.leaderBoardTable=new o.default(this.tree,this.tree.variables,this.getPrefabs()),this.leaderBoardTable.rulesHandler=e=>{this.showRules(e)}}updateTournaments(){var e;null===(e=this.tournamentList)||void 0===e||e.update(this.store.tournaments),this.updateUserPosition()}updateLeaderboard(){}updateUserPosition(){if(!this.buttonTree)return;const{userScore:e,userPosition:t,isCurrentTournamentImmediatelyUpdates:n,currentTournamentIsPending:s,currentTournament:i}=this.store;if(!n&&!this.isTournamentButtonActive)return;const o=PIXI.Texture.from(i.icon);this.updateVisualButtonData(t,e,s,o)}updateButtonWithTimer(){this.updateUserPosition(),this.createTimerForButton()}updateVisualButtonData(e,t,n,s){this.buttonTree.nodeMap.position.text=e?"#".concat(e):"#----",this.buttonTree.nodeMap.points.text=n?"Starts in":c2d.type.isNumber(t)?"".concat(t," pt"):"----pt",this.buttonTree.nodeMap.icon.texture=s}createTimerForButton(){this.tournamentButtonTimer&&(this.tournamentButtonTimer.destroy(),this.tournamentButtonTimer=null);const{finishDateTime:e,startDateTime:t}=this.store.currentTournament,n=new Date(1e3*t)>new Date,s=n?t:e,i=this.buttonTree.nodeMap.tournamentButton.nodeMap.leftTime;this.tournamentButtonTimer=new r.default(s,e=>{let{days:t,hours:n,minutes:s,seconds:o}=e;i.text=t<=0?"".concat(n,"h:").concat(s,"m:").concat(o,"s"):"".concat(t,"d:").concat(n,"h:").concat(s,"m")},()=>{this.tournamentButtonTimer&&(this.tournamentButtonTimer.destroy(),this.tournamentButtonTimer=null),n||(i.text="Finished")});const{currentTournament:o}=this.store}showTournamentScreen(){this.tree.nodeMap.tournamentScreen.visible=!0}showTournamentWelcomeScreen(){const e=this.tree.nodeMap.tournamentWelcomeScreen,{finishDateTime:t,startDateTime:n,prizeLineNumber:s,updatedMinBet:i,prizeCurrency:o,prizeFund:a,texts:l,logo:c}=this.store.currentTournament,u=new Date(1e3*n)>new Date,h=u?n:t,d=PIXI.Texture.from(c);e.nodeMap.timer_text.text=u?"Starts in":"Ends in",e.nodeMap.start_text.text=l.title,e.nodeMap.type.text=l.ranking,a?(e.nodeMap.prize_pool_layout.visible=!0,e.nodeMap.prize_pool.text="".concat(a," ").concat(o)):e.nodeMap.prize_pool_layout.visible=!1,e.nodeMap.prizes.text=s,e.nodeMap.bet_level.text=i,e.nodeMap.logo.texture=d,e.nodeMap.closeButton.pointerup=()=>{this.closeTournamentWelcomeScreen()},e.nodeMap.welcome_close_button.pointerup=()=>{this.closeTournamentWelcomeScreen()},e.nodeMap.info_layout.onTreeDidUpdate(),this.welcomeScreenTimer=new r.default(h,t=>{let{days:n,hours:s,minutes:i,seconds:o}=t;n<=0?(e.nodeMap.timer_days.text=s,e.nodeMap.timer_0_description.text="Hours",e.nodeMap.timer_hours.text=i,e.nodeMap.timer_1_description.text="Minutes",e.nodeMap.timer_minutes.text=o,e.nodeMap.timer_2_description.text="Seconds"):(e.nodeMap.timer_days.text=n,e.nodeMap.timer_0_description.text="Days",e.nodeMap.timer_hours.text=s,e.nodeMap.timer_1_description.text="Hours",e.nodeMap.timer_minutes.text=i,e.nodeMap.timer_2_description.text="Minutes")},()=>{}),e.visible=!0}closeTournamentScreen(){this.tree.nodeMap.tournamentScreen.visible=!1,this.hideWindows()}onResizeScreen(){var e,t;super.onResizeScreen(),this.updateButton(),game.device.desktop||(null===(e=this.leaderBoardTable)||void 0===e||e.onOrientationChange(),null===(t=this.rulesText)||void 0===t||t.onOrientationChange())}closeTournamentWelcomeScreen(){const e=this.tree.nodeMap.tournamentWelcomeScreen;this.welcomeScreenTimer&&(this.welcomeScreenTimer.destroy(),this.welcomeScreenTimer=null),e.visible=!1}showRules(e){let{rules:t,title:n}=e;this.tree.nodeMap.rules.nodeMap.tournament_name.text=n,this.tree.nodeMap.rules.visible=!0,this.rulesText.update(t)}hideWindows(){this.tree.nodeMap.rules.visible=!1,this.tree.nodeMap.leaderboard.visible=!1,this.leaderBoardTable.hideLeaderBoard()}disableTournamentButton(){this.buttonTree&&(this.buttonTree.nodeMap.tournamentButton.setStates("disabled"),this.buttonTree.nodeMap.tournamentButton.interactive=!1)}enableTournamentButton(){this.buttonTree&&(this.buttonTree.nodeMap.tournamentButton.setStates("normal"),this.buttonTree.nodeMap.tournamentButton.interactive=!0)}showLeaderBoard(e){return s(this,void 0,void 0,(function*(){const t=(yield this._serverManager.requestTournamentsList()).find(t=>{let{id:n}=t;return n===e}),n=yield this._serverManager.requestTournamentLeaderboard(e),s=yield this._serverManager.requestUserPosition(e);this.leaderBoardTable.showLeaderBoard({tournament:t,leaderBoard:n,user:s}),this.tree.nodeMap.leaderboard.nodeMap.rulesButton.pointerup=()=>{this.showRules(t.texts),this.leaderBoardTable.hideLeaderBoard(),this.tree.nodeMap.leaderboard.visible=!1},this.tree.nodeMap.leaderboard.nodeMap.tournament_name.text=t.texts.title,this.tree.nodeMap.leaderboard.visible=!0}))}updateButton(){if(!this.buttonTree)return;const e={__prefab:"tournament_button",name:"tournamentButton"};e.__prefabs=Object.assign(Object.assign({},this.getPrefabs()),this._prefabs),this.buttonTree.update(e)}get isTournamentButtonActive(){return this.buttonTree.nodeMap.tournamentButton.interactive}}n.TournamentView=l,n.TournamentView=l=c2d.utils.decorators.modifiable(l)},{"./prefab/LeaderBoardTable.js":133,"./prefab/RulesText.js":134,"./prefab/Timer.js":135,"./prefab/TournamentList.js":136,"core-js/modules/es.object.assign":305,"core-js/modules/es.promise":306}],131:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./Tournament.js"),i=e("./TournamentHandler.js"),o=e("./TournamentStore.js"),r=e("./TournamentController.js"),a=e("./TournamentView.js");class l extends game.sources.Component{}const c={Component:s.Tournament,Handler:i.TournamentHandler,Store:o.TournamentStore,Controller:r.TournamentController,View:a.TournamentView};jsvars.tournament?game.componentsManager.registerComponent("Tournament",c):game.componentsManager.registerComponent("Tournament",{Component:l})},{"./Tournament.js":125,"./TournamentController.js":126,"./TournamentHandler.js":127,"./TournamentStore.js":129,"./TournamentView.js":130}],132:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=class{buildDynamicTree(e,t,n){return new c2d.display.FactoryTree({config:e,parent:t,variables:n})}}},{}],133:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./DynamicTree.js");class i extends s.default{constructor(e,t,n){super(),this.parent=e.nodeMap.tournamentTableRoot,this.variables=t,this.textures=t.textures,this.prefabs=n,this.data=null}update(e){this._isActive&&(this.data=e,this._clear(),this._createTable(e),this.parent.nodeMap.leaderBoardContainer.onTreeDidUpdate(),this.parent.nodeMap.tournamentTableScroller.onTreeDidUpdate())}showLeaderBoard(e){this._isActive=!0,this.update(e)}hideLeaderBoard(){this._isActive=!1}onOrientationChange(){this.data&&this.update(this.data)}_createTable(e){const{tournament:t,user:n,leaderBoard:s}=e,{prizes:i,prizeLineNumber:o}=t,r=[];i.forEach(e=>{for(let t=0;t<o+1;t++)t>=e.top&&t<=e.bottom&&r.push(e.text)});for(let e=0;e<o;e++)if(s[e])s[e].prize=r[e];else{const t={position:e+1,name:"",score:"",result:r[e]};s.push(t)}if(n.position)if(n.position>o)this.updateUserRating(Object.assign(Object.assign({},n),{result:""}));else{const e=s.find(e=>{let{position:t}=e;return t===n.position});this.updateUserRating(e)}else this.parent.nodeMap.rating_container.visible=!1,this.parent.nodeMap.tournamentTableScroller.position.y=0;s.forEach(e=>{let{position:t,name:s,score:i,result:o}=e;const r={__prefab:"tournament_table_item"},a=t%2==0;let l=a?"0x000000":"${styles.color__primary}",c=a?0:1;t===n.position&&(l="0x5CA2F8",c=.3);const u={color:l,alpha:c,position_text:t,id_text:s,score_text:i,result_text:o},h=Object.assign(Object.assign({},this.variables),u);r.__prefabs=Object.assign({},this.prefabs);const d=new c2d.display.Container;d._bounds.customBounds=[0,0,null,72],this.buildDynamicTree(r,d,h),this.parent.nodeMap.leaderBoardContainer.addChild(d)})}updateUserRating(e){let{position:t,name:n,score:s,result:i}=e;const{rating_container:o,tournamentTableScroller:r}=this.parent.nodeMap;r.position.y=72,o.visible=!0,o.nodeMap.position_text.text=t,o.nodeMap.id_text.text=n,o.nodeMap.score_text.text=s,o.nodeMap.result_text.text=i}_clear(){this.parent.nodeMap.leaderBoardContainer.removeChildren()}}n.default=i},{"./DynamicTree.js":132,"core-js/modules/es.object.assign":305}],134:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./DynamicTree.js");class i extends s.default{constructor(e,t,n){super(),this.parent=e.nodeMap.rules_scroll,this.variables=t,this.textures=t.textures,this.prefabs=n,this.text=null}update(e){this.text=e,this._clear(),this._createRules(e),this.parent.onTreeDidUpdate()}_createRules(e){const t=e.split("\r\n\r\n"),{_relative:n}=this.parent.nodeMap.rules_text_container._variables,s=c2d.display.Factory.calcProperty("$[100pw - 20]",n.size);t.forEach((e,t)=>{const n={__type:"TextField",style:"${styles.text}",wordWrapWidth:s,text:e},i=Object.assign({},this.variables);n.__prefabs=Object.assign({},this.prefabs);const o=new c2d.display.Container;this.buildDynamicTree(n,o,i),this.parent.nodeMap.rules_text_container.addChild(o),this.parent.nodeMap.rules_text_container.onTreeDidUpdate()})}onOrientationChange(){this.text&&this.update(this.text)}_clear(){this.parent.nodeMap.rules_text_container.removeChildren()}}n.default=i},{"./DynamicTree.js":132,"core-js/modules/es.object.assign":305,"core-js/modules/es.string.split":309}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e=>e>9?e:"0"+e;n.default=class{constructor(e,t,n){this.finishDate=1e3*e,this._updateHandler=t,this._finishHandler=n,this._isStarted=!1,this._tickTimer=null,this.startTimer()}startTimer(){this._isStarted||(this._isStarted=!0,this.tick())}tick(){const e=new Date(this.finishDate)-new Date;if(e<=0)this.stopTimer();else{const t=new Date(e),n={days:s(Math.floor(t/864e5)),hours:s(Math.floor(t/36e5%24)),minutes:s(Math.floor(t/6e4%60)),seconds:s(Math.floor(t/1e3%60))};this._updateHandler(n),this._tickTimer=c2d.call(()=>this.tick(),1)}}stopTimer(){this._isStarted=!1,this._updateHandler({days:"00",hours:"00",minutes:"00",seconds:"00"}),this._finishHandler()}destroy(){this._tickTimer&&c2d.Timeout.clear(this._tickTimer),this._isStarted=!1}}},{}],136:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./DynamicTree.js"),i=e("./Timer.js");class o extends s.default{constructor(e,t,n){super(),this.tournaments=[],this.parent=e.nodeMap.tournamentListRoot,this.variables=t,this.textures=t.textures,this.prefabs=n,this.rulesHandler=()=>{},this.leaderBoardHandler=()=>{}}update(e){this._clear(),e.forEach((t,n)=>{this._createTournament(e[n],n)}),this.parent.nodeMap.tournamentContainer.onTreeDidUpdate(),this.parent.nodeMap.body_center.onTreeDidUpdate()}onOrientationChange(){}_createTournament(e,t){const n=this._createTournamentFromConfig(e,t);this.tournaments.push(n),n.container&&this.parent.nodeMap.tournamentContainer.addChild(n.container)}_createTournamentFromConfig(e,t){const{id:n,games:s,finishDateTime:o,startDateTime:r,prizeLineNumber:a,logo:l,updatedMinBet:c,name:u,prizeCurrency:h,prizeFund:d,status:p,texts:m}=e,f=PIXI.Texture.from(l),g={__prefab:"tournament_pin",name:"pin_".concat(t)},b=s.map(e=>{let{title:t}=e;return t}).join("\n"),_={tournament_type:m.type,game_name:m.title,icon_tournament:f,prize_pool:"".concat(d," ").concat(h),prize_pool_alpha:d>0?1:0,tournament_info_name:m.title,tournament_info_type:m.ranking,tournament_info_prize_pool:"".concat(d," ").concat(h),tournament_info_prizes:a,tournament_info_bet_level:c,tournament_info_games:b},y=Object.assign(Object.assign({},this.variables),_);g.__prefabs=Object.assign({},this.prefabs);const S=new c2d.display.Container;S._bounds.customBounds=[0,0,462,650];const w=this.buildDynamicTree(g,S,y).nodeMap["pin_".concat(t)];w.setStates(p),w.nodeMap.info_btn.pointerup=()=>{w.nodeMap.tournament_info._visible=!0},w.nodeMap.rules_btn.pointerup=()=>{this.rulesHandler(m)},w.nodeMap.leaderboard_button.pointerup=()=>{this.leaderBoardHandler(n)},w.nodeMap.close_info.pointerup=()=>{w.nodeMap.tournament_info._visible=!1};const v=new Date(1e3*r)>new Date,M=v?r:o;return{timer:new i.default(M,e=>{let{days:t,hours:n,minutes:s,seconds:i}=e;t<=0?(w.nodeMap.timer_days.text=n,w.nodeMap.timer_0_description.text="Hours",w.nodeMap.timer_hours.text=s,w.nodeMap.timer_1_description.text="Minutes",w.nodeMap.timer_minutes.text=i,w.nodeMap.timer_2_description.text="Seconds"):(w.nodeMap.timer_days.text=t,w.nodeMap.timer_0_description.text="Days",w.nodeMap.timer_hours.text=n,w.nodeMap.timer_1_description.text="Hours",w.nodeMap.timer_minutes.text=s,w.nodeMap.timer_2_description.text="Minutes")},()=>{v||(w.nodeMap.finish_text.visible=!0,w.nodeMap.numbers_container.visible=!1)}),container:S}}_clear(){this.tournaments.forEach(e=>{let{timer:t}=e;return t.destroy()}),this.tournaments=[],this.parent.nodeMap.tournamentContainer.removeChildren()}}n.default=o},{"./DynamicTree.js":132,"./Timer.js":135,"core-js/modules/es.object.assign":305}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.VisualComponent{onInitialize(){const e=this.getConfig("styles_text"),t={resolution:1,chars:game.localization.uniqueChars};PIXI.BitmapText.breakWords=["zh","zhtw","ja"].includes(game.loader.language),Object.entries(e).forEach(([e,n])=>{const s=PIXI.BitmapFont.from(e,n,t);n.lineHeight&&(s.lineHeight=n.lineHeight),s.__style=n})}}n.default=s},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./UIFactory");game.componentsManager.registerComponent("UIFactory",{Component:s.default})},{"./UIFactory":137}],139:[function(e,t,n){"use strict";function s(e){this.Latest=e;const t=Object.getOwnPropertyDescriptors(e.prototype),n=Object.getPrototypeOf(e.prototype);Object.defineProperties(this.prototype,t),Object.setPrototypeOf(this.prototype,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.modifiable=void 0,n.modifiable=function(e){const t=Object.getOwnPropertyDescriptors(e.prototype),n=Object.getPrototypeOf(e.prototype);class i extends e{}return Object.defineProperties(i.prototype,t),Object.setPrototypeOf(i.prototype,n),i.Latest=e,i.modify=s,i}},{}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;const s=e("./components/ComponentsManager"),i=e("./GameController"),o=e("./LayersManager"),r=e("./integration/RemoteApi"),a=e("./components/inner/index");n.Game=class{constructor({application:e}){this.enableAudioOnResume=!1,this.paused=!1,this.systemPaused=!1,this.application=e,this.initialize(),this.addSignals()}initialize(){this.localStorage=new c2d.store.LocalStorage(this.application.title),this.assetsStore=new c2d.store.AssetsStore,this.cookies=new c2d.store.Cookies(this.application.title),this.device=new c2d.Device,this.audioManager=new c2d.AudioManager;const e={device:this.device,canvasConfig:this.application.canvas,resizeHandler:e=>this.onResizeScreen(e)};this.layout=c2d.Layout.create(e);const t={application:this.application,platform:this.device.type,language:jsvars.language,resourcesDirectory:this.device.resourcesResolution,respectVersions:!1!==jsvars.respectVersions};this.loader=new c2d.Loader(t),this.engine=new c2d.Engine(this.layout.canvas),this.localization=c2d.Localization,this.size={gameField:{x:0,y:0,width:0,height:0}},this.gameController=new i.GameController(this),this.componentsManager=new s.ComponentsManager,this.components=this.componentsManager.components,this.sources=a.sources,this.inactiveHandler(),this.remoteApi=new r.RemoteApi,this.remoteApi.pauseHandler=e=>{this.paused=e,this.checkNeedPause()},c2d.time.start()}checkNeedPause(){this.systemPaused||this.paused?this.pause():this.resume()}inactiveHandler(){let e,t,n,s=this;void 0!==document.hidden?(e="hidden",n="visibilitychange",t="visibilityState"):void 0!==document.mozHidden?(e="mozHidden",n="mozvisibilitychange",t="mozVisibilityState"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange",t="msVisibilityState"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange",t="webkitVisibilityState"),document.addEventListener(n,(function(){s.systemPaused="visible"!==document[t],s.checkNeedPause()}),!1)}addSignals(){this.signals={onGoToUrl:new c2d.Signal,onApplicationReady:new c2d.Signal,onAudioEnabled:new c2d.Signal}}run(e){this._hidePreLoader=e,c2d.series([this.createCanvas,[this.loadLayers,this.loadFSM],this.createLayers,this.createFSM,this.createComponents,this.loadGameResources,this.startGame],this)}pause(){c2d.time.pause(),this.engine.pause(),this.enableAudioOnResume=game.isAudioEnabled(),this.setAudioEnabled(!1)}resume(){c2d.time.resume(),this.engine.resume(),this.enableAudioOnResume&&this.setAudioEnabled(!0)}loadComplete(){this._hidePreLoader(),this.loadAudio(),this.signals.onApplicationReady.emit(),this.remoteApi.onLoad()}loadLayers(e){const t=`${this.loader.paths.game}data/layers.json`;this.loader.add("layers",t,e)}createLayers(e){this.layers=new o.LayersManager;const t=this.loader.resources.layers.data;this.layers.initialize(this.engine.stage,t),e()}createCanvas(e){this.engine.createCanvas(this.device,this.application.renderer),e()}onResizeScreen(e){this.size=e,this.engine.resize(e.canvasField.width,e.canvasField.height,e.scale),this.layers&&this.layers.resize(this.size),Object.values(this.components).forEach(t=>t.resizeScreen(e))}createComponents(e){this.gameController.instantiateComponents(this.application.components),e()}loadGameResources(e){this.gameController.loadGame(e)}loadFSM(e){const t=`${this.loader.paths.game}data/fsm.json`;this.loader.add("fsm",t,e),this.loader.load()}createFSM(e){const t=new c2d.fsm.FSMConfig(this.loader.resources.fsm.data);this.fsm=new c2d.fsm.FSM(t,this.componentsManager.handlers),e()}startGame(e){this.gameController.createComponents(this.application.components),this.layout.init(),this.gameController.initializeComponents(),this.fsm.registerStates(),this.fsm.start(),e()}loadAudio(e){const t=c2d.last(()=>{this.gameController.shareComponentsResources(["audios"])},Object.values(this.components).length);Object.values(this.components).forEach(e=>e.loadAudio(()=>{Object.keys(this.audioManager.groups).forEach(e=>{this.setAudioGroupVolume(e,this.getAudioGroupVolume(e))}),t()})),this.setMasterVolume(this.getMasterVolume()),this.setAudioEnabled(this.isAudioEnabled()),c2d.display.Factory.types.FactoryButton.signals.playAudio.connect(e=>this.audioManager.playAudio(e));let n=this.isAudioEnabled();c2d.utils.trackFocus({onLost:()=>{n=this.isAudioEnabled(),this.audioManager.enabled=!1},onFound:()=>{n&&(this.audioManager.enabled=!0)}}),e&&e()}isAudioEnabled(){return this.localStorage.get("audio_enabled",!0)}setAudioEnabled(e){this.audioManager.enabled=e,this.localStorage.set("audio_enabled",e),this.signals.onAudioEnabled.emit(e)}getMasterVolume(){return this.localStorage.get("master_volume",1)}setMasterVolume(e){this.audioManager.setMasterVolume(e),this.localStorage.set("master_volume",e)}setAudioGroupVolume(e,t){this.audioManager.setGroupVolume(e,t),this.localStorage.set(`${e}_volume`,t)}getAudioGroupVolume(e){return this.localStorage.get(`${e}_volume`,1)}goToUrl(e,t){this.signals.onGoToUrl.emit({url:e,type:t}),jsvars.redirect_inside_iframe?window.location.href=e:window.top.location.href=e,this.remoteApi.onGoToUrl(t)}}},{"./GameController":141,"./LayersManager":142,"./components/ComponentsManager":144,"./components/inner/index":155,"./integration/RemoteApi":157}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GameController=void 0;const s=e("./components/inner/ComponentDescriptor");n.GameController=class{constructor(e){this.game=e}loadGame(e){this.game.device.supportWebP&&this.game.loader.pre((e,t)=>{if(["webp","png","jpg"].includes(e.extension)){const t=Object.values(this.game.components).map(e=>e.resourceLoader.manifest).filter(Boolean),n=e.url.lastIndexOf(e.extension),s=e.url.slice(0,n)+e.url.slice(n).replace(e.extension,"webp"),i=-1!==e.url.indexOf("?")?e.url.substring(e.url.indexOf("?")):"";t.some(e=>e.files.find(e=>e+i===s))&&(e.url=s,e.extension="webp")}t()}),game.loader.pre((e,t)=>{e.loadType=e._determineLoadType(),this.game.application.version&&(e.url+=`?version=${this.game.application.version.replace(/\./g,"_")}`),t()}),this.loadResources(e)}initializeComponents(){this.shareComponentsResources(["configs","skeletons","textures","animations","fonts","r3d"]),Object.values(this.game.components).forEach(e=>{e.getConfigsData({type:"strings"}).forEach(e=>this.game.localization.addToDictionary(e)),e.initialize()}),Object.values(this.game.componentsManager.handlers).forEach(e=>e.initialize())}instantiateComponents(e){Object.entries(e).forEach(([e,t])=>{this.game.componentsManager.instantiateComponent(new s.ComponentDescriptor(e,t))})}loadResources(e){const t=Object.values(this.game.components),n=c2d.last(e,t.length);t.forEach(e=>e.loadResources(n)),this.game.loader.load()}createComponents(e){Object.entries(e).forEach(([e,t])=>{this.game.componentsManager.createComponent(Object.assign({name:e},t),{audio:this.game.audioManager})})}shareComponentsResources(e){const t=Object.values(this.game.components);t.filter(e=>e.resourceLoader.sharedResources).forEach(t=>{t.resourceLoader.sharedResources.map(e=>this.game.components[e]||((e,t)=>{throw new Error(`Can not find shared component ${t} required by ${e}`)})(t.name,e)).forEach(n=>((e,t,n)=>{n.forEach(n=>{t.assetsStore[n]=Object.assign(Object.assign({},e.assetsStore.getPublicResources(n)),t.assetsStore[n])})})(n,t,e))})}}},{"./components/inner/ComponentDescriptor":148}],142:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LayersManager=void 0;n.LayersManager=class{constructor(){this.list={}}initialize(e,t){this.tree=new c2d.display.FactoryTree({config:t,parent:e}),this.list=this.tree.nodeMap}resize(e){this.tree?this.tree.update(null,e):Object.values(this.list).forEach(e=>e.update())}toObjectConfig(e){if(c2d.type.isObject(e))return e;if(c2d.type.isArray(e))return e.reduce((e,t)=>(e[t]=t,e),{});if(c2d.type.isString(e)){const t={};return t[e]=e,t}return null}}},{}],143:[function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]])}return n};Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentResourcesLoader=void 0;const o=e("./Config");n.ComponentResourcesLoader=class{constructor(e){this.postLoadHandlers=[],this.component=e,this.loader=game.loader,this.sharedResources=e.descriptor.sharedResources,this._spineAtlas=new PIXI.spine.TextureAtlas,this.postLoadHandlers=[],PIXI.LoaderResource.setExtensionXhrType("glb",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER),PIXI.LoaderResource.setExtensionXhrType("r3d",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER)}loadFile(e,t){this.loader.add(e,e,{},n=>{n.error&&console.error(e,n.error),t(n.data)})}loadFileSync(e){return s(this,void 0,void 0,(function*(){return new Promise(t=>{this.loadFile(e,e=>{t(e)})})}))}load(e){return s(this,void 0,void 0,(function*(){yield this.loadManifest(),yield this.loadTranslations(),yield this.loadResourcesConfig(),yield this.loadResources(),this.callPostLoadHandlers(),e()}))}callPostLoadHandlers(){this.postLoadHandlers.forEach(e=>e()),this.postLoadHandlers=[]}loadManifest(){return s(this,void 0,void 0,(function*(){const{directories:e}=this.component.descriptor;this.manifest=new c2d.Manifest(this.loader);for(const t of e){const e=yield this.loadFileSync(this.component.descriptor.getManifestPath(t));this.manifest.addFiles(e,t)}}))}parseResource(e,t,n){const{file:s,set:o,type:r}=n,a=i(n,["file","set","type"]);if(s){const i=`/resources/${t}/${s}`,o=this.manifest.getExtraDirectoriesFiles(i);let r=this.manifest.getFilesPack(i);if(o&&(1==Object.keys(o).length?r=Object.values(o)[0]:n.extraFiles=o),n.file=r.length>1?r:r[0],!n.file&&!n.extraFiles)throw new Error(`Can not find file ${e}${i} in manifest `)}Object.values(a).forEach(n=>{c2d.type.isObject(n)&&this.parseResource(e,t,n)})}loadTranslations(){return s(this,void 0,void 0,(function*(){const e=this.manifest.getFilesInDirectory("translations").find(e=>e.name.indexOf(this.manifest.language)==e.name.length-this.manifest.language.length);if(e){const t=e.name.substring(0,e.name.length-this.manifest.language.length-1),n=yield this.loadFileSync(e.path);game.localization.addToDictionary(((e,t)=>{const n={};return Object.entries(e).forEach(([e,s])=>n[`${t}.${e}`]=s),n})(n,t))}}))}loadResourcesConfig(){return s(this,void 0,void 0,(function*(){this.resourcesConfig={};const e=this.component.descriptor,t=(e,{resources:t,loadRawImages:n=!1})=>{this._filterResources(t),Object.entries(t).forEach(([t,n])=>{Object.values(n).forEach(n=>{this.parseResource(e,t,n)})}),c2d.utils.Object.mergeDeep(this.resourcesConfig,t,!0),this.loadRawImages=n};for(const n in e.resources){const s=e.paths[n];for(const i of e.resources[n]){const n=yield this.loadFileSync(`${s}${e.typeAsPath}/${i}`);t(`${s}${e.typeAsPath}`,n)}}}))}loadResources(){return s(this,void 0,void 0,(function*(){return new Promise(e=>{const t={fonts:(e,t)=>this.loadFonts(e,t),configs:(e,t)=>this.loadConfigs(e,t),spritesheets:(e,t)=>this.loadSpriteSheets(e,t),skeletons:(e,t)=>this.loadSkeletons(e,t),textures:(e,t)=>this.loadTextures(e,t),gltf:(e,t)=>this.loadGltf(e,t),r3d:(e,t)=>this.loadR3d(e,t)},n=c2d.last(e,Object.keys(t).length);Object.entries(t).forEach(([e,t])=>t(this.resourcesConfig[e],c2d.once(n)))})}))}loadSpriteSheets(e=[],t){const n=e=>{this._spineAtlas.addTextureHash(e.textures,!1),this.component.assetsStore.addTextures(e.textures),e.data.animations&&this.component.assetsStore.addAnimations(e.data.animations)},s=({file:e,pixelize:t,prerender:s},i)=>{this.loader.add(e,e,{},e=>{n(e),t&&(e.spritesheet.baseTexture.scaleMode=PIXI.SCALE_MODES.NEAREST),s&&game.engine.renderer.texture.updateTexture(e.spritesheet.baseTexture),i()})};e=e.filter(({useRawImages:e})=>!e||!this.loadRawImages);const i=c2d.last(t,e.length,!0);e.forEach(({file:e,pixelize:t,prerender:n})=>{const o=[].concat(e),r=c2d.last(i,o.length,!0);o.forEach(e=>s({file:e,pixelize:t,prerender:n},r))})}loadImages(e,t){if(!this.loadRawImages)return void t();const n=c2d.last(t,e.length,!0),s={};e.forEach(e=>{const t=`${this.component.descriptor.paths.game}${this.component.descriptor.name}/assets/spine/images/${e}.png`;this.loader.add(e,t,s,e=>{const t={};t[e.name]=e.texture,this.component.assetsStore.addTextures(t),this._spineAtlas.addTextureHash(t,!1),n()})})}loadSkeletons(e=[],t){const n=[],s=c2d.last(()=>{const e=[...new Set(n.flatMap(e=>e.files))];this.loadImages(e,t)},e.length,!0),i={spineAtlas:this._spineAtlas,metadata:{spineAtlas:!1}};e.forEach(({file:e,scale:t,attachLabels:o})=>{const r=new c2d.File(e).name;this.loader.add(e,e,i,e=>{n.push(this._onSkeletonLoaded(r,e.data,{scale:t,attachLabels:o})),s()})})}loadTextures(e=[],t){const n=game.engine.compressedExtensions;let s=null;n.dxt?s="dds":n.pvrtc?s="pvr":n.astc&&(s="astc");const i=c2d.last(t,e.length,!0);e.forEach(({file:e,compressed:t})=>{const n=new c2d.File(e);t&&s&&(n.extension=s);this.loader.add(n.name,n.path,{},e=>{e.texture.baseTexture.alphaMode=PIXI.ALPHA_MODES.PREMULTIPLY_ALPHA,this.component.assetsStore.addTexture(n.name,e.texture),i()})})}loadGltf(e=[],t){const n=c2d.last(t,e.length,!0);e.forEach(({file:e})=>{const t=new c2d.File(e).name;this.loader.add(e,e,{},e=>{const s=new c2d.display3d.GLTFLoader;s.load(e.data,()=>{this.component.assetsStore.addScene3d(t,s.scene),n()})})})}loadR3d(e=[],t){const n=c2d.last(t,e.length,!0);e.forEach(({file:e})=>{const t=new c2d.File(e).name;this.loader.add(e,e,{},e=>{this._on3DResourcesLoaded(t,e.data),n()})})}_onSkeletonLoaded(e,t,{scale:n,attachLabels:s}){const i=t,o=i.bones.find(e=>"root"===e.name);n&&(o.scaleX=o.scaleY=n),i.attachLabels=s,this.postLoadHandlers.push(()=>{const t=(new PIXI.spine.SpineParser).createJsonParser().readSkeletonData(this._spineAtlas,i);i.attachLabels&&this._addSpineLabel(e,t),this.component.assetsStore.addSkeleton(e,t)});const r=i.events||{};return Object.entries(r).filter(([e,t])=>t.audio).forEach(([e,t])=>{i.attachSounds=i.attachSounds||{},i.attachSounds[e]=t}),i}_on3DResourcesLoaded(e,t){this.postLoadHandlers.push(()=>{const n=new c2d.display3d.R3DLoader(this.component.assetsStore);n.load(t),this.component.assetsStore.addResource3d(e,n.scene)})}loadConfigs(e={},t){const n=Object.entries(e).filter(([e,t])=>"on_demand"!==t.load),s=c2d.last(t,n.length,!0);n.forEach(([e,t])=>this._loadConfig(e,t,s))}_loadConfig(e,t,n,s,r=[]){const{file:a,extraFiles:l,set:c}=t,u=i(t,["file","extraFiles","set"]);if(s&&!a&&!l)return void this.loadChildConfigs(s,u,n,[...r,e]);const h=new o.Config(Object.assign(Object.assign({},t),{name:e}));s?s.addChild(r,h):this.component.assetsStore.addConfig(h);const d=()=>this.loadChildConfigs(h,u,n);if(l||a){if(l){const e=Object.entries(l),t=c2d.last(()=>d(),e.length);e.forEach(([e,n])=>{this.loadFile(n,n=>{h.addData(n,e),t()})})}if(a){const e=e=>{h.addData(e),d()};this.loadFile(a,e)}}else d()}loadChildConfigs(e,t,n,s){const i=Object.entries(t),o=c2d.last(n,i.length,!0);i.forEach(([t,n])=>{c2d.type.isObject(n)?this._loadConfig(t,n,o,e,s):o()})}loadFonts(e=[],t){const n=c2d.last(t,e.length,!0);if(e.length){const t=document.createElement("div");t.classList.add("font_preload"),t.style.opacity="0",t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);const s=window.FontFace;s?e.forEach(e=>{const{name:t,file:o}=e;i(e,["name","file"]);new s(t,`url(${o})`,{}).load().then(e=>{document.fonts.add(e),n()})}):e.forEach(e=>{const{name:s,file:o}=e,r=i(e,["name","file"]),a=document.createElement("link");a.href=o,a.rel="stylesheet",a.type="text/css";const l=document.createElement("span");l.style.fontFamily=`font-family: '${r.fontFamily}'`,l.style.fontWeight=`font-weight: '${r.fontWeight}'`,l.innerHTML=l.getAttribute("style"),t.appendChild(l),document.head.appendChild(a),a.onload=n,this.component.assetsStore.addFont(s,r)})}}_parseLoadedSkeletons(){Object.entries(this._skeletonsData).forEach(([e,t])=>{const n=(new PIXI.spine.SpineParser).createJsonParser().readSkeletonData(this._spineAtlas,t);t.attachLabels&&this._addSpineLabel(e,n),this.component.assetsStore.addSkeleton(e,n)})}_addSpineLabel(e,t){const n=this.component.assetsStore;let s=n.getConfig("spine_config");s&&s.attachLabels?(s=s.attachLabels,t.attachLabels=[],t.slots.forEach(o=>{const r=o.name.indexOf("${")+2,a=o.name.indexOf("}",r);if(-1!==r&&-1!==a){const l=o.name.substring(r,a),c=s[l];if(!c)return void console.error("Spine attachLabels parse: No found label config with key.",`spine: ${e}`,`slot: ${o.name}`,`label: ${l}`);const{text:u,style:h,bitmapFont:d}=c,p=i(c,["text","style","bitmapFont"]),m=u&&u,f=h&&n.getConfig("spine_styles")[h];let g;d&&(g={},Object.entries(n.textures).forEach(([e,t])=>{if(e.includes(d)){const n=e.substr(d.length);g[n]=t}}));const b=Object.assign(Object.assign({},p),{slotData:o,name:l,text:m,style:f,bitmapTextures:g});t.attachLabels.push(b)}}),0===t.attachLabels.length&&console.error("Skeleton parse: No found slots.",`spine: ${e}`)):console.error("Spine attachLabels parse: No found spine_config or attachLabels parameters.",`spine: ${e}`)}_filterResources(e){const t=e=>void 0===e.only||e.only===this.loader.platform;Object.entries(e).forEach(([n,s])=>{c2d.type.isArray(s)?e[n]=s.filter(t):c2d.type.isObject(s)&&(e[n]=(e=>{const n={};return Object.entries(e).forEach(([e,s])=>{t(s)&&(n[e]=s)}),n})(s))})}loadAudio(e){const t=e=>{e.forEach(e=>{const t=game.audioManager.loadAudio(e);this.component.assetsStore.addAudio(e.name,t)})};this.resourcesConfig.audios&&t(this.resourcesConfig.audios),this.resourcesConfig.configs&&Object.entries(this.resourcesConfig.configs).forEach(([e,n])=>{if("audio_config"!==n.type)return;this.loader.add(e,n.file,{},e=>{e.data.forEach(e=>{const t=`/resources/audios/${e.file}`,n=this.manifest.getFile(t);e.file=n}),t(e.data)})}),e()}set resourcesConfig(e){this._resourcesConfig=e,this.component.assetsStore.resourcesConfig=this._resourcesConfig}get resourcesConfig(){return this._resourcesConfig}}},{"./Config":145}],144:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentsManager=void 0;const s=e("./inner/index"),i=e("./InstancesHelper");n.ComponentsManager=class{constructor(){this.instancesHelper=new i.InstancesHelper,this._components={},this._handlers={}}registerComponent(e,t=null){if(s.sources.components[e])throw new Error(`Can not register component ${e} twice`);s.sources.components[e]=t}updateComponent(e,t){const n=s.sources.components[e];if(!n)throw new Error(`Component not registered ${e}`);s.sources.components[e]=Object.assign(Object.assign({},n),t)}getRegisteredComponent(e){const t=s.sources.components[e];if(!t)throw new Error("there is no component with id "+e);return this.instancesHelper.getRegisteredModdedComponent(e,t)}instantiateComponent(e){const t=this.getRegisteredComponent(e.type);if(!t)return void console.error("Comopnent is undefined.",e.type);const{Component:n,Handler:s}=t;if(!n)throw new Error(`Can not find registered component with type ${e.type}`);const i=new n(e);if(this._components[i.name]=i,s){const e=new s(i);this._handlers[i.name]=e,i.setHandler(e)}if(i.layers=i.layers||{},i.layer=null,e.layer){const t=game.layers.toObjectConfig(e.layer);Object.entries(t).forEach(([e,t])=>{i.layers[e]=game.layers.list[t],i.layers[e]?i.layer||(i.layer=i.layers[e]):console.error(`Layer "${t}" is undefined. Component "${i.name}"`)})}else i.layers=game.layers.list,i.layer=game.layers.list.default;return i}createComponent({name:e,type:t},n){const s=this.components[e];return s?(s.create(n,this.getRegisteredComponent(t)),this.handlers[e]&&this.handlers[e].create(),s):null}getComponent(e){const t=this._components[e];if(null===t)throw new Error("there is no component with id "+e);return t}get registeredComponents(){return s.sources.components}get components(){return this._components}get handlers(){return this._handlers}}},{"./InstancesHelper":146,"./inner/index":155}],145:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Config=void 0;n.Config=class{constructor({name:e,data:t,set:n,type:s}){this.children=[],this.name=e,this._data=t||{default:{}},n&&(this.set=n),s&&(this.type=s)}get fullData(){return this._data}get data(){return this.orientationSpecificData}get orientationSpecificData(){let e;if(e=game.engine.device.desktop?"desktop":game.engine.device.orientation,e==this._currentOrientation)return this._currentOrientationData;const t=this._data[e]||this._data.default;return this.updateChildren(t),this._currentOrientation=e,this._currentOrientationData=t,t}addData(e,t){t?this._data[t]=e:this._data.default=e}addChild(e=[],t){Array.isArray(e)||(e=e.split(".")),this.children.push({path:e,config:t})}updateChildren(e){this.children.forEach(({path:t,config:n})=>{t.reduce((e,t)=>(e[t]||(e[t]={}),e[t]),e)[n.name]=n.data})}}},{}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InstancesHelper=void 0;n.InstancesHelper=class{constructor(){this._logger=c2d.Logger.Of("Game.Components.InstancesHelper"),this._moddedCache={},this._mainEntitiesNames=["Store","View","Controller","Component","Handler"]}getModesList(){var e,t;const n=[],s=null===(t=null===(e=null===application||void 0===application?void 0:application.setup)||void 0===e?void 0:e.gameConfig)||void 0===t?void 0:t.data;return s?(this.addModeIfNeeded(s,"showTurboButton",!1,n,"hideTurboButton"),this.addModeIfNeeded(s,"enableSkips",!1,n,"disableSkips"),this.addModeIfNeeded(s,"showWinsLowerThanBet",!1,n,"hideWinsLowerThanBet"),this.addModeIfNeeded(s,"showSessionStatistics",!1,n,"hideSessionStatistics"),n):n}addModeIfNeeded(e,t,n,s,i){c2d.type.isNullOrUndefined(e[t])||e[t]!==n||s.push(i)}getRegisteredModdedComponent(e,t){if(this._moddedCache[e])return this._moddedCache[e];if(!t.classes||!t.classes.mods)return t;const n=Object.assign({},t);for(let e of this._mainEntitiesNames)n[e]&&this._findClass(e,n);return this._moddedCache[e]=n,n}_findClass(e,t){let n=this._getClassByPath(e,t);if(!n)return this._logger.error("InstancesHelper logic error"),!1;t[e]=n}_getClassByPath(e,t){const n=this._checkPathWithModes(e,t,t.classes.mods);return n||t[e]}_checkPathWithModes(e,t,n){const s=this.getModesList();for(let i of s)if(n[i]){const s=this._checkPathWithModes(e,t,n[i]);if(s)return s}return!!n[e]&&n[e]}}},{}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Component=void 0;const s=e("../ComponentResourcesLoader");n.Component=class{constructor(e,...t){this._logger=c2d.Logger.Of("Engine.Component"),this.validate(...arguments),this.name=e.name,this.layer=e.layer,this.descriptor=e,this.assetsStore=new c2d.store.AssetsStore,this.resourceLoader=new s.ComponentResourcesLoader(this)}setHandler(e){this.handler=e}validate(...e){}loadResources(e){this.resourceLoader.load(e)}loadAudio(e){this.resourceLoader.loadAudio(e)}create(e,t){this._logger.debug("Create component: "+this.name,"background: #EEEEFF; color: #111111;"),this.create=()=>{throw new Error("component was created")};const{Store:n,View:s,Controller:i,classes:o}=this.validateSources(t);this.createStore(n,o,e),this.createView(s,o,e),this.createController(i,o,e),this.audio=e.audio,this.onCreate(e)}validateSources(e){return e}createStore(e,t,n){if(!e)return;const s={component:this,classes:t};this.store=new e(s),this.store.create(Object.assign(Object.assign({},n),{componentName:this.name}))}createView(e,t,n){if(!e)return;const s={store:this.store,assetsStore:this.assetsStore,layer:this.layer,layers:this.layers,classes:t};this.view=new e(s),this.view.setComponent(this),this.view.create&&this.view.create()}createController(e,t,n){if(!e)return;const s={store:this.store,view:this.view,assetsStore:this.assetsStore,classes:t};this.controller=new e(s),this.controller.create(n)}onCreate(...e){}initialize(e){this.initialize=()=>{throw new Error("component was initialized")},this.controller&&this.controller.initialize&&this.controller.initialize(e),this.store&&this.store.initialize&&this.store.initialize(e),this.view&&this.view.initialize&&this.view.initialize(e),this.onInitialize(...arguments),this.properties&&this.fillProperties(this.properties)}onInitialize(...e){}run(){this.onRun()}onRun(){}destroy(...e){this.onDestroy(...e)}onDestroy(...e){}resizeScreen(...e){this.controller&&this.controller.resizeScreen(...e),this.view&&this.view.resizeScreen(...e),this.onResizeScreen(...e)}onResizeScreen(...e){}getConfig(e){return this.assetsStore.hasConfig(e)&&this.assetsStore.getConfig(e)}getConfigs(e){return this.assetsStore.getConfigs({type:e})}getConfigsData(e){return this.assetsStore.getConfigsData(e)}fillProperties(e){Object.entries(e).forEach(([e,t])=>{"function"==typeof this[e]?Array.isArray(t)?this[e].apply(this,t):this._logger.error("value for function: "+e,"must be array"):e in this&&(this[e]=t)})}set view(e){e&&!this._view&&(this._view=e,this._view.name=this.name+"Component")}get view(){return this._view}get publicApiMethods(){return[]}get name(){return this._name}set name(e){this._name=e}get events(){return this._events}set events(e){this._events=e}get properties(){return this._properties||this.config.properties}get config(){return this.getConfig("config")}get resourcesConfig(){return this.resourceLoader.resourcesConfig}}},{"../ComponentResourcesLoader":143}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentDescriptor=void 0;n.ComponentDescriptor=class{constructor(e,t){const{version:n=null,sources:s={},type:i,resources:o={},sharedResources:r=null,layer:a=null,modules:l=[]}=t;this.name=e,this.modules=l,this.type=i,this.version=n,this.sources=s,this.resources=o,this.sharedResources=r,this.layer=a,this.paths={game:`${game.loader.paths.game}components/`,components:`${game.loader.paths.components}`}}get typeAsPath(){return this.type.toLowerCase()}getManifestPath(e){return`${e}/resources/manifest.json`}get directories(){return Object.keys(this.resources).map(e=>`${this.paths[e]}${this.typeAsPath}`)}}},{}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Controller=void 0;n.Controller=class{constructor({store:e,assetsStore:t,view:n,classes:s}){this._store=e,this._assetsStore=t,this.view=n,this.classes=s}create(){this.onCreate(...arguments)}onCreate(...e){}initialize(...e){this.onInitialize(...e)}onInitialize(...e){}resizeScreen(...e){this.onResizeScreen(...e)}onResizeScreen(...e){}get config(){return this.assetsStore&&this.assetsStore.getConfig("config")}get store(){return this._store}get assetsStore(){return this._assetsStore}}},{}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FactoryView=void 0;const s=e("./View");class i extends s.View{buildTree(e,t,n,s){let i;c2d.type.isString(e)&&(i=e,e=this.assetsStore.getConfig(e)),s&&(this._prefabs=s),e.__prefabs=Object.assign(Object.assign(Object.assign({},e.__prefabs),this.getPrefabs()),s),n=Object.assign({texts:this.getTexts(),styles:this.getStyles(),textures:this.assetsStore.textures,skeletons:this.assetsStore.skeletons},n),this.tree=new c2d.display.FactoryTree({config:e,parent:t,variables:n}),this._initialConfig=i||e}getTexts(){return c2d.Localization.dictionary}getStyles(){return this.assetsStore.getConfigsData({set:"style"}).reduce((e,t)=>e=Object.assign(Object.assign({},e),t),{})}getPrefabs(){return this.assetsStore.getConfigs({set:"prefab"}).reduce((e,t)=>(e[t.name]=t.data,e),{})}onResizeScreen(){this.updateTree()}updateTree(e){this.tree&&(e=e||this._initialConfig,c2d.type.isString(e)&&(e=this.assetsStore.getConfig(e)),e.__prefabs=Object.assign(Object.assign(Object.assign({},e.__prefabs),this.getPrefabs()),this._prefabs),this.tree.update(e))}callTreeNodes(e,...t){Object.values(this.tree.nodeMap).forEach(n=>n[e]&&n[e](...t))}setHandlers(e){Object.keys(e).forEach(t=>{const n=this.tree.nodeMap[t];c2d.type.isArray(n)?n.forEach(n=>{n.setHandlers&&n.setHandlers(e[t])}):n&&n.setHandlers&&n.setHandlers(e[t])})}}n.FactoryView=i},{"./View":153}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Handler=void 0;n.Handler=class{constructor(e){this._states={},this._logger={},this.component=e,this._logger=c2d.Logger.Of(e.name),this.events=c2d.observer,this.events.config=c2d.EventsConfig}create(){this.onCreate()}update(){}onCreate(){}initialize(){if(this.registerActions(this.actionsConfig),this.registerStates(this.statesConfig),this.customStatesConfig)throw new Error(`${this.component.constructor.name}.${this.constructor.name}.customStatesConfig deprecated. Use statesConfig instead`);if(this.baseStatesConfig)throw new Error(`${this.component.constructor.name}.${this.constructor.name}.baseStatesConfig deprecated. Use statesConfig instead`);this.onInitialize(),this.events.subscribe(c2d.EventsConfig.ENGINE_TICK_UPDATE,this.update.bind(this))}onInitialize(){}registerActions(e){Object.entries(e).forEach(([e,t])=>{game.fsm.actions[e]=t})}registerStates(e){Object.entries(e).forEach(([e,t])=>{this.registerState(e,t)})}registerState(e,t){this._states[e]=this._states[e]||{},Object.entries(t).forEach(([t,n])=>{this._states[e][t]=this._states[e][t]||[];const s=c2d.type.isString(n)?this[n]:n,i=`${this.constructor.name}:${s.name}`;this._states[e][t].push({key:i,handler:(...e)=>{if(c2d.type.isFunction(s)){this.phaseStateLog(!1,s.name);const t=e[0];return this.addFinishChecker(t,s.name),s.call(this,...e)}if(Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),n).get)return console.log(` %c${this.component.name}`,"background: #e9fafa; color: #111111;"),s}})})}addFinishChecker(e,t){if(e){const n=e.finish;e.finish=()=>{n(),this.phaseStateLog(!0,t)}}}phaseStateLog(e,t){const n=e?"<--":"--\x3e",s=e?"#F8E4F8":"#e9fafa",i=game.fsm.currentState&&game.fsm.currentState.currentPhase?game.fsm.currentState.currentPhase.waitHandlers:[];this._logger.fsmDetails(` %c${n}  ${this.component.name} (${this.constructor.name}:${t}), actions queue:`,`background: ${s}; color: #111111;`,i)}fireAction(e,t){game.fsm.currentState.currentPhase.actions[e]?game.fsm.currentState.currentPhase.actions[e](t):console.warn(`missing action ${e}. Available actions: ${Object.keys(game.fsm.actions)}`)}get states(){return this._states}get config(){return this.component.config}get statesConfig(){return{}}get globalActionsConfig(){return{}}get actionsConfig(){return{}}}},{}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Store=void 0;const s=window.globalStore={};n.Store=class{constructor({component:e,classes:t}){this.component=e,this.classes=t}create({assetsStore:e=null}){this.assetsStore=e,this.addToGlobal(),this.onCreate()}onCreate(){}addToGlobal(){}getItem(e){return s[e]&&s[e]()}addItem(e,t){void 0!==s[e]&&console.error(`The store item "${e}" will be overwritten.`),(t=t||e)in this?s[e]=()=>{const e=this[t];return c2d.type.isFunction(e)?e.bind(this):e}:console.error(`"${e}" is undefined.`)}removeItem(e,t){t=t||e,delete s[e]}}},{}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.View=void 0;n.View=class{constructor({store:e,assetsStore:t,classes:n,layer:s,layers:i}){this.store=e,this.assetsStore=t,this.classes=n,this.layer=s,this.layers=i}setComponent(e){this.component=e}create(...e){this.onCreate(...e)}onCreate(...e){}initialize(...e){this.onInitialize(...e)}onInitialize(...e){}get config(){return this.assetsStore&&this.assetsStore.getConfig("config")}getSkeleton(e){return this.assetsStore.getSkeleton(e)}resizeScreen(...e){this.onResizeScreen(...e)}onResizeScreen(...e){}createSpineAnimation(e,t){const n=this.assetsStore.getSkeleton(t),s=new c2d.display.Spine(n);return this.layers[e].addChild(s),s}}},{}],154:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.VisualComponent=void 0;const s=e("./Component");class i extends s.Component{constructor(e,...t){super(e,...t)}setWindowSize(e,t){this._windowWidth=e,this._windowHeight=t,this.onWindowResize(e,t)}set screenOrientation(e){if(this._screenOrientation=i.screenOrientations[e],"landscape"===e)this.onLandscape();else{if("portrait"!==e)throw new Error("unsupported screen orientation "+e);this.onPortrait()}}get screenOrientation(){return this._screenOrientation}onWindowResize(e,t){}onLandscape(){}onPortrait(){}}n.VisualComponent=i},{"./Component":147}],155:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sources=void 0;const s=e("./Component"),i=e("./VisualComponent"),o=e("./ComponentDescriptor"),r=e("./Handler"),a=e("./Store"),l=e("./Controller"),c=e("./View"),u=e("./FactoryView"),h={Component:s.Component,ComponentDescriptor:o.ComponentDescriptor,Handler:r.Handler,Store:a.Store,Controller:l.Controller,View:c.View,FactoryView:u.FactoryView,VisualComponent:i.VisualComponent,components:{}};n.sources=h},{"./Component":147,"./ComponentDescriptor":148,"./Controller":149,"./FactoryView":150,"./Handler":151,"./Store":152,"./View":153,"./VisualComponent":154}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("../c2d/utils/decorators/modifiable"),i=e("./Game");window.modifiable=s.modifiable,window.game=new i.Game({application:window.application})},{"../c2d/utils/decorators/modifiable":139,"./Game":140}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteApi=void 0;n.RemoteApi=class{constructor(){this._listen(),window.dispatchEvent(new Event("onremoteapiinit"))}onLoad(){this._send("app.onload")}onGoToUrl(e){this._send(`app.goto.${e}`)}onEnterIdle(){this._send("app.enter.idle")}onExitIdle(){this._send("app.exit.idle")}onSoundChange(e){this._send(`app.sound.${e?"on":"off"}`)}onFullscreenChange(e){this._send(`app.fullscreen.${e?"on":"off"}`)}onError(e){this._send("app.error",e)}_send(e,t={}){window.dispatchEvent(new CustomEvent("onremoteapisendmessage",{detail:{message:e,params:t}})),window.parent&&window.parent.postMessage({message:e,params:t},"*")}_listen(){window.addEventListener("message",e=>this._onMessage(e),!1)}_onMessage(e){if(!e||!c2d.type.isObject(e.data))return;if("app.set.state"===e.data.message){const t=e.data.state;if(!c2d.type.isObject(t))return;"balance"in t&&this.setBalance(t.balance),"pause"in t&&this.setPause(t.pause),"depositPopupEnabled"in t&&this.setDepositPopupEnabled(t.depositPopupEnabled),"soundEnabled"in t&&this.setSound(t.soundEnabled),"fullscreenEnabled"in t&&this.setFullscreen(t.fullscreenEnabled)}}setBalance(e){this._balanceHandler&&this._balanceHandler(e)}setPause(e){this._pauseHandler&&this._pauseHandler(Boolean(e))}setDepositPopupEnabled(e){this._depositPopupHandler&&this._depositPopupHandler(Boolean(e))}setSound(e){this._soundHandler&&this._soundHandler(Boolean(e))}setFullscreen(e){this._fullscreenHandler&&this._fullscreenHandler(Boolean(e))}set balanceHandler(e){this._balanceHandler=e}set pauseHandler(e){this._pauseHandler=e}set depositPopupHandler(e){this._depositPopupHandler=e}set soundHandler(e){this._soundHandler=e}set fullscreenHandler(e){this._fullscreenHandler=e}}},{}],158:[function(e,t,n){"use strict";const s=game.sources.components.Freespins;class i extends s.View{build(){}}s.View=i},{}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./FreespinsView.js")},{"./FreespinsView.js":158}],160:[function(e,t,n){"use strict";e("core-js/modules/es.number.to-fixed");const s=c2d.display3d.Utils;class i extends c2d.display3d.Controller{constructor(e){super(e),this._amount=0,this._stages=[14,25,50],this._finish=null,this._timeline=new c2d.Timeline}get isActive(){return!!this._finish}celebration(e,t,n,s){!n||n/t<this._stages.first?s():(this._finish=s,this.showBigWins(e,t,n))}showBigWins(e,t,n){game.audioManager.playAudio("big_win");let s=n/t,i=this._stages.filter(e=>e<=s).length;this.bigwin.animator.params.show=!0,this.object3D.scale.set(.1,.1,.1),e.camera.add(this.object3D),this._amount=0;let o=1.75*i,r=o/i;this._timeline.clear(),this.amountPlace.scale.set(0,0,0),this.amountPlace.action.scaleTo({x:1,y:1,z:1},.5),this._timeline.to(this,o,{_amount:n,onUpdate:()=>{game.audioManager.playAudio("counter"),this.showAmount(this._amount.toFixed(2))}}),i>=2&&this._timeline.to({},0,{onStart:()=>{this.bigwin.animator.params.show=!1,c2d.call(()=>this.hugewin.animator.params.show=!0,.35),game.audioManager.playAudio("huge_win")}},r),i>=3&&this._timeline.to({},0,{onStart:()=>{this.hugewin.animator.params.show=!1,c2d.call(()=>this.megawin.animator.params.show=!0,.35),game.audioManager.stopAudio("huge_win"),game.audioManager.playAudio("mega_win")}},2*r),this._timeline.add(()=>this.hide(),"+=2")}hide(){this.isActive?(this._timeline.clear(),this.bigwin.animator.params.show=!1,this.hugewin.animator.params.show=!1,this.megawin.animator.params.show=!1,c2d.call(()=>this.amountPlace.action.scaleTo({x:0,y:0,z:0},.5),.25),c2d.call(()=>{this.amountPlace.removeAll(),this.object3D.removeFromParent(),this._finish(),this._finish=null},.75)):console.warn("Bigwin popup already hidden!")}showAmount(e){game.audioManager.playAudio("counter"),this.amountPlace.removeAll(),this.amountPlace.add(s.createNumbersObject(e,this.font,"font_",1.5,1))}onUpdate(){let e=Math.min(game.engine.renderer.width/game.engine.renderer.height*.1,.1);this.object3D.scale.set(e,e,e)}}c2d.display3d.R3DLoader.registerControllerClass("Bigwins",i)},{"core-js/modules/es.number.to-fixed":304}],161:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.FactoryView{constructor(){super(...arguments),this._element=null,this._tween=null}buildTree(){super.buildTree("blood_screen",this.layers.sfx),this._element=this.tree.nodeMap.blood_screen}blink(){this._tween&&this._tween.isActive()&&this._tween.stop(),this._tween=(new c2d.Timeline).to(this._element,.5*(1-this._element.alpha),{alpha:1}).to(this._element,.2,{alpha:0})}}n.default=s},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],162:[function(e,t,n){"use strict";const{Vector3:s,Matrix3:i,Quaternion:o}=c2d.display3d.Math,r=new(0,c2d.display3d.Raycaster);class a extends c2d.display3d.Controller{onStart(){this._defaultFov=this.object3D.fov,this._follow=!0,this.floatDistance=!1,this._upHeight=0,this._timeUp=0}set follow(e){this._follow=e}get follow(){return this._follow}reset(){this.target.updateWorldMatrix(!1,!0),this.object3D.position.copy(this.newPosition),this.object3D.lookAt(this.target.worldPosition)}setFromCamera(e){this.object3D.position.copy(e.worldPosition),this.object3D.quaternion.copy(e.worldQuaternion),this.object3D.fov=e.fov,this.object3D.updateProjectionMatrix(),this._follow=!1}upToCeiling(e){this._upHeight=e,this._timeUp=0}get newPosition(){let e=this.target.worldPosition.clone(),t=(new i).setFromMatrix4(this.target.worldMatrix),n=new s(0,0,-1).applyMatrix3(t).normalize(),o=new s(0,1,0).applyMatrix3(t).normalize();if(e.add(n.multiplyScalar(this.distance)),e.add(o.multiplyScalar(this.height)),this.floatDistance){const t=e.clone().sub(this.target.worldPosition).normalize();r.ray.origin.copy(this.target.worldPosition.add(t.clone().multiplyScalar(1.2))),r.ray.direction.copy(t);const n=r.intersectObject(this.object3D.parent,!0);if(n.length){const s=r.ray.origin.clone().sub(n[0].point).length(),i=this.distance-1.2-s;i>0&&e.sub(t.multiplyScalar(i))}}return e}onUpdate(){if(this._follow&&this.target){let e=c2d.time.deltaTime;this.object3D.position.lerp(this.newPosition,e*this.damping),this._upHeight&&(c2d.globalStore.get("pauseGame")||(this._timeUp+=3*e),this.object3D.position.y+=Math.sin(this._timeUp)*this._upHeight*e*50,this._timeUp>=Math.PI&&(this._timeUp=0,this._upHeight=0)),this.object3D.lookAt(this.target.worldPosition,e*this.rotationDamping)}}}c2d.display3d.R3DLoader.registerControllerClass("CameraFollow",a)},{}],163:[function(e,t,n){"use strict";const s=c2d.display3d.Raycaster,{Vector2:i,Vector3:o,Euler:r,Quaternion:a}=c2d.display3d.Math;let l=new o,c=new o;const u=2*Math.PI/3;class h extends c2d.display3d.Controller{onCreate(){this._characters=null,this._raycaster=new s,this._currentIndex=0,this._rotate=!1,this._platformQuaternions=[(new a).setFromEuler(new r(0,0,0)),(new a).setFromEuler(new r(0,u,0)),(new a).setFromEuler(new r(0,2*u,0))],this._lobbyBullet=null,this._boostersText=[],this._dumpData=null,this.need_resize=!1}onStart(){let e={fontFamily:"RussoOne-Regular",fontSize:20,align:"left",fill:"#008bff"},t=new c2d.display3d.Text2DMesh(game.localization.getText("game.booster_title"),{fontFamily:"RussoOne-Regular",fontSize:22,align:"left",fill:"#ffffff"});t.material.doubleSided=!0,t.scale.set(-.5,.5,.5),t.position.set(.24,.01+.15*t.height,0),this.booster.add(t);for(let t=0;t<3;++t){let n=new c2d.display3d.Text2DMesh(game.localization.getText("game.booster_".concat(t)),e);n.material.doubleSided=!0,n.scale.set(-.5,.5,.5),n.visible=!1,n.position.set(.368-.25*n.width,-.046-.1*n.height,0),this.booster.add(n),this._boostersText.push(n)}}set characters(e){this._characters=e}show(e,t,n){const s=()=>{t(),this._dumpData=this._characters[e].controller.dumpData();for(let e=0;e<3;++e){this.scene.add(this._characters[e]),this._characters[e].position.set(0,0,0),this._characters[e].quaternion.set(0,0,0,1),this.characterPlaces[e].add(this._characters[e]);let t=this._characters[e].controller.animator;t.currentState=t.getStateByName("intro_idle"),t.onEvent=t=>{let n=this._characters[e].controller.muzzle;"lobbyBullet"===t?(this._lobbyBullet=this._characters[e].controller.lobbyBullet,this._lobbyBullet.animator.currentState=this._lobbyBullet.animator.defaultState,this._characters[e].add(this._lobbyBullet),c2d.call(()=>{this._lobbyBullet&&this._lobbyBullet.removeFromParent(),this._lobbyBullet=null},this._lobbyBullet.animator.currentState.clipDuration)):n.visible="ray_off"!==t&&"shot_on"===t,n.animator.params.fire=n.visible}}this._currentIndex=e,game.audioManager.playAudio("".concat(this._characters[this._currentIndex].name,"_intro")),this._characters[this._currentIndex].controller.animator.params.intro=!0,this._boostersText[this._currentIndex].visible=!0,this.platformVFX.animator.params.play=!0,this.scene.camera=this.getCamera(),this._rotate=!1,this.mainPlatform.quaternion.copy(this._platformQuaternions[this._currentIndex]),this.unlockUI=n,this.cameraTrack(()=>this.unlockUI&&this.unlockUI())};"loading"===game.audioManager.audios["".concat(this._characters[e].name,"_intro")].state()?game.audioManager.audios["".concat(this._characters[e].name,"_intro")].on("load",()=>{s()}):s()}hide(e){for(let e=0;e<3;++e){this._characters[e].removeFromParent();const t=this._characters[e].controller.animator;t.currentState=t.defaultState}this._lobbyBullet&&this._lobbyBullet.removeFromParent(),this._lobbyBullet=null,this._characters[e].controller.restoreData(this._dumpData),this._dumpData=null,game.audioManager.stopAudio("".concat(this._characters[this._currentIndex].name,"_intro")),this.camera_track_tween&&this.camera_track_tween.kill()}changeCharacter(e){let t=this._currentIndex;this._currentIndex=e,this._rotate=!0,game.audioManager.playAudio("".concat(this._characters[this._currentIndex].name,"_intro"));let n=this._characters[this._currentIndex].controller.animator;n.currentState=n.getStateByName("intro_idle"),n.params.intro=!0,this.cameraTrack(()=>this.unlockUI&&this.unlockUI()),this.booster.animator.params.rotate=!0,this.platformVFX.animator.params.play=!1,c2d.call(()=>{this.platformVFX.animator.params.play=!0},.4),c2d.call(()=>{this._boostersText[t].visible=!1,this._boostersText[this._currentIndex].visible=!0},.75)}cameraTrack(e){if(0==this._currentIndex)return c2d.call(()=>{e&&e()},3);let t=this._characters[this._currentIndex].getChildByName("ROOTSHJnt"),n=t.worldPosition.clone();this.camera_track_tween=(new c2d.Timeline).to({t:0},3,{t:1,onUpdate:()=>{let e=this.scene.camera,s=e.position;e.lookAt(new o(s.x,s.y+3*(t.worldPosition.clone().y-n.y),-s.z)),this.resizeBooster()},onComplete:()=>e&&e()})}onUpdate(){if(this._rotate){let e=c2d.time.deltaTime;this.mainPlatform.quaternion.slerp(this._platformQuaternions[this._currentIndex],Math.min(5*e,1)),l.set(0,0,1).applyQuaternion(this.mainPlatform.quaternion),c.set(0,0,1).applyQuaternion(this._platformQuaternions[this._currentIndex]),l.angleTo(c)<.001&&(this.mainPlatform.quaternion.copy(this._platformQuaternions[this._currentIndex]),this._rotate=!1)}if(this.need_resize){const e=game.engine.renderer.screen,t=e.width/e.height;this.desktopCamera.aspect=this.landscapeCamera.aspect=this.portraineCamera.aspect=t,this.scene.camera=this.getCamera(),this.resetLookAt(),this.need_resize=!1,this.resizeBooster()}}resizeBooster(){this.scene.camera.updateProjectionMatrix(),this.scene.camera.updateWorldMatrix();const e=game.components.sceneui.view.tree.nodeMap.boosterContainer,t=e.getGlobalPosition(),n=e.z/100;this._raycaster.setFromCamera(new i(t.x,t.y),this.scene.camera),this.booster.position.copy(this._raycaster.ray.at(n,new o))}resetLookAt(){const e=this.scene.camera.position;this.scene.camera.lookAt(new o(e.x,e.y,-e.z))}getCamera(){return game.device.desktop?this.desktopCamera:game.device.portrait?this.portraineCamera:game.device.tablet?this.desktopCamera:this.landscapeCamera}}c2d.display3d.R3DLoader.registerControllerClass("CharacterSelection",h)},{}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const{Vector3:s}=c2d.display3d.Math;n.default=class{constructor(e,t,n,i){this._object3D=t,this._object3D.position.copy(i),this._object3D.position.add(new s(2*Math.random()-1,0,2*Math.random()-1)),this._bonusLevel=e,this._bonusLevel.scene.add(this._object3D),this._target=this._bonusLevel.turret.object3D.worldPosition,this._targetPosition=this._target.clone(),this._targetPosition.x+=Math.randomFloat(-5,5),this._targetPosition.z+=Math.randomFloat(-5,5),this._speed=Math.randomFloat(2,5),this._animator=this._object3D.children[0].animator,this._hitpoints=1,this._dead=!1,this._lootData=n.loot,this._animator.currentState=this._animator.defaultState,this._animator.params.run=!0,this._exposionVFX=null,this.onDie=null,this.onDropLoot=null}get object3D(){return this._object3D}get isDead(){return this._dead}set exposionVFX(e){this._exposionVFX||(this._exposionVFX=e)}die(){this._dead=!0,this._hitpoints=0,this._animator.params.die=!0,this._exposionVFX.parent?c2d.call(()=>this.object3D.removeFromParent(),.3):(this._exposionVFX.position.set(0,.25,0),this._exposionVFX.scale.set(1,1,1),this._exposionVFX.quaternion.set(0,0,0,1),this._exposionVFX.animator.params.play=!0,this._exposionVFX.animator.getStateByName("explosion").onExit.connect(()=>{this.object3D.removeFromParent(),this._exposionVFX.removeFromParent()},!0),this.object3D.add(this._exposionVFX)),this.onDropLoot(this._lootData),this.onDie()}update(){if(!c2d.globalStore.get("pauseGame")&&!this._dead){let e=this._targetPosition.clone().sub(this._object3D.position);if(e.length()>3){let t=c2d.time.deltaTime*this._speed;e.setLength(t),this.object3D.position.add(e),this.object3D.lookAt(this._target)}}}}},{}],165:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator");const s=c2d.display3d.Raycaster,{Vector2:i}=c2d.display3d.Math;class o extends c2d.display3d.Controller{onCreate(){this._raycaster=new s,this._headsState=[],this._idleTime=0}onStart(){this.model.getChildByName("boss_geo").onBeforeRender=()=>{for(let e=0;e<this._headsState.length;++e)if(this._headsState[e].health_point){if(!this._headsState[e].armour)for(let t of this.armours[e])t.scale.set(0,0,0),t.updateWorldMatrix(!0)}else this.heads[e].scale.set(0,0,0),this.heads[e].updateWorldMatrix(!0)},this.model.animator.onEvent=e=>{this.bonusLevel.cameraBonus.animator.params.shake=!0}}get animator(){return this.model.animator}get liveHeads(){let e=[];for(let t=0;t<this._headsState.length;++t)this._headsState[t].health_point&&e.push(t);return e}reset(){game.audioManager.stopAudio("boss_idle"),this._object3D.visible=!1,this._headsState=[],this._idleTime=0}updateHeadsState(e){this._headsState=Object.values(e.extra.boss.health)}playEnterAnimation(e){this.object3D.visible=!0,this.animator.currentState=this.animator.defaultState,this.animator.params.enterToLevel=!0,this.bonusLevel.cameraBonus.animator.params.bossIn=!0,game.audioManager.playAudio("boss_entering"),this.animator.getStateByName("boss_in").onExit.connect(()=>{game.audioManager.playAudio("boss_idle"),e&&e()},!0)}setIdleAnimation(){this._idleTime=0,this.object3D.visible=!0,this.animator.currentState=this.animator.getStateByName("idle"),this.blinkHeads()}activeChoice(e){return()=>{this._raycaster.ray.origin.copy(this.scene.camera.worldPosition),this._raycaster.ray.direction.set(0,0,-1).applyQuaternion(this.scene.camera.worldQuaternion);let t=-1;for(let e=0;e<this.heads.length;++e)if((this._headsState[e].health_point||this._headsState[e].armour)&&this.heads[e].raycast(this._raycaster)){t=e;break}if(-1!==t)return e(t+1),this._idleTime=0,!0}}convertGoal(e){return"head_".concat(e.zone-1,"_").concat("armour"===e.goal?0:1)}blinkHead(e){let t=this.model.getObjectByName("boss_geo"),n=0===e?3:2===e?0:1;t.getMaterialByIndex(0).finalColor.w=0,t.getMaterialByIndex(1).finalColor.w=0,t.getMaterialByIndex(3).finalColor.w=0,t.action.reset(),t.action.blinkFinalColor(.5,.15,{},0,n)}blinkHeads(){let e=0;for(let t=0;t<this._headsState.length;++t)(this._headsState[t].health_point||this._headsState[t].armour)&&c2d.call(()=>this.blinkHead(t),e+=.5)}playDamageAnimation(e,t,n){let s,i=e.fight_with_boss.extra.fight_result;game.audioManager.stopAudio("boss_idle"),i.success?("armour"===i.goal.goal?game.audioManager.playAudio("boss_lose_armor"):game.audioManager.playAudio("boss_lose_head"),s=this.convertGoal(i.goal)):(s="hit",Math.random()<.5?(game.audioManager.playAudio("boss_take_hit_special"),this.animator.params["attack_".concat(this.liveHeads.random)]=!0):game.audioManager.playAudio("boss_take_hit")),this.animator.params[s]=!0,this.animator.getStateByName("idle").onEnter.connect(()=>{this.updateHeadsState(e),this.liveHeads.length?(game.audioManager.playAudio("boss_idle"),n()):(this.animator.params.defeat=!0,game.audioManager.playAudio("boss_die"),this.animator.getStateByName("defeat").onExit.connect(()=>n(),!0))},!0),this.blinkHead(t),this._idleTime=0}getFightResultHead(e){return e.fight_with_boss.extra.fight_result.goal.zone-1}onUpdate(){this._idleTime+=c2d.time.deltaTime,this._idleTime>3&&(this._idleTime=0,this.blinkHeads())}}c2d.display3d.R3DLoader.registerControllerClass("Boss",o)},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],166:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.TState=void 0;const{Euler:s,Vector2:i,Vector3:o,Spherical:r,Matrix4:a,Quaternion:l}=c2d.display3d.Math,c=c2d.display3d.Raycaster;n.TState={kWait:0,kRun:1,kWalk:2,kAttack:3,kSuperKill:4,kUserControl:5};const u=0,h=1;class d extends c2d.display3d.Controller{onCreate(){this._level=null,this._curveSpeed=.35,this._walkSpeed=5,this._rotateSpeed=4,this._fastSpinSpeed=1,this._path=null,this._pathTime=0,this.rot_power,this.prev_quat,this.focus_enemy,this._targetPosition=new o(0,0,0),this._enemies=[],this._state=n.TState.kWait,this.onFinishWay=null,this._manual_mode=!1,this._KeyFire=!1,this._canFire=!0,this._canRun=!0,this._rayBulletActive=!1,this.xRotBone=this._object3D.getChildByName("X_Rot_Asix"),this._inputVelocity=new i(0,0),this._raycaster=new c,this.events=null,this._activeWeapon=u}onStart(){this.bullet.visible=!1,this.bullet.position.set(0,0,0),this._fastSpinSpeed=.8*this.animator.getStateByName("attack_2").clipDuration,this._object3D._rigidBody.body.linearDamping=.9;const e=this.muzzle.animator.getStateByName("shot");e.onEnter.connect(()=>{this.muzzle.visible=!0}),e.onExit.connect(()=>{this.muzzle.visible=!1}),this.muzzle.visible=!1}set level(e){this._level=e}get level(){return this._level}get animator(){return this.model.animator}set pathTime(e){this._pathTime=e,this.updatePosition()}get pathTime(){return this._pathTime}set path(e){this._path=e,this._pathTime=0,this.updatePosition()}updatePosition(){if(this._path){let e=this._path.getPointAt(this._pathTime);this._object3D.position.copy(e)}}run(e,t,s){if(this._enemies=[...e],s)return game.audioManager.playAudio("".concat(this.object3D.name,"_boost_run")),this._state=n.TState.kSuperKill,this.animator.params.super_kill=!0,void c2d.call(()=>this.massKill(),.65);t&&(this.events.emit(this.events.config.SHOW_MANUAL_CONTROLLS,this.use_ui_controlls),this.events.emit(this.events.config.SET_MANUAL_WEAPON,this._activeWeapon)),this._state=n.TState.kRun,this.animator.params.run=!0,this._manual_mode=t,game.audioManager.playAudio("".concat(this.object3D.name,"_run"))}massKill(){game.audioManager.playAudio("".concat(this.object3D.name,"_shoot_secondary")),c2d.call(()=>game.audioManager.playAudio("explosion"),.5),this._enemies.splice(0,this._enemies.length).forEach(e=>{this.secondWeaponShot(e.object3D.worldPosition.add(new o(0,.5,0)),.5,()=>{e.takeDamage(1,!1)})})}firstWeaponShot(e,t,n){let s,i;game.audioManager.playAudio("".concat(this.object3D.name,"_shoot")),"biotic"===this.object3D.name?(s=this.bullet,s.position.set(0,0,0),s.updateWorldMatrix(!0,!0),s.action.reset(),e=s.parent.worldToLocal(e)):(s=this.bullet.clone(),s.visible=!0,s.position.copy(this.muzzle.worldPosition),this.object3D.scene.add(s),i=()=>{s.removeFromParent()}),s.action.moveTo(e,t,{onComplete:()=>{i&&i(),n&&n()}})}secondWeaponShot(e,t,n){let s=this.secondBullet.clone();s.position.copy(this.secondWeaponPoint.worldPosition),s.lookAt(e),s.action.moveTo(e,t,{onComplete:()=>{this.spawnExplosion(e).scale.set(.8,.8,.8),s.removeFromParent(),n&&n()}}),this.object3D.scene.add(s);let i=s.getChildByName("flash_place");i&&(i.visible=!0)}walkTo(e){this._state=n.TState.kWalk,this._targetPosition.copy(e),this.animator.params.run=!0;let t=this._targetPosition.clone();t.y=0,this._object3D.lookAt(t),game.audioManager.playAudio("".concat(this.object3D.name,"_run"))}getNextEnemy(){let e=null,t=Number.MAX_VALUE;for(let n of this._enemies)if(!n.isDead){let s=this.object3D.worldPosition.distanceTo(n.object3D.worldPosition);s<t&&(e=n,t=s)}return e}spawnExplosion(e){let t=this.explosion.clone();return t.animator.currentState=this.explosion.animator.defaultState,t.quaternion.copy(this.object3D.quaternion),t.position.copy(e),this.scene.add(t),c2d.call(()=>t.removeFromParent(),t.animator.currentState.clipDuration-.1),t}enableManualControll(){const e=this._object3D.scene,t=e.camera;t.controller.floatDistance=!0,this._state=n.TState.kUserControl;let s=this.object3D._rigidBody;this.object3D.position.y=1e-4,this.object3D.updateWorldMatrix(),s.teleport(this.object3D.worldPosition,this.object3D.worldQuaternion),e._physicEnabled=!0;let i={};const o=e=>{this._inputVelocity.set(0,0),e.KeyW&&(this._inputVelocity.y=1),e.KeyS&&(this._inputVelocity.y=-1),e.KeyA&&(this._inputVelocity.x=1),e.KeyD&&(this._inputVelocity.x=-1)},r=(e,t)=>{this._object3D.rotateY(.001*-t);let n=this.xRotBone.rotation;n.x+=.001*e,n.x=Math.max(-Math.PI/12,Math.min(Math.PI/12,n.x)),this.xRotBone.rotation=n},a=(e,t)=>{this._KeyFire=e,e&&(this._activeWeapon=t,this.events.emit(this.events.config.SET_MANUAL_WEAPON,this._activeWeapon))};this.events.emit(this.events.config.ENABLE_MANUAL_CONTROLLS,{onMouseDown:e=>{1===e.which?a(!0,u):a(!0,h)},onMouseUp:()=>{this._KeyFire=!1},onKeyDown:e=>{i[e.code]=!0,o(i)},onKeyUp:e=>{i[e.code]=!1,o(i)},onMouseMove:e=>{const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;r(n,t)},onMove:e=>this._inputVelocity=e.clone(),onRotate:r,onFire:a,resetState:()=>{this._KeyFire=!1,this._inputVelocity.set(0,0)}}),this.disableManualControll=()=>{this._inputVelocity.set(0,0),this.animator.params.run=!1,this._state=n.TState.kWait,e._physicEnabled=!1,this.xRotBone.action.rotate(new l,1),this._KeyFire=!1,t.controller.floatDistance=!1,game.audioManager.stopAudio("".concat(this.object3D.name,"_run")),this.events.emit(this.events.config.DISABLE_MANUAL_CONTROLLS)}}onUpdate(){if(c2d.globalStore.get("pauseGame"))return void(this.animator.pause=!0);this.animator.pause=!1;let e=c2d.time.deltaTime;if(this._state===n.TState.kRun||this._state===n.TState.kAttack||this._state===n.TState.kSuperKill)this._pathTime+=this._state===n.TState.kSuperKill?e/this._fastSpinSpeed:e*this._curveSpeed*(this._state===n.TState.kAttack||this.focus_enemy?.3:1),this._pathTime>1&&(this._pathTime=1),void 0!==this.rot_power&&(this.rot_power<1?(0===this.rot_power&&(this.prev_quat=this._object3D.quaternion.clone()),this._object3D._quaternion.copy(this.prev_quat),this.rot_power+=e*this._rotateSpeed):this.rot_power=void 0),this.focus_enemy?(this._object3D.lookAt(this.focus_enemy._object3D.worldPosition,this.rot_power),void 0===this.rot_power&&this.muzzle.lookAt(this.focus_enemy._object3D.getChildByName("ROOTSHJnt").worldPosition)):this._object3D.lookAt(this._path.getPointAt(this._pathTime),this.rot_power),this.updatePosition(),1===this._pathTime?(this._state=n.TState.kWait,this.animator.params.run=!1,game.audioManager.stopAudio("".concat(this.object3D.name,"_run")),this.onFinishWay&&this.onFinishWay()):this._pathTime>=.3&&this._state===n.TState.kRun&&(this._manual_mode?(game.audioManager.stopAudio("".concat(this.object3D.name,"_run")),this.enableManualControll()):this._enemies.length&&(this.focus_enemy?null==this.rot_power&&(this._state=n.TState.kAttack,this.animator.params.attack=!0,this.muzzle.animator.params.fire=!0,this.animator.getStateByName("attack_1").onExit.connect(()=>{this._state=n.TState.kRun,this.rot_power=0,this.focus_enemy=null,this.bullet.visible=!1,this.bullet.position.set(0,0,0)},!0),this.muzzle.lookAt(this.focus_enemy._object3D.getChildByName("ROOTSHJnt").worldPosition),this.firstWeaponShot(this.focus_enemy._object3D.getChildByName("ROOTSHJnt").worldPosition,.18,()=>{this._enemies.remove(this.focus_enemy),this.focus_enemy.die()})):(this.focus_enemy=this.getNextEnemy(),this.rot_power=0)));else if(this._state===n.TState.kWalk){let t=this._targetPosition.clone().sub(this._object3D.position),s=t.length(),i=this._walkSpeed*e;i>s?(this._state=n.TState.kWait,this.animator.params.run=!1,this.onFinishWay&&this.onFinishWay(),game.audioManager.stopAudio("".concat(this.object3D.name,"_run")),this._object3D.position.copy(this._targetPosition)):(t.setLength(i),this._object3D.position.add(t))}else if(this._state===n.TState.kUserControl){let e=this.object3D._rigidBody.body.velocity,t=new o(this._inputVelocity.x,0,this._inputVelocity.y);if(!this._canRun)return;if(t.normalize().multiplyScalar(8.5),t.applyQuaternion(this._object3D.quaternion),e.x=t.x,e.z=t.z,this._KeyFire&&this._canFire)this.emitBullet(e);else if(this.muzzle.animator.currentState!==this.muzzle.animator.defaultState&&(this.breachAttackAnimation(e),"biotic"===this.object3D.name)){const e=this.getCrosshairTarget();if(null==e)return!1;this.muzzle.lookAt(e.point),this.updateRayBullet(e.point),this._rayBulletActive&&!this.checkEnemyHit(e)&&this.onFinishWay&&this.onFinishWay()}game.audioManager.playAudio("".concat(this.object3D.name,"_run")),this.animator.params.run=!0,e.x||e.z||(this.animator.params.run=!1,game.audioManager.stopAudio("".concat(this.object3D.name,"_run")))}}dumpData(){return{position:this.object3D.position.clone(),quaternion:this.object3D.quaternion.clone()}}restoreData(e){this.object3D.position.copy(e.position),this.object3D.quaternion.copy(e.quaternion)}getCrosshairTarget(){this._raycaster.setFromCamera(new i(game.size.canvasField.width/2,game.size.canvasField.height/2),this._object3D.scene.camera),this._raycaster.ray.origin.setFromMatrixPosition(this.lookPoint.worldMatrix);const e=this._raycaster.intersectObject(this.object3D.parent,!0);return e.length?e[0]:null}updateRayBullet(e){this.bullet.updateWorldMatrix(!0,!0);const t=this.bullet.parent.worldToLocal(e);this.bullet.position.copy(t)}emitBullet(e){let t,n;this._activeWeapon===u?(e.x||e.z?(t="attack",n=this.animator.getStateByName("attack_1")):(t="manual_attack_1",n=this.animator.getStateByName("attack_1_aim")),n.onEnter.connect(()=>{this.muzzle.animator.params.fire=!0;const e=this.getCrosshairTarget();if(null===e)return game.audioManager.playAudio("".concat(this.object3D.name,"_shoot")),!1;"biotic"===this.object3D.name?this.firstWeaponShot(e.point,.3,()=>this._rayBulletActive=this.muzzle.animator.currentState!==this.muzzle.animator.defaultState):this.firstWeaponShot(e.point,.2,()=>!this.checkEnemyHit(e)&&this.onFinishWay&&this.onFinishWay())},!0)):(e.x=e.z=0,this._canRun=!1,t="manual_attack_2",n=this.animator.getStateByName("attack_2_aim"),n.onEnter.connect(()=>{if(this._enemies.length)this._object3D.action.lookAt(this.getNextEnemy()._object3D.worldPosition,.2),c2d.call(()=>{this.massKill(),this.onFinishWay&&this.onFinishWay()},.2);else{const e=this.getCrosshairTarget();if(game.audioManager.playAudio("".concat(this.object3D.name,"_shoot_secondary")),null===e)return!1;const t=.04*e.point.clone().sub(this.object3D.worldPosition).length();c2d.call(()=>{this.secondWeaponShot(e.point,t,()=>{game.audioManager.playAudio("explosion")})},.15)}},!0)),this._canFire=!1,this.animator.params[t]=!0,n.onExit.connect(()=>{this._canFire=!0,this._canRun=!0,this._rayBulletActive=!1},!0)}checkEnemyHit(e){for(let t=0;t<this._enemies.length;t++)if(this._enemies[t].object3D===e.object){this._enemies.splice(t,1)[0].die(),!this._enemies.length&&this.onFinishWay&&this.onFinishWay();break}return this._enemies.length}breachAttackAnimation(e){const t=e.x+e.z&&this.animator.currentState===this.animator.getStateByName("attack_1_aim"),n=!(e.x+e.z)&&this.animator.currentState===this.animator.getStateByName("attack_1");(t||n)&&(this.animator.currentState=this.animator.defaultState,this.muzzle.animator.currentState=this.muzzle.animator.defaultState,game.audioManager.stopAudio("".concat(this.object3D.name,"_shoot")))}}c2d.display3d.R3DLoader.registerControllerClass("Character",d)},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=c2d.display3d.Utils,i=c2d.display3d.Math.Vector3,o=c2d.display3d.Collider,r={elite_monster:{break:"enemy_1_growl",die:"enemy_1_2_3_dieing"},ranged:{break:"enemy_2_3_growl",die:"enemy_1_2_3_dieing"},ranged_2:{break:"enemy_2_3_growl",die:"enemy_1_2_3_dieing"},enemy_closeup_1:{break:"enemy_4_5_growl",die:"enemy_4_5_dieing"},enemy_closeup_2:{break:"enemy_4_5_growl",die:"enemy_4_5_dieing"}};n.default=class{constructor(e,t,n,s,i){this._levelPart=e,this._object3D=s[n.id].clone(),this._object3D.position.copy(t),this._levelPart.object3D.add(this._object3D),this._animator=this._object3D.children[0].animator,this._hitpoints=1,this._dead=!1,this._run=!1,this._runSpeed=2,this._lootData=n.loot,this._lootFontPrefab=i,this._intensity=0,this._object3D.getChildByName("monster_geo").onBeforeRender=e=>{e.material.finalColor.w=this._intensity},this._object3D.getChildByName("monster_geo").onAfterRender=e=>{e.material.finalColor.w=0},this._animator.getStateByName("idle_break").onExit.connect(()=>this.run()),this._exposionVFX=null,this.attack_tween=null,this.attack_state=this._animator.getStateByName("attack_1")||this._animator.getStateByName("idle_attack"),this.attack_state.onEnter.connect(()=>this.attack_tween=c2d.call(()=>game.components.game.view.bloodScreen.blink(),.5)),this.attack_state.onExit.connect(()=>this.attack_tween&&this.attack_tween.kill())}get object3D(){return this._object3D}get isDead(){return this._dead}set exposionVFX(e){this._exposionVFX||(this._exposionVFX=e)}idleBreak(){this._animator.params.idleBreak=!0,game.audioManager.playAudio(r[this.object3D.name].break)}run(){this._dead||(this._run=!0)}takeDamage(e,t){this._dead||(this._hitpoints-=e,this._hitpoints<=0&&this.die(t))}die(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];game.audioManager.playAudio(r[this.object3D.name].die),this._dead=!0,this._hitpoints=0,this._animator.params.attack=!1,this._animator.params.run=!1,this._run=!1,c2d.Tween.to(this,.35,{_intensity:.35,yoyo:!0,repeat:1}),this._animator.params.damage=!0,this._lootData.value&&c2d.call(()=>this.showAmount(this._lootData.amount,this._lootData.value),.5),!this._exposionVFX.parent&&e&&(this._exposionVFX.position.copy(this._object3D.worldPosition).add(new i(0,.5,0)),this._exposionVFX.position.add(this._object3D.forward.multiplyScalar(.5)),this._exposionVFX.scale.set(1,1,1),this._exposionVFX.lookAt(this.object3D.scene.camera.position),this._exposionVFX.animator.params.play=!0,this._exposionVFX.animator.getStateByName("explosion").onExit.connect(()=>{this._exposionVFX.removeFromParent()},!0),this._object3D.scene.add(this._exposionVFX)),this.object3D.getComponents(o).forEach(e=>this.object3D.removeComponent(e))}showAmount(e,t){let n=s.createNumbersObject(e,this._lootFontPrefab,"font_",1.5,1);n.scale.set(0,0,0),n.position.set(0,1,0),n.action.scaleTo(new i(.7,.7,.7),.25),this.object3D.add(n),t>=10?game.audioManager.playAudio("win_4"):t>=7?game.audioManager.playAudio("win_3"):t>=3?game.audioManager.playAudio("win_2"):game.audioManager.playAudio("win_1"),c2d.call(()=>{n.action.scaleTo(new i(0,0,0),.25)},.7),c2d.call(()=>{n.removeFromParent()},1)}dispose(){this._object3D.removeFromParent()}update(){if(!c2d.globalStore.get("pauseGame")&&!this._dead){let e=this._levelPart.character;this._object3D.lookAt(e.object3D.worldPosition),this._run&&(this.object3D.worldPosition.distanceTo(e.object3D.worldPosition)>2.5?(this._animator.params.run=!0,this._animator.params.attack=!1,game.audioManager.stopAudio("enemy_attack"),this.object3D.position.add(this.object3D.forward.multiplyScalar(c2d.time.deltaTime*this._runSpeed))):(this._animator.params.run=!1,this._animator.params.attack=!0,game.audioManager.playAudio("enemy_attack")))}}}},{}],168:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),e("./Bigwins.js"),e("./Levels/Level.js"),e("./Levels/LevelPart.js"),e("./Levels/LevelBonus.js"),e("./Levels/Turret.js"),e("./Characters/Boss.js"),e("./Characters/Character.js"),e("./CameraFollow.js"),e("./CharacterSelection.js");const s=e("./Tutorial/BaseGameTutorial.js"),i=e("./Tutorial/ShowManualTutorial.js"),o=e("./Tutorial/BonusGameTutorial.js"),r=e("./BloodScreen.js"),a=["Commandos","Scout","Biotic"];class l extends game.sources.Component{}class c extends game.sources.Handler{constructor(){super(...arguments),this._MANUAL_MODE=!1,this.events.subscribe(this.events.config.TOGGLE_MANUAL_MODE,e=>{this._MANUAL_MODE=e})}get statesConfig(){return{Idle:{begin:this.onIdleBegin},Init:{enter:this.onInitEnter},Spin:{enter:this.onSpinEnter},SpinStop:{enter:this.onSpinStopEnter},ShowResult:{enter:this.onShowResultEnter},Celebration:{enter:this.onCelebration},WaitFreespins:{enter:this.onWaitFreespinsEnter},BonusGameInit:{enter:this.onBonusGameInitEnter},BonusGame:{enter:this.onBonusGameEnter},BonusChoice:{enter:this.onBonusChoice},BonusGameStepProgress:{enter:this.onBonusGameStepProgress},BonusGameFinish:{enter:this.onBonusGameFinishEnter}}}onIdleBegin(e){let{finish:t}=e;this.component.view.showManualTutorial.showTutorial(),t()}onInitEnter(e){let{finish:t}=e;this.component.view.updateRocketsCount=(e,t)=>this.events.emit(this.events.config.SET_ROCKETS_COUNT,{count:e,animate:t}),this.component.view.buildTutorials(),this.component.store.cacheInitData(),this.component.controller.onInit(),t()}onSpinEnter(e){let{finish:t}=e;this.component.view.disableFastSpin(),this.component.view.showManualTutorial.isFirstSpinStarted=!0,t()}onSpinStopEnter(e){let{finish:t,actions:n}=e;if(this.component.store.updatePlayerData(),this.component.store.freespins&&this.component.store.freespins.done?this.component.view.stopFreeSpin(this.component.store.freespins,this.component.store.player,this.component.store.enemies,t):this.component.store.locations?this.component.view.stopSpin(this.component.store.locations,this.component.store.enemies,this.component.store.nextBonus,this.component.store.lootbox,this._MANUAL_MODE,this.events,n.updateBoostersUI,t):(console.warn("initspin"),t()),!this._MANUAL_MODE){if(!this.component.store.getItem("turboMode"))return{onSkip:()=>{this.component.view.enableFastSpin()}};this.component.view.enableFastSpin()}}onShowResultEnter(e){let{finish:t}=e;this.component.store.freespins||game.audioManager.playAudio("back"),console.error("onShowResultEnter");let n=this.component.store.getItem("totalWin");game.components.gamescreen.updateTotalWin(n),c2d.call(t,n?.5:0)}onCelebration(e){let{finish:t}=e;if(this.component.store.freespins)return void t();let n=this.component.store.getItem("bet"),s=this.component.store.getItem("wins").total;return this.component.view.celebration(n,s,t),{onSkip:()=>{this.component.view.hideCelebration()}}}onWaitFreespinsEnter(e){let{finish:t}=e;this.component.view.bonusLevelActive&&game.audioManager.playAudio("back_bonus"),t()}onBonusGameInitEnter(e){let{finish:t}=e;console.error("onBonusGameInitEnter"),this.component.view.showBonusBossCutscene(t)}onBonusGameEnter(e){let{finish:t}=e;this.component.view.bonusGameEnter(this.component.store.bonus),t()}onBonusChoice(e){let{finish:t}=e;this.events.emit(this.events.config.ENABLE_BONUS_GAME_CONTROLLS,this.component.view.bonusGameChoice(e=>{c2d.globalStore.set("bonusChoice",e),t()}))}onBonusGameStepProgress(e){let{finish:t}=e;this.component.view.bonusGameStepProgress(this.component.store.bonus,t)}onBonusGameFinishEnter(e){let{finish:t}=e;this.events.emit(this.events.config.DISABLE_BONUS_GAME_CONTROLLS),this.component.view.bonusGameFinish(this.component.store.bonus,t)}get globalActionsConfig(){return{showCharacterSelection:e=>{let{charIndex:t,showUI:n,unlockUI:s}=e;return this.component.controller.view.showCharacterSelection(t,n,s)},changeCharacter:e=>this.component.controller.view.changeCharacter(e),hideCharacterSelection:e=>this.component.controller.view.hideCharacterSelection(e)}}}class u extends game.sources.Store{cacheInitData(){this._cacheInitData=this.getItem("initData"),this._cachePlayerStorage=Object.values(this.getItem("extraData").player_storage)}addToGlobal(){this.addItem("scene"),this.addItem("defaultBet"),this.addItem("playerStorage")}get isIntroSkipped(){return!this.getItem("showIntro")}get setSkipIntro(){return this.getItem("setShowIntro")}get scene(){return this.component.view.scene}get player(){return this.getItem("playerData")}get locations(){return this.getItem("extraData").locations}get enemies(){return this.getItem("extraData").enemies}get lootbox(){return this.getItem("extraData").box}get nextBonus(){return"initfreespin"===this.getItem("getNextAction")||"freespin"===this.getItem("getNextAction")}get freespins(){return this.getItem("freespins")}get bonus(){return this.getItem("bonus")}get playerStorage(){return this._cachePlayerStorage}updatePlayerData(){let e=this.playerStorage.find(e=>e.type===this.player.type);e?(e.bet=this.getItem("bet"),e.player=this.player):(e={bet:this.getItem("bet"),type:this.player.type,player:this.player},this.playerStorage.push(e)),console.warn(this.player,this.getItem("bet"))}get defaultBet(){return this._cacheInitData.bet}}class h extends game.sources.Controller{onInit(){if(this.store.player.type||(this.store.player.type=a[0]),this.view.initializeLevel(this.store.locations,this.store.nextBonus,a.indexOf(this.store.player.type),this.store.lootbox),this.store.freespins&&this.store.freespins.done){let e=this.store.player;this.store.bonus.extra&&this.store.bonus.extra.player&&(e=this.store.bonus.extra.player),this.view.initializeBonusLevel(e)}}}class d extends game.sources.View{constructor(){super(...arguments),this._scene=null,this.baseGameTutorial=new s.default(...arguments),this.showManualTutorial=new i.default(...arguments),this.bonusGameTutorial=new o.default(...arguments),this.bloodScreen=new r.default(...arguments)}get scene(){return this._scene}get bonusLevelActive(){return this._level.bonusLevelActive}create(){super.create(...arguments),this.baseGameTutorial.create&&this.baseGameTutorial.create(),this.showManualTutorial.create&&this.showManualTutorial.create(),this.bonusGameTutorial.create&&this.bonusGameTutorial.create()}initialize(){super.initialize(...arguments),this.baseGameTutorial.initialize(...arguments),this.showManualTutorial.initialize(...arguments),this.bonusGameTutorial.initialize(...arguments)}resizeScreen(){super.resizeScreen(...arguments),this.baseGameTutorial.resizeScreen(...arguments),this.showManualTutorial.resizeScreen(...arguments),this.bonusGameTutorial.resizeScreen(...arguments)}onCreate(){this._scene=this.assetsStore.getResource3d("scene"),this._scene.autoClear=!0,this._scene.remove(this._scene.camera),this._scene.camera=this._scene.getObjectByName("CameraFollow"),this.layers.background.addChild(this._scene),this._level=this._scene.getControllerByName("Level"),this._scene.start()}buildTutorials(){this.baseGameTutorial.buildTree(),this.showManualTutorial.buildTree(),this.bonusGameTutorial.build(),this.bloodScreen.buildTree(),this._level.openBonusGameTutorial=()=>{this.bonusGameTutorial.showTutorial()}}initializeLevel(e,t,n,s){this._level.initialize(e,t,n,s),this._level.openBaseGameTutorial=e=>this.baseGameTutorial.showTutorial(e)}initializeBonusLevel(e){this._level.initializeBonusLevel(e)}set updateRocketsCount(e){this._level.levelBonus.controller.updateRocketsCount=e}enableFastSpin(){this._level.fast_spin=!0}disableFastSpin(){this._level.fast_spin=!1}stopSpin(e,t,n,s,i,o,r,a){this._level.runToNextPart(e,t,n,s,i,o,r,a)}stopFreeSpin(e,t,n,s){this._level.bonusLevelActive?this._level.stepFreespins(e,t,n,s):this._level.runToBonusLevel(e,t,n,s)}celebration(e,t,n){this._level.bigwins.controller.celebration(this._scene,e,t,n)}hideCelebration(){this._level.bigwins.controller.hide()}showCharacterSelection(e,t,n){this._level.showCharacterSelection(e,t,n)}hideCharacterSelection(e){this._level.hideCharacterSelection(e)}changeCharacter(e){this._level.characterSelection.controller.changeCharacter(e)}showBonusBossCutscene(e){this._level.levelBonus.controller.showBonusBossCutscene(e)}bonusGameEnter(e){this._level.levelBonus.controller.bonusGameEnter(e)}bonusGameChoice(e){return this._level.levelBonus.controller.bonusGameChoice(e)}bonusGameStepProgress(e,t){this._level.levelBonus.controller.bonusGameStepProgress(e,t)}bonusGameFinish(e,t){this._level.finishBonusLevel(e,t)}onResizeScreen(){this._level.characterSelection.controller.need_resize=!0}setComponent(e){super.setComponent(e),this.baseGameTutorial.setComponent(e),this.showManualTutorial.setComponent(e),this.bonusGameTutorial.setComponent(e)}}const p={Component:l,Handler:c,Store:u,Controller:h,View:d};game.componentsManager.registerComponent("Game",p)},{"./Bigwins.js":160,"./BloodScreen.js":161,"./CameraFollow.js":162,"./CharacterSelection.js":163,"./Characters/Boss.js":165,"./Characters/Character.js":166,"./Levels/Level.js":169,"./Levels/LevelBonus.js":170,"./Levels/LevelPart.js":171,"./Levels/Turret.js":172,"./Tutorial/BaseGameTutorial.js":173,"./Tutorial/BonusGameTutorial.js":174,"./Tutorial/ShowManualTutorial.js":175,"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],169:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.iterator");const{Euler:s,Vector3:i,Quaternion:o,CatmullRom:r}=c2d.display3d.Math,a=c2d.display3d.Utils;class l extends c2d.display3d.Controller{onStart(){this._character=null,this._currentLevelPart=null,this._nextLevelPart=null,this._bonusLevelActive=!1,this._cameraFollow=this.scene.getObjectByName("CameraFollow").controller,this._defaultFog=Object.assign({},this.scene.fog),this._selectCharacterFog={near:6,far:9,color:[0,0,0]},this._bonusGameFog={near:2,far:60,color:[.427,.01,0]},this.fast_spin=!1,this._characterDumpData={},this._nextPosition={0:{0:3,1:0,2:1},1:{0:0,1:1,2:2},2:{0:1,1:2,2:3},3:{0:2,1:3,2:0}},this._characterPositions=[new i(0,0,-8),new i(8,0,0),new i(0,0,8),new i(-8,0,0)],this._levelPositions=[new i(0,0,-25),new i(25,0,0),new i(0,0,25),new i(-25,0,0)],this._levelBonusQuaternions=[(new o).setFromEuler(new s(0,Math.PI,0)),(new o).setFromEuler(new s(0,Math.PI/2,0)),(new o).setFromEuler(new s(0,0,0)),(new o).setFromEuler(new s(0,-Math.PI/2,0))],this._nextDoorIndex=[2,3,0,1],this._positionOnQuad=2,this.openBonusGameTutorial=()=>{},this.openBaseGameTutorial=()=>{},this.characterSelection.controller.characters=this.characters,this.levelBonus.controller.setupEnemiesCache(this.enemies)}get currentLevelPart(){return this._currentLevelPart}get nextLevelPart(){return this._nextLevelPart}get bonusLevelActive(){return this._bonusLevelActive}initialize(e,t,n,s){this._currentLevelPart=this.levelParts[e.current.id].controller,this._currentLevelPart.level=this,this.object3D.add(this._currentLevelPart.object3D),this._nextLevelPart=this.levelParts[e.next.id].controller,this._nextLevelPart.object3D.position.copy(this._levelPositions[this._positionOnQuad]),this._nextLevelPart.level=this,this.object3D.add(this._nextLevelPart.object3D),t&&this._currentLevelPart.showBonusDoor(this._positionOnQuad,this.levelBonusDoor),s&&!s.opened&&this._currentLevelPart.spawnLootbox(!1,s,null,this._positionOnQuad),this.changeCharacter(n),this._character.object3D.position.copy(this._characterPositions[this._positionOnQuad]),this._character.object3D.quaternion.set(0,0,0,1),this._cameraFollow.reset(),this._mainScene=this.scene}showTotalWin(e,t){this.totalWin.scale.set(.1,.1,.1),this.totalWin.position.set(0,.25,-1),this.totalWin.animator.params.show=!0,this.scene.camera.add(this.totalWin);let n=this.totalWin.getObjectByName("amountPlace");n.scale.set(0,0,0),n.action.scaleTo(new i(.7,.7,.7),.15);let s={amount:0},o=new c2d.Timeline;game.audioManager.playAudio("you_win"),o.to(s,2,{amount:e,onUpdate:()=>{game.audioManager.playAudio("counter"),n.removeAll(),n.add(a.createNumbersObject(s.amount.toFixed(2),this.lootFont,"font_",1.5,1))}}),c2d.call(()=>this.hideTotalWin(t),3)}hideTotalWin(e){if(this.totalWin.parent){this.totalWin.animator.params.show=!1;let t=this.totalWin.getObjectByName("amountPlace");t.action.scaleTo(new i(0,0,0),.15),t.action.call(()=>{t.removeAll(),this.totalWin.removeFromParent(),e()},.15)}}showCharacterSelection(e,t,n){this.object3D.removeFromParent(),this._mainScene.add(this.characterSelection),this._mainScene.fog=Object.assign({},this._selectCharacterFog),this.characterSelection.controller.show(e,t,n)}hideCharacterSelection(e){this.characterSelection.controller.hide(e),this.characterSelection.removeFromParent(),this._mainScene.add(this.object3D),this._mainScene.camera=this._cameraFollow.camera,this._mainScene.fog=Object.assign({},this._defaultFog),this.changeCharacter(e)}changeCharacter(e){this._character=this.characters[e].controller,this._character.level=this,this.object3D.add(this._character.object3D),this._cameraFollow.target=this._character.lookPoint,this._cameraFollow.reset()}movingCoordinates(e){this._character.object3D.position.sub(this._nextLevelPart.object3D.position),this._character.object3D.updateWorldMatrix(),this._character.object3D.rigidBody.teleport(this._character.object3D.worldPosition,this._character.object3D.worldQuaternion),this._cameraFollow.reset(),this._currentLevelPart.dispose(),this._currentLevelPart.object3D.removeFromParent(),this._currentLevelPart=this._nextLevelPart,this._currentLevelPart.object3D.removeFromParent(),this._currentLevelPart.object3D.position.set(0,0,0),this.object3D.add(this._currentLevelPart.object3D),this._nextLevelPart=this.levelParts[e.next.id].controller,this._nextLevelPart.level=this,this._nextLevelPart.object3D.position.copy(this._levelPositions[this._positionOnQuad]),this.object3D.add(this._nextLevelPart.object3D)}initializeBonusLevel(e){this.addBonusLevel(),this._characterDumpData=this._character.dumpData(),this.scene.camera=this.levelBonus.controller.cameraBonus,this._character.object3D.visible=!1,this.levelBonus.controller.removeCharaters(),this.levelBonus.controller.rocketsCount=e.bullet_count,this._bonusLevelActive=!0}finishBonusLevel(e,t){this.showTotalWin(e.fight_with_boss.bonus_win+e.fight_with_boss.win_before_bonus,()=>{this._bonusLevelActive=!1,this._mainScene.camera=this._cameraFollow.camera,this._mainScene.fog=Object.assign({},this._defaultFog),this._character.object3D.visible=!0,this._character.restoreData(this._characterDumpData),this.object3D.add(this._character.object3D),this._cameraFollow.reset(),this.levelBonus.controller.reset(),this.levelBonus.removeFromParent(),this._currentLevelPart.hideBonusDoor(this._positionOnQuad,this.levelBonusDoor),this.object3D.add(this._nextLevelPart.object3D),t()})}addBonusLevel(){this._nextLevelPart.object3D.removeFromParent(),this.levelBonus.position.copy(this._levelPositions[this._positionOnQuad]),this.levelBonus.quaternion.copy(this._levelBonusQuaternions[this._positionOnQuad]),this.levelBonus.controller.spawnCharaters(this._character.characterId,this.characters),this.levelBonus.controller.level=this,this.levelBonus.controller.character=this._character,this.object3D.add(this.levelBonus),this.levelBonus.updateWorldMatrix(!0,!0),this.scene.fog=Object.assign({},this._bonusGameFog)}runToBonusLevel(e,t,n,s){this.addBonusLevel(),this._characterDumpData=this._character.dumpData(),this.levelBonus.controller.turret.setDissolveToHide(),this.levelBonus.controller.turret.hideCrosshair(),this.levelBonusDoor.animator.params.open=!0,game.audioManager.playAudio("open_door_bonus"),c2d.call(()=>{this._character.walkTo(this.levelBonus.controller.getCharacterControlPoint(0)),this._character.onFinishWay=()=>{this._character.onFinishWay=null,this.scene.camera=this.levelBonus.controller.cameraBonus,this.levelBonus.controller.playEnterCutscene(()=>{this.openBonusGameTutorial(),this.stepFreespins(e,t,n,s)})}},.5),this._bonusLevelActive=!0}stepFreespins(e,t,n,s){this.levelBonus.controller.stepFreespins(e,t,n,s)}runToNextPart(e,t,n,s,i,o,a,l){let c=this._positionOnQuad;this._positionOnQuad=this._nextPosition[this._positionOnQuad][e.current.direction];let u=this._characterPositions[this._positionOnQuad];u=this._nextLevelPart.object3D.position.clone().add(u),this._character.path=new r([this._character.object3D.position.clone(),this._nextLevelPart.object3D.position.clone(),u.clone()]),n&&this._nextLevelPart.showBonusDoor(this._positionOnQuad,this.levelBonusDoor),this._character.events=o,this._character.onFinishWay=()=>{this._character.onFinishWay=null,this._nextLevelPart.onFinish(i,s,this.lootFont,this._positionOnQuad,a,u,()=>{c2d.call(()=>{i&&o.emit(o.config.HIDE_MANUAL_CONTROLLS),this.movingCoordinates(e),l()},.2)})},game.audioManager.playAudio("open_door"),this._currentLevelPart.openDoor(c),this._nextLevelPart.hideDoor(this._nextDoorIndex[c]),this._nextLevelPart.character=this._character,this._nextLevelPart.spawnEnemies(t,this.enemies,this.lootFont);let h=[.2,.3,.5,.4,.1];for(let e of this._nextLevelPart.enemies)c2d.call(()=>e.idleBreak(),h.shift());c2d.call(()=>{this._character.run(this._nextLevelPart.enemies,i,this.fast_spin),this.fast_spin&&c2d.call(()=>this._cameraFollow.upToCeiling(1),.6),i||c2d.call(()=>{!this.fast_spin&&game.audioManager.stopAudio("".concat(this._character.object3D.name,"_run")),this.openBaseGameTutorial(()=>{!this.fast_spin&&game.audioManager.playAudio("".concat(this._character.object3D.name,"_run"))})},1)},.35)}onUpdate(){if(this.spinPortal.parent&&this.spinPortal.getChildByName("LootOrigin").lookAt(this._character.object3D.worldPosition),this.totalWin.parent){let e=Math.min(game.engine.renderer.width/game.engine.renderer.height*.1,.1);this.totalWin.scale.set(e,e,e)}}}c2d.display3d.R3DLoader.registerControllerClass("Level",l)},{"core-js/modules/es.array.iterator":303,"core-js/modules/es.number.to-fixed":304,"core-js/modules/es.object.assign":305,"core-js/modules/web.dom-collections.iterator":311}],170:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./../Characters/BonusEnemy.js"),{Euler:i,Vector2:o,Vector3:r}=c2d.display3d.Math,a=c2d.display3d.Utils;class l extends c2d.display3d.Controller{onCreate(){this._level=null,this._character=null,this._characters=[],this._enemiesChache=[],this._enemies=[],this._raycaster=new c2d.display3d.Raycaster,this.updateRocketsCount=null}onStart(){this.bossDoor.visible=!1,this.boss.object3D.visible=!1}set level(e){this._level=e}set character(e){this._character=e}set rocketsCount(e){for(let t=0;t<e;++t)this.turret.addRocket(this.rocketPrefab.clone(),!1);this.updateRocketsCount(this.turret.rocketsCount)}getCharacterControlPoint(e){return this.playerPlaces[e].worldPosition}reset(){this.turret.reset(),this.boss.reset(),this.gates[0].visible=!0,this.bossDoor.visible=!1,this.animatedLevel.animator.currentState=this.animatedLevel.animator.defaultState}setupEnemiesCache(e){for(let t=0;t<30;++t)this._enemiesChache.push(e[0].clone())}spawnCharaters(e,t){let n=[0,1,2];n.remove(e);for(let e=0;e<2;++e){let s=t[n[e]];s.position.set(0,0,0),s.quaternion.set(0,0,0,1),this.charactersPlace[e].add(s),this._characters.push(s.controller)}}removeCharaters(){for(let e=0;e<2;++e)this._characters[e].object3D.removeFromParent();this._characters=[]}playEnterCutscene(e){game.audioManager.playAudio("bonus_intro"),this.turret.playDissolveEffect(),this.scene.camera.animator.params.fly=!0,this.scene.camera.animator.getStateByName("camera_bonus_in").onExit.connect(()=>{this.playCharacterAnimation(),c2d.call(()=>{game.audioManager.playAudio("back_bonus"),this._character.walkTo(this.getCharacterControlPoint(1)),c2d.call(()=>{this.scene.camera.animator.params.enter=!0,this.scene.camera.animator.getStateByName("camera_bonus_fight").onExit.connect(()=>{this._character.object3D.removeFromParent(),this.removeCharaters(),this.updateRocketsCount(0),this.turret.showCrosshair(),e()},!0)},.3)},2)},!0)}playCharacterAnimation(){const e=["turn_r","turn_l"];for(let t=0;t<2;++t)this._characters[t].animator.params[e[t]]=!0}stepFreespins(e,t,n,s){this.spawnEnemies(e.done-1,n,s)}spawnEnemies(e,t,n){this.gates[e].animator.params.open=!0,game.audioManager.playAudio("open_door_bonus_2");let i=this.gates[e].getObjectByName("SpawnPoint").worldPosition,o=Object.values(t),r=0;for(let t=0;t<o.length;++t,r+=.2)c2d.call(()=>{let r=new s.default(this,this._enemiesChache[t],o[t],i);r.exposionVFX=this._level.swarmExplosion,this._enemies.push(r),this.updateEnemiesAudio(),r.onDropLoot=e=>this.pickUpLoot(r,e),r.onDie=()=>{this._enemies.remove(r),this.updateEnemiesAudio(),this._enemies.length||(this.gates[e].animator.params.open=!1,n())}},r);this.turret.enemies=this._enemies}updateEnemiesAudio(){this._enemies.length>20?game.audioManager.playAudio("swarm_30"):this._enemies.length>10?game.audioManager.playAudio("swarm_20"):this._enemies.length>2?game.audioManager.playAudio("swarm_10"):this._enemies.length>0?game.audioManager.playAudio("swarm_1"):game.audioManager.stopAudio("swarm_1")}pickUpLoot(e,t){if("Bullet"===t.type){let t=this.rocketPrefab.clone();t.position.copy(e.object3D.position),t.position.y+=.2,this.scene.add(t);let n=game.components.gamescreen.view.manual_bonus_game_controlls.getIconPosition(),s=this.scene.unproject(new r(n.x,n.y,.2));t.lookAt(s),t.rotateY(.5*-Math.PI),t.rotateX(.1*-Math.PI),t.scale.set(.5,.5,.5);const i=1,o=.1;game.audioManager.playAudio("rocket_pick_up"),t.action.follow(s,i),t.action.scaleTo(new r(.1,.1,.1),o,{position:i-o}),this.turret.addRocket(t),this.updateRocketsCount(this.turret.rocketsCount,!0),c2d.Tween.to(this,i,{onUpdate:()=>{s.copy(this.scene.unproject(new r(n.x,n.y,.2)))}})}else"Money"===t.type&&this.spawnMoney(e,t.amount)}spawnMoney(e,t){let n=a.createNumbersObject(t,this.lootFont,"font_",1.5,1);n.position.copy(e.object3D.position),n.quaternion.copy(e.object3D.quaternion),n.scale.set(0,0,0),n.action.scaleTo({x:.4,y:.4,z:.4},.2),n.position.y=1.3,this.scene.add(n),c2d.call(()=>n.action.scaleTo({x:0,y:0,z:0},.25),.75),c2d.call(()=>n.removeFromParent(),1)}collideEnemyWithEnemy(){let e,t,n,s,i,o;let r=this._enemies.length;for(let a=0;a<r-1;++a)for(let l=a+1;l<r;++l)e=this._enemies[a],t=this._enemies[l],e.isDead||t.isDead||(n=e.object3D.position,s=t.object3D.position,i=n.clone().sub(s),o=i.length(),o<1&&(i.setLength(.5*(1-o)),n.add(i),s.sub(i)))}showBonusBossCutscene(e){this.gates[0].visible=!1,this.bossDoor.visible=!0,this.animatedLevel.animator.params.enterBoss=!0,this.boss.playEnterAnimation(),c2d.call(()=>e&&e(),this.animatedLevel.animator.getStateByName("destroy_door").clipDuration)}bonusGameEnter(e){this.gates[0].visible=!1,this.bossDoor.visible=!0,this.animatedLevel.animator.currentState=this.animatedLevel.animator.getStateByName("destroy_door"),this.animatedLevel.animator.currentState.action.setAtEnd(),this.boss.updateHeadsState(e),this.boss.setIdleAnimation()}bonusGameChoice(e){return this.turret.getControlls(this.boss.activeChoice(e))}bonusGameStepProgress(e,t){let n=this.boss.getFightResultHead(e),s=this.boss.headsTargetPoint[n].worldPosition;this.turret.launchRocket(s,()=>{let i=this._level.swarmExplosion;i.position.copy(s),this.scene.add(i),i.scale.set(1,1,1),i.lookAt(this.scene.camera.position),i.animator.params.play=!0,i.animator.getStateByName("explosion").onExit.connect(()=>{i.removeFromParent()},!0),this.boss.playDamageAnimation(e,n,t),this.updateRocketsCount(this.turret.rocketsCount)})}onUpdate(){if(!c2d.globalStore.get("pauseGame")){for(let e of this._enemies)e.update();this._enemies.length>=2&&this.collideEnemyWithEnemy()}}}c2d.display3d.R3DLoader.registerControllerClass("LevelBonus",l)},{"./../Characters/BonusEnemy.js":164,"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],171:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./../Characters/Enemy.js"),i=c2d.display3d.Utils;class o extends c2d.display3d.Controller{onCreate(){this._level=null,this._enemies=[],this._character=null}set character(e){this._character=e}get character(){return this._character}set level(e){this._level=e}get level(){return this._level}get enemies(){return this._enemies}openDoor(e){this.doors[e].animator.params.open=!0}hideDoor(e){this.doors[e].visible=!1,c2d.call(()=>{this.doors[e].visible=!0},1.3)}spawnEnemies(e,t,n){this.enemiesPlace.updateWorldMatrix(!0,!0);let i=Object.values(e);for(let e=0;e<i.length;++e)if(i[e].id<t.length){let o=new s.default(this,this.enemiesPlace.children[e].position,i[e],t,n);o.exposionVFX=this._level.swarmExplosion,this._enemies.push(o)}}spawnLootbox(e,t,n,s,i,o){this.lootboxesPlace.updateWorldMatrix(!0,!0);let r=this._level.lootboxPortal,a="Simple"===t.type?this._level.lootboxCommon:this._level.lootboxRare;a.scale.set(0,0,0);let l=a.getChildByName("lock_open");l.material.opacity=0;let c=a.getChildByName("lock_closed");c.material.opacity=1,this.lootboxesPlace.children[s].add(a),a._rigidBody.teleport(this.lootboxesPlace.children[s].worldPosition,this.lootboxesPlace.children[s].worldQuaternion),game.audioManager.playAudio("chest_in"),t.opened&&(l.material.opacity=1,c.material.opacity=0,this.lootboxesPlace.children[s].add(r),r.animator.params.show=!0),c2d.call(a.action.scaleTo,.1,[a.scale.clone().set(1,1,1),.2,{easing:c2d.easing.Power1.easeOut,onComplete:()=>{if(!t.opened)return o&&o();if(e){const e=s=>{if(s.body!=this._character.object3D.rigidBody.body)return!1;this.openLootBox(a,t.loot,n,r,i,()=>{this.character.enableManualControll(),o()}),a._rigidBody.body.removeEventListener("collide",e),this.character.disableManualControll()};a._rigidBody.body.addEventListener("collide",e)}else this.openLootBox(a,t.loot,n,r,i,o)}}],a.action)}openLootBox(e,t,n,s,o,r){let a=this._character.object3D,l=e.getChildByName("box_vfx");const c=a.quaternion.clone();e.animator.params.open=!0,a.action.reset(),a.action.lookAt(e.parent.worldPosition.clone(),.5,{onComplete:()=>{let u;game.audioManager.playAudio("chest_opened"),l.material.opacity=1,"Modificator"===t.type?(game.audioManager.playAudio("booster_activation"),u=this._character.booster):"Key"===t.type?(game.audioManager.playAudio("find_key"),u=this._level[t.type]):u=i.createNumbersObject(t.amount,n,"font_",1.5,1),u.position.set(0,0,0),u.scale.set(0,0,0),e.add(u),u.action.reset(),u.action.moveTo(u.position.clone().set(0,2.2,0),.2),u.action.scaleTo(u.scale.clone().set(.4,.4,.4),.2,{},0),u.action.rotateY(.07,1.5,{},.2),u.action.scaleTo(u.scale.clone().set(0,0,0),.1,{},1.7),u.action.moveTo(u.parent.worldToLocal(this._character.object3D.getChildByName("ROOTSHJnt").worldPosition),.2,{onComplete:()=>{e.animator.params.open=!1,game.audioManager.playAudio("chest_collect"),o(t),u.removeFromParent(),this._character.animator.currentState=this._character.animator.getStateByName("idle"),this._character.animator.params.lootbox=!0,game.audioManager.playAudio("".concat(this._character.object3D.name,"_loot_reaction")),this._character.animator.getStateByName("lootbox").onExit.connect(()=>{a.action.rotate(c,.6,{onComplete:()=>{e.action.scaleTo(e.scale.clone().set(0,0,0),.2,{onComplete:()=>e.removeFromParent()}),c2d.call(()=>s.animator.params.show=!1,.1),r()},ease:c2d.easing.Power4.easeIn})},!0)}},1.7)},ease:c2d.easing.Power4.easeIn})}showBonusDoor(e,t){this.doors[e].visible=!1,t.position.copy(this.doors[e].position),t.quaternion.copy(this.doors[e].quaternion),t.rotateY(-Math.PI/2),this.object3D.add(t)}hideBonusDoor(e,t){this.doors[e].visible=!0,t.removeFromParent()}spawnNextLevelPortal(e,t,n,s){if(e){let e=this._level.spinPortal;e._rigidBody.teleport(t,e.quaternion),this.object3D.add(e),e.animator.params.show=!0;const i=t=>{if(t.body!=this._character.object3D.rigidBody.body)return!1;e.animator.params.show=!1,e.animator.getStateByName("Zero").onEnter.connect(()=>e.removeFromParent(),!0);let o=this.doors[n].worldQuaternion.clone();o.multiply(o.clone().setFromAxisAngle(e.position.clone().set(0,1,0),-80)),this.character.object3D.action.rotate(o,1),this.character.disableManualControll(),e._rigidBody.body.removeEventListener("collide",i),s()};e._rigidBody.body.addEventListener("collide",i)}else s()}onFinish(e,t,n,s,i,o,r){t?this.spawnLootbox(e,t,n,s,i,()=>{this.spawnNextLevelPortal(e,o,s,r)}):this.spawnNextLevelPortal(e,o,s,r)}dispose(){for(let e of this._enemies)e.dispose();this._enemies=[];for(let e of this.lootboxesPlace.children)e.removeAll()}onUpdate(){if(c2d.globalStore.get("pauseGame"))return;for(let e of this._enemies)e.update(),e.isDead||0}}c2d.display3d.R3DLoader.registerControllerClass("LevelPart",o)},{"./../Characters/Enemy.js":167,"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],172:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator");const{Euler:s,Vector2:i,Vector3:o,Vector4:r,Quaternion:a,Spherical:l}=c2d.display3d.Math,{PI:c}=Math;class u extends c2d.display3d.Controller{onCreate(){this._enemies=[],this._currentEnemy=null,this._shootTime=0,this._rotationSpeed=6,this._rockets=[],this._minigunDistance=18,this._lockReturnIdle=!1,this._platform=this.object3D.getChildByName("turret_platform"),this._glass=this.object3D.getChildByName("turret_glass"),this._platform.action.dissolvePower(2,1),this._platform.action._timeLine.pause(),this._glass.action.dissolvePower(2,1),this._glass.action._timeLine.pause()}onStart(){this._defaultQuaternion=this.rotatePoint.quaternion.clone()}set enemies(e){this._enemies=e,this._shootTime=.5}get rocketsCount(){return this._rockets.length}reset(){for(let e of this._rockets)e.removeFromParent();this._rockets=[],this.rotatePoint.quaternion.copy(this._defaultQuaternion)}setDissolveToHide(){this._platform.material.dissolvePattern.w=0,this._glass.material.dissolvePattern.w=0}playDissolveEffect(){this._platform.action._timeLine.restart(),this._glass.action._timeLine.restart()}showCrosshair(){this.crosshair.visible=!0}hideCrosshair(){this.crosshair.visible=!1}getNextEnemy(){let e=null,t=Number.MAX_VALUE;for(let n of this._enemies)if(!n.isDead){let s=this.object3D.worldPosition.distanceTo(n.object3D.worldPosition);s<t&&(e=n,t=s)}return e}addRocket(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c2d.call((n=>{let s=n-6*Math.floor(n/6);e.action.reset(),this.setRocketToPlace(e,s),t&&n<6?(game.audioManager.playAudio("rocket_load"),e.position.set(0,0,-2),e.action.moveTo(new o(0,0,0),1)):n>=6&&(e.visible=!1)}).bind(null,this._rockets.length),1),this._rockets.push(e)}setRocketToPlace(e,t){let n=this.rocketsPlace.children[t];e.scale.set(1,1,1),e.position.set(0,0,0),e.quaternion.set(0,0,0,1),n.add(e)}launchRocket(e,t){let n=this._rockets.shift(),s=n.parent;this.rotatePoint.action.lookAt(e,.25),this._lockReturnIdle=!0,c2d.call(()=>{game.audioManager.playAudio("rocket_shooting"),n.scale.set(1,1,1),n.position.copy(n.worldPosition),n.quaternion.copy(n.worldQuaternion),this.scene.add(n),n.getObjectByName("flash_place").visible=!0,n.action.reset(),n.action.moveTo(e,.5,{ease:c2d.easing.Power4.easeIn}),n.action.lookAt(e,.25,{ease:c2d.easing.Power4.easeIn,position:.25}),this.bonusLevel.cameraBonus.animator.params.launchRocket=!0,n.action.call(()=>{if(n.removeFromParent(),s.children.length){let e=s.children[0];e.visible=!0,e.scale.set(1,1,1),e.position.set(0,0,-2),e.action.reset(),e.action.moveTo(new o(0,0,0),1)}this._lockReturnIdle=!1,t()},.5)},.25)}getControlls(e){this._lockReturnIdle=!0;let t=!1;this.rotatePoint.updateWorldMatrix();let n=new o(0,0,1).applyQuaternion(this.rotatePoint.quaternion),s=(new l).setFromVector3(n);const i=(e,i)=>{if(t)return!1;s.phi+=e,s.theta+=i,s.phi=Math.min(Math.max(.35*c,s.phi),c/2),s.theta=Math.min(Math.max(.25*-c,s.theta),.25*c),n.setFromSpherical(s),this.rotatePoint.lookAt(this.rotatePoint.worldPosition.add(n.applyQuaternion(this.rotatePoint.parent.worldQuaternion)))},r=()=>{if(t)return!1;t=e()};return{onMouseMove:e=>{const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;i(.001*n,.001*-t)},onMouseDown:r,onPointerUp:r,onRotate:i,onFire:r}}onUpdate(){if(c2d.globalStore.get("pauseGame"))return;let e=c2d.time.deltaTime;this._enemies.length?(this._currentEnemy=this.getNextEnemy(),this._currentEnemy&&(this.rotatePoint.lookAt(this._currentEnemy.object3D.worldPosition,Math.min(this._rotationSpeed*e,1)),this.object3D.worldPosition.distanceTo(this._currentEnemy.object3D.worldPosition)<this._minigunDistance?(game.audioManager.playAudio("turret_shooting"),this.minigun.animator.params.shoot=!0,this.bonusLevel.cameraBonus.animator.params.minigun=!0,this._shootTime-=e,this._shootTime<0&&(this._currentEnemy.die(),this._shootTime=.3)):(game.audioManager.stopAudio("turret_shooting"),this.minigun.animator.params.shoot=!1,this.bonusLevel.cameraBonus.animator.params.minigun=!1))):this._currentEnemy=null,null!==this._currentEnemy||this._lockReturnIdle||(game.audioManager.stopAudio("turret_shooting"),this.minigun.animator.params.shoot=!1,this.bonusLevel.cameraBonus.animator.params.minigun=!1,this.rotatePoint.quaternion.slerp(this._defaultQuaternion,Math.min(this._rotationSpeed*e,1)))}}c2d.display3d.R3DLoader.registerControllerClass("Turret",u)},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],173:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.FactoryView{constructor(){super(...arguments),this.initializeVars()}initializeVars(){this.finishCb=null,this.baseGameTutorialNode=null,this._isShowed=this.initValue(!1),this.isShowedFirstTime=!1}initValue(e){const t=game.localStorage.getItem("showedBaseGameIntro");return c2d.type.isString(t)?"1"===t:e}buildTree(){super.buildTree("base_game_tutorial",this.layers.tutorial),this.baseGameTutorialNode=this.tree.nodeMap.baseGameTutorial,this.baseGameTutorialNode.visible=!1,this.addCloseListener(),this.addShowToggleListener(e=>{this.store.setSkipIntro(e)})}showTutorial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.isShowedFirstTime||this.store.isIntroSkipped&&this.isShowed?e():(this.store.isIntroSkipped?this.tree.nodeMap.tumbler.setStates("active"):this.tree.nodeMap.tumbler.setStates("normal"),this.baseGameTutorialNode.updateTransform(),this.baseGameTutorialNode.visible=!0,c2d.globalStore.set("pauseGame",!0),this.setBaseGameTutorialIsShowed(!0),this.isShowedFirstTime=!0,this.finishCb=e)}hideTutorial(){this.baseGameTutorialNode.visible=!1,c2d.globalStore.set("pauseGame",!1),this.finishCb&&(this.finishCb(),this.finishCb=null)}addShowToggleListener(e){const t=this.tree.nodeMap.tumbler;t.setHandlers(()=>{const n=!(t.toggleIndex%2);e(n)})}get isShowed(){return this._isShowed}setBaseGameTutorialIsShowed(e){game.localStorage.setItem("showedBaseGameIntro",e?"1":"0"),this._isShowed=e}addCloseListener(){this.tree.nodeMap.closeTutorial.addButtonListener("pointerDown",this.hideTutorial.bind(this))}}n.default=s},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],174:[function(e,t,n){"use strict";e("core-js/modules/es.symbol.description"),e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.SlideIntro;class i extends s.View{constructor(){super(...arguments),this.initializeVars()}initializeVars(){this.bonusGameTutorialNode=null,this._isShowed=this.initValue(!1),this.isShowedFirstTime=!1,this.finishCb=()=>{}}buildTree(){super.buildTree("bonus_game_tutorial",this.layers.tutorial),this.bonusGameTutorialNode=this.tree.nodeMap.bonusGameTutorial,this.bonusGameTutorialNode.visible=!1,this.addShowToggleListener(e=>{this.store.setSkipIntro(e)})}startAutoplay(){}initValue(e){const t=game.localStorage.getItem("showedBonusGameIntro");return c2d.type.isString(t)?"1"===t:e}showActualSlide(){this.abortAutoplay(),this.steps.forEach((e,t)=>{let{buttonLabel:n,step:s,slideButton:i,description:o}=e;const r=this.actionIndex===t;o.visible=r,this.updateSlideVisibility(s,r)}),this.currentSlide=this.actionIndex}addListeners(){this.showActualSlide();const e=this.tree.nodeMap.swipe_button_next;e&&e.setHandlers(()=>{this.increaseActionIndex(),this.showActualSlide()})}showTutorial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.isShowedFirstTime||this.store.isIntroSkipped&&this.isShowed?e():(this.store.isIntroSkipped?this.tree.nodeMap.tumbler.setStates("active"):this.tree.nodeMap.tumbler.setStates("normal"),this.showActualSlide(),this.bonusGameTutorialNode.updateTransform(),this.bonusGameTutorialNode.visible=!0,c2d.globalStore.set("pauseGame",!0),this.setBonusGameTutorialIsShowed(!0),this.isShowedFirstTime=!0,this.finishCb=e)}addShowToggleListener(e){const t=this.tree.nodeMap.tumbler;t.setHandlers(()=>{const n=!(t.toggleIndex%2);e(n)})}increaseActionIndex(){this.actionIndex===this.stepsAmount-1?this.hideTutorial():this.actionIndex++}get isShowed(){return this._isShowed}setBonusGameTutorialIsShowed(e){game.localStorage.setItem("showedBonusGameIntro",e?"1":"0"),this._isShowed=e}hideTutorial(){this.bonusGameTutorialNode.visible=!1,c2d.globalStore.set("pauseGame",!1),this.finishCb&&(this.finishCb(),this.finishCb=null)}}n.default=i},{"core-js/modules/es.array.iterator":303,"core-js/modules/es.symbol.description":310,"core-js/modules/web.dom-collections.iterator":311}],175:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.FactoryView{constructor(){super(...arguments),this.initializeVars()}initializeVars(){this.showManualTutorialNode=null,this.isShowedFirstTime=!1,this.isFirstSpinStarted=!1,this._isShowed=this.initValue(!1)}buildTree(){super.buildTree("show_manual_tutorial",this.layers.tutorial),this.showManualTutorialNode=this.tree.nodeMap.showManualTutorial,this.showManualTutorialNode.visible=!1,this.addShowToggleListener(e=>{this.store.setSkipIntro(e)}),this.addCloseListener()}initValue(e){const t=game.localStorage.getItem("showedManualIntro");return c2d.type.isString(t)?"1"===t:e}showTutorial(){!this.isShowedFirstTime&&this.isFirstSpinStarted&&(this.store.isIntroSkipped&&this.isShowed||(this.store.isIntroSkipped?this.tree.nodeMap.tumbler.setStates("active"):this.tree.nodeMap.tumbler.setStates("normal"),this.showManualTutorialNode.updateTransform(),this.showManualTutorialNode.visible=!0,this.setManualTutorialIsShowed(!0),this.isShowedFirstTime=!0))}addShowToggleListener(e){const t=this.tree.nodeMap.tumbler;t.setHandlers(()=>{const n=!(t.toggleIndex%2);e(n)})}get isShowed(){return this._isShowed}setManualTutorialIsShowed(e){game.localStorage.setItem("showedManualIntro",e?"1":"0"),this._isShowed=e}hideTutorial(){this.showManualTutorialNode.visible=!1}addCloseListener(){this.tree.nodeMap.closeTutorial.addButtonListener("pointerDown",this.hideTutorial.bind(this))}}n.default=s},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],176:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});const s=game.sources.components.GameScreen;class i extends s.Controller{addSpinListeners(){game.device.desktop&&document.addEventListener("keyup",e=>{this.view.interactive&&(this.store.showInfo||this.store.spaceSpin&&(this.store.characterSelection||"Space"===e.code&&(this.view.tweenSpinButton(),this.onSpinButton())))})}updateBet(){super.updateBet(...arguments),this.view.component.handler.updateBetEmit()}}n.default=i,s.Controller=i},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],177:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.iterator");const s=game.sources.components.GameScreen,i=["Commandos","Scout","Biotic"];Object.assign(c2d.EventsConfig,{SHOW_MANUAL_CONTROLLS:"show_manual_controlls",HIDE_MANUAL_CONTROLLS:"hide_manual_controlls",ENABLE_MANUAL_CONTROLLS:"enable_manual_controlls",DISABLE_MANUAL_CONTROLLS:"disable_manual_controlls",SET_MANUAL_WEAPON:"set_manual_weapon",SHOW_BONUS_GAME_CONTROLLS:"show_bonus_game_controlls",ENABLE_BONUS_GAME_CONTROLLS:"enable_bonus_game_controlls",DISABLE_BONUS_GAME_CONTROLLS:"disable_bonus_game_controlls",SET_ROCKETS_COUNT:"set_rocket_count",GET_ROCKET_ICON_POSITION:"get_rocket_icon_position"});class o extends s.Handler{get statesConfig_planetkeeper(){return{SpinStop:{enter:this.onSpinStopEnter},WaitFreespins:{enter:this.onWaitFreespinsEnter}}}onInitialize(){super.onInitialize(),this.registerStates(this.statesConfig_planetkeeper),this.events.subscribe(this.events.config.SHOW_MANUAL_CONTROLLS,this.showManualControlls.bind(this)),this.events.subscribe(this.events.config.HIDE_MANUAL_CONTROLLS,this.hideManualControlls.bind(this)),this.events.subscribe(this.events.config.ENABLE_MANUAL_CONTROLLS,this.enableManualControlls.bind(this)),this.events.subscribe(this.events.config.DISABLE_MANUAL_CONTROLLS,this.disableManualControlls.bind(this)),this.events.subscribe(this.events.config.SET_MANUAL_WEAPON,this.setManualWeapon.bind(this)),this.events.subscribe(this.events.config.SHOW_BONUS_GAME_CONTROLLS,this.showBonusGameControlls.bind(this)),this.events.subscribe(this.events.config.ENABLE_BONUS_GAME_CONTROLLS,this.enableBonusGameControlls.bind(this)),this.events.subscribe(this.events.config.DISABLE_BONUS_GAME_CONTROLLS,this.disableBonusGameControlls.bind(this)),this.events.subscribe(this.events.config.SET_ROCKETS_COUNT,this.setRocketsCount.bind(this)),this.events.subscribe(this.events.config.TOGGLE_MANUAL_MODE,this.onToggleManualMode.bind(this))}onToggleManualMode(e){e?this.component.view.disableAutospinsButton():this.component.view.enableAutospinsButton()}showManualControlls(){this.component.view.showManualControlls(...arguments)}hideManualControlls(){this.component.view.hideManualControlls(...arguments)}enableManualControlls(){this.component.view.enableManualControlls(...arguments)}disableManualControlls(){this.component.view.disableManualControlls(...arguments)}setManualWeapon(){this.component.view.setManualWeapon(...arguments)}showBonusGameControlls(){this.component.view.showBonusGameControlls(...arguments)}enableBonusGameControlls(){this.component.view.enableBonusGameControlls(...arguments)}disableBonusGameControlls(){this.component.view.disableBonusGameControlls(...arguments)}setRocketsCount(){this.component.view.setRocketsCount(...arguments)}onWaitFreespinsEnter(e){let{finish:t}=e;this.component.store.getItem("freespins")&&3===this.component.store.getItem("freespins").done?t():(this.component.controller.changeSpinButtonState("collect"),this._updateSpinHandler(t))}onSpinStopEnter(e){let{finish:t,skip:n}=e;this.onSkipWait({finish:t,skip:n})}updateBetEmit(){this.events.emit(this.events.config.UPDATE_BOOSTERS)}getGlobalActionsConfig(){const e=super.getGlobalActionsConfig();return e.changeCharacter=e=>{const t=this.component.store.getItem("playerStorage"),n=this.component.store.getItem("defaultBet"),s=t.find(t=>t.type===i[e]);s?(console.warn("changeCharacter",s),this.component.controller.updateBet(s.bet)):(console.warn("defaultBet:",n),this.component.controller.updateBet(n))},e}}s.Handler=o},{"core-js/modules/es.array.iterator":303,"core-js/modules/es.object.assign":305,"core-js/modules/web.dom-collections.iterator":311}],178:[function(e,t,n){"use strict";class s extends game.sources.components.GameScreen.Store{get characterSelection(){return this.getItem("characterSelection")}get manualMode(){return this.getItem("manualMode")}}game.sources.components.GameScreen.Store=s},{}],179:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./ManualControlls.js"),i=e("./ManualSpinControlls.js"),o=e("./ManualBonusGameControlls.js"),r=game.sources.components.GameScreen;class a extends r.View{buildTree(){super.buildTree(),this._crosshair=this.tree.nodeMap.crosshair,this._manual_controlls=new s.default(this.tree.nodeMap.controllsTouchArea),this._manual_spin_controlls=new i.default(this._manual_controlls,this.tree),this.manual_bonus_game_controlls=new o.default(this._manual_controlls,this.tree,this.assetsStore.textures),this.baseGameTutorial=this.tree.nodeMap.base_game_tutorial,this.baseGameTutorial.nodeMap.closeTutorial.addButtonListener("pointerDown",this.hideManual.bind(this)),this.buttonHandlers=null,this.needShowManual=!0}initButtonsAnimations(){super.initButtonsAnimations();const e=this.tree.nodeMap.autospinsArrow,t=this.tree.nodeMap.autospinsButtonShow.children.last;e&&t&&this.tree.nodeMap.autospinsButtonShow.swapChildren(e,t)}showManualControlls(){this.tree.nodeMap.ui_container.setStates("manual")}hideManualControlls(){this.tree.nodeMap.ui_container.setStates("normal")}enableManualControlls(){this.needShowManual?(this.buttonHandlers=arguments,this.showManual()):this._enableManualControlls(...arguments)}showManual(){this.baseGameTutorial.visible=!0,this.baseGameTutorial.updateTransform(),c2d.globalStore.set("pauseGame",!0)}hideManual(){this.baseGameTutorial.visible=!1,this.needShowManual=!1,c2d.globalStore.set("pauseGame",!1),this._enableManualControlls(...this.buttonHandlers)}_enableManualControlls(){this._manual_controlls.mobile_controlls&&this._manual_spin_controlls.enable({onVelocityUpdated:arguments[0].onMove,onRotationUpdated:arguments[0].onRotate,onFire:arguments[0].onFire}),this._crosshair.visible=!0,this._manual_controlls.enable(...arguments),this.buttonHandlers=null}disableManualControlls(){this._manual_controlls.mobile_controlls&&this._manual_spin_controlls.disable(),this._crosshair.visible=!1,this._manual_controlls.disable()}setManualWeapon(){this._manual_spin_controlls.setWeapon(...arguments)}showBonusGameControlls(){this.manual_bonus_game_controlls.show()}enableBonusGameControlls(){this._manual_controlls.mobile_controlls&&this.manual_bonus_game_controlls.enable({onRotationUpdated:arguments[0].onRotate,onFire:arguments[0].onFire}),this._manual_controlls.enable(...arguments)}disableBonusGameControlls(){this.manual_bonus_game_controlls.disable(),this._manual_controlls.disable()}setRocketsCount(){requestAnimationFrame(()=>{this.component.handler.events.emit(this.component.handler.events.config.SHOW_BONUS_GAME_CONTROLLS),this.manual_bonus_game_controlls.setCount(...arguments)})}enableAutospinsButton(){this.store.manualMode||this.tree.nodeMap.autospinsButtonShow.enable(!0)}disableAutospinsButton(){this._autoSpinsLeft||(this.store.manualMode||!this._autoSpinsLeft&&!this.isIdle)&&this.tree.nodeMap.autospinsButtonShow.enable(!1)}}n.default=a,r.View=a},{"./ManualBonusGameControlls.js":180,"./ManualControlls.js":181,"./ManualSpinControlls.js":182,"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],180:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0});const{Sprite:s}=c2d.display,{min:i}=Math,{Vector2:o}=c2d.display3d.Math,r=new o;n.default=class{constructor(e,t,n){this._textures=n,this.onRotationUpdated=null,this.rocketContainerArea=t.nodeMap.rocketContainerArea;let s=null;this.rotationStart=e=>{s=r.copy(e.data.global).clone()},this.rotationUpdate=e=>{const t=this.rocketContainerArea.toLocal(s.sub(e.data.global).clone().negate());this.onRotationUpdated&&this.onRotationUpdated(.001*t.y,.001*-t.x),s=r.copy(e.data.global).clone()},this.rotationEnd=()=>{s=null},e.addControll({element:this.rocketContainerArea,onDown:this.rotationStart,onDrag:this.rotationUpdate,onUp:this.rotationEnd}),this.onFire=null,this.icon=this.rocketContainerArea.children[0].children[0],e.addControll({element:this.icon,onDown:()=>this.onFire&&this.onFire()}),this._text_container=this.rocketContainerArea.children[0].children[1],this._wrapper=this.rocketContainerArea.children[0],this._flare=this.rocketContainerArea.children[0].children[2],this._wrapper.tween=(new c2d.Timeline).to(this._wrapper.scale,.15,{x:1.2,y:1.2,ease:c2d.easing.Linear.easeNone}).to(this._wrapper.scale,.15,{x:1,y:1,ease:c2d.easing.Linear.easeNone}),this._flare.tween=(new c2d.Timeline).to(this._flare,.15,{alpha:1,ease:c2d.easing.Power4.easeOut}).to(this._flare.scale,.15,{x:3,y:3,ease:c2d.easing.Power4.easeOut},0).to(this._flare.scale,.05,{x:1,y:1,ease:c2d.easing.Power4.easeOut}).to(this._flare,.05,{alpha:0,ease:c2d.easing.Power4.easeOut},.15)}show(){this.rocketContainerArea.setStates("visible")}enable(){this.rocketContainerArea.setStates("enabled"),Object.assign(this,arguments[0])}disable(){this.onFire=null,this.onRotationUpdated=null,this.rotationEnd(),this.rocketContainerArea.setStates("disabled")}getIconPosition(){return this.icon.getGlobalPosition()}setCount(e){let{count:t,animated:n}=e;n&&game.audioManager.playAudio("rocket_collect"),this._wrapper.tween.restart(),this._flare.tween.restart();const s=()=>{this.set(t),this._wrapper.tween.remove(s)};this._wrapper.tween.add(s,.15)}set(e){const t=e.toString().split("");t.forEach((e,t)=>{if(!this._text_container.children[t+1]){const e=new s,n=this._text_container.children[t];e.anchor.set(0,1),e.position.x=n.position.x+n.width/2+20,this._text_container.addChild(e)}this._text_container.children[t+1].texture=this._textures["multiplier_font/".concat(e)],this._text_container.children[t+1].visible=!0});for(let e=t.length+1;e<this._text_container.children.length;e++)this._text_container.children[e].visible=!1;this._text_container.position.x=-this._text_container.width/2}}},{"core-js/modules/es.object.assign":305,"core-js/modules/es.regexp.to-string":308,"core-js/modules/es.string.split":309}],181:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(e){this.background=e,this.ev_target=document.body,("pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document)&&(this.ev_target.requestPointerLock=this.ev_target.requestPointerLock||this.ev_target.mozRequestPointerLock||this.ev_target.webkitRequestPointerLock),this.mobile_controlls=game.device.mobile||!this.ev_target.requestPointerLock,this.onPointerLockChange=()=>{console.log("onPointerLockChange"),document.pointerLockElement===this.ev_target||document.mozPointerLockElement===this.ev_target||document.webkitPointerLockElement===this.ev_target?(this.enableDesktopHandlers(),document.removeEventListener("click",this.pointerLockClickHandler,!1)):(this.resetState&&this.resetState(),this.disableDesktopHandlers(),document.addEventListener("click",this.pointerLockClickHandler,!1))},this.pointerLockClickHandler=()=>{var e;null===(e=this.ev_target.requestPointerLock())||void 0===e||e.then(null,()=>{})},this._btns_list=[],this.pointerMoveHandler=e=>{const t=this._getBtnByIdentifier(e.data.identifier);if(!t)return!1;t.onDrag&&t.onDrag(e)},this.pointerUpHandler=e=>{const t=this._getBtnByIdentifier(e.data.identifier);if(!t)return!1;t.identifier=null,t.onUp&&t.onUp(e),this.onPointerUp&&this.onPointerUp(e)},this._getBtnByIdentifier=e=>{for(let t=0;t<this._btns_list.length;t++)if(e===this._btns_list[t].identifier)return this._btns_list[t];return null},this.onKeyDown=null,this.onKeyUp=null,this.onMouseMove=null,this.onMouseDown=null,this.onMouseUp=null,this.onPointerUp=null,this.resetState=null,this.keyDownHandler=e=>{this.onKeyDown&&this.onKeyDown(e)},this.keyUpHandler=e=>{this.onKeyUp&&this.onKeyUp(e)},this.mouseMoveHandler=e=>{this.onMouseMove&&this.onMouseMove(e)},this.mouseDownHandler=e=>{this.onMouseDown&&this.onMouseDown(e)},this.mouseUpHandler=e=>{this.onMouseUp&&this.onMouseUp(e)}}addControll(e){let{element:t,onDown:n,onDrag:s,onUp:i}=e;const o={element:t,onDown:n,onDrag:s,onUp:i,identifier:null};this._btns_list.push(o),t.on("pointerdown",e=>{if(null!=o.identifier)return!1;o.identifier=e.data.identifier,e.stopPropagation(),n&&n(e)})}enable(e){let{onKeyDown:t,onKeyUp:n,onMouseMove:s,onMouseDown:i,onMouseUp:o}=e;Object.assign(this,arguments[0]),this.mobile_controlls?this.enableMobileHandlers():this.enableDesktopControlls()}enableDesktopControlls(){var e;document.addEventListener("click",this.pointerLockClickHandler,!1),document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("webkitpointerlockchange",this.onPointerLockChange,!1),null===(e=this.ev_target.requestPointerLock())||void 0===e||e.then(null,()=>{})}enableDesktopHandlers(){document.addEventListener("keydown",this.keyDownHandler,!1),document.addEventListener("keyup",this.keyUpHandler,!1),document.addEventListener("mousemove",this.mouseMoveHandler,!1),document.addEventListener("mousedown",this.mouseDownHandler,!1),document.addEventListener("mouseup",this.mouseUpHandler,!1)}enableMobileHandlers(){this._btns_list.forEach(e=>e.identifier=null),this.background.setStates("enabled"),this.background.on("pointermove",this.pointerMoveHandler),this.background.on("pointerup",this.pointerUpHandler),this.background.on("pointerupoutside",this.pointerUpHandler)}disable(){this.mobile_controlls?(this._onMove=null,this._onRotate=null,this._onFire=null,this.disableMobileControlls()):(this.onMouseMove=null,this.onMouseUp=null,this.onKeyDown=null,this.onKeyUp=null,this.onMouseDown=null,this.disableDesktopControlls())}disableDesktopControlls(){document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("webkitpointerlockchange",this.onPointerLockChange,!1),document.exitPointerLock(),this.disableDesktopHandlers()}disableDesktopHandlers(){document.removeEventListener("keydown",this.keyDownHandler,!1),document.removeEventListener("keyup",this.keyUpHandler,!1),document.removeEventListener("mousemove",this.mouseMoveHandler,!1),document.removeEventListener("mousedown",this.mouseDownHandler,!1),document.removeEventListener("mouseup",this.mouseUpHandler,!1),document.removeEventListener("click",this.pointerLockClickHandler,!1)}disableMobileControlls(){this.background.setStates("disabled"),this.background.off("pointermove",this.pointerMoveHandler),this.background.off("pointerup",this.pointerUpHandler),this.background.off("pointerupoutside",this.pointerUpHandler)}}},{"core-js/modules/es.object.assign":305}],182:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0});const{min:s}=Math,{Vector2:i}=c2d.display3d.Math,o=new i;n.default=class{constructor(e,t){this._manual_touch_area=t.nodeMap.manualTouchArea,this.onVelocityUpdated=null;const n=t.nodeMap.velocityControlls,i=t.nodeMap.velocityCursor;this.velocityUpdate=e=>{const t=n.getGlobalPosition(),r=n.width/2,a=o.clone().copy(this._manual_touch_area.toLocal(o.clone().set(e.data.global.x-t.x,e.data.global.y-t.y)));a.multiplyScalar(s(r/a.length(),1)),i.position.x=a.x,i.position.y=a.y,this.onVelocityUpdated&&this.onVelocityUpdated(a.negate().divideScalar(r))},this.velocityUp=e=>{i.tween.moveTo(0,0,.2),this.onVelocityUpdated&&this.onVelocityUpdated(o.clone().set(0,0))},e.addControll({element:n,onDown:this.velocityUpdate,onDrag:this.velocityUpdate,onUp:this.velocityUp}),this.onRotationUpdated=null;const r=t.nodeMap.rotationTouchArea;let a=null;this.rotationStart=e=>{a=o.copy(e.data.global).clone()},this.rotationUpdate=e=>{const t=this._manual_touch_area.toLocal(a.sub(e.data.global).clone().negate());this.onRotationUpdated&&this.onRotationUpdated(2*t.y,2*t.x),a=o.copy(e.data.global).clone()},this.rotationEnd=()=>{a=null},e.addControll({element:r,onDown:this.rotationStart,onDrag:this.rotationUpdate,onUp:this.rotationEnd}),this.onFire=null;const l=t.nodeMap.weapons.children[0],c=t.nodeMap.weapons.children[1];e.addControll({element:l,onDown:()=>this.onFire&&this.onFire(!0,0),onUp:()=>this.onFire&&this.onFire(!1,0)}),e.addControll({element:c,onDown:()=>this.onFire&&this.onFire(!0,1),onUp:()=>this.onFire&&this.onFire(!1,1)}),this.setWeapon=e=>{l.setStates(0===e?"active":"normal"),c.setStates(1===e?"active":"normal")}}enable(){Object.assign(this,arguments[0]),this._manual_touch_area.setStates("enabled")}disable(){this.onVelocityUpdated=null,this.velocityUp(),this.onRotationUpdated=null,this.rotationEnd(),this.onFire=null}}},{"core-js/modules/es.object.assign":305}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./GameScreenHandler.js"),e("./GameScreenController.js"),e("./GameScreenView.js"),e("./GameScreenStore.js")},{"./GameScreenController.js":176,"./GameScreenHandler.js":177,"./GameScreenStore.js":178,"./GameScreenView.js":179}],184:[function(e,t,n){"use strict";const s=game.sources.components.InfoScreen;class i extends s.View{init(){super.init(),this.isReplay=!1}}s.View=i},{}],185:[function(e,t,n){"use strict";const s=c2d.display.Factory.types;class i extends s.Container{onTreeDidBuild(){this.titleLabel=this.nodeMap.titleLabel,this.rangeLabel=this.nodeMap.rangeLabel,super.onTreeDidBuild()}setPayments(e){for(const t in e.loot)if("Money"===e.loot[t].type){this.rangeLabel.text=e.loot[t].range;break}}static createFromConfig(e){let{config:t,variables:n,parent:s}=e;return c2d.display.Factory.createFromConfig({Class:i,config:t,parent:s,params:[t],variables:n})}get id(){return this._config.id}set id(e){}}s.SymbolMultipliers=i},{}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./PlanetKeeperSymbolMultipliers.js"),e("./InfoScreenView.js"),e("./infoScreenScreensView.js")},{"./InfoScreenView.js":184,"./PlanetKeeperSymbolMultipliers.js":185,"./infoScreenScreensView.js":187}],187:[function(e,t,n){"use strict";const s=game.sources.components.InfoScreen.classes;class i extends s.ScreensView{init(){super.init(),this.isReplay=!1}initControlSettings(){game.device.desktop&&super.initControlSettings()}}s.ScreensView=i},{}],188:[function(e,t,n){"use strict";const s=game.sources.components.Network;class i extends s.Component{paramsForRequest(){const e=super.paramsForRequest();return e.player_type=this.store.playerData.type,e}}s.Component=i},{}],189:[function(e,t,n){"use strict";const s=game.sources.components.Network;class i extends s.Handler{get statesConfig_StarGuardians(){return{BonusGameSendRequest:{enter:this.onBonusGameSendRequest}}}onInitialize(){super.onInitialize(),this.registerStates(this.statesConfig_StarGuardians)}onBonusGameSendRequest(e){let{finish:t}=e;return this.sendBaseGameRequest({bonus_game:this.component.store.bonusType,choice:c2d.globalStore.get("bonusChoice")}).then(t,e=>this.reportError(e)),{onFinish:()=>{c2d.globalStore.set("bonusChoice",null)}}}onBonusGameStepBegin(e){let{finish:t}=e;t()}}s.Handler=i},{}],190:[function(e,t,n){"use strict";class s extends game.sources.components.Network.Store{addToGlobal(){super.addToGlobal(),this.addItem("playerData")}get playerData(){return this.global.player}setResponseToStore(e){super.setResponseToStore(e),this.updatePlayerData(e)}updatePlayerData(e){this.extraData&&this.extraData.player?this.global.player=this.extraData.player:this.global.player||(this.global.player={})}}game.sources.components.Network.Store=s},{}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./NetworkStore.js"),e("./Network.js"),e("./NetworkHandler.js")},{"./Network.js":188,"./NetworkHandler.js":189,"./NetworkStore.js":190}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.VisualComponent{build(e){this.controller.build(e)}toggleManualMode(e){this.handler.toggleManualMode(e)}}n.default=s},{}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.Controller{build(e){this.view.build(e)}}n.default=s},{}],194:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),Object.assign(c2d.EventsConfig,{TOGGLE_MANUAL_MODE:"toggle_manual_mode",UPDATE_BOOSTERS:"update_boosters"});class s extends game.sources.Handler{constructor(){super(...arguments),this._reloaded=!0,this.events.subscribe(this.events.config.UPDATE_BOOSTERS,this.updateBoosters.bind(this)),this.events.subscribe(this.events.config.SHOW_BONUS_GAME_CONTROLLS,this.showBonusGameControlls.bind(this)),this.events.subscribe(this.events.config.DISABLE_BONUS_GAME_CONTROLLS,this.disableBonusGameControlls.bind(this))}get statesConfig(){return{Init:{enter:this.onInitEnter},CharacterSelection:{enter:this.onCharacterSelectionEnter},Idle:{begin:this.onIdleBegin},Spin:{enter:this.onSpitEnter},SpinStop:{enter:this.onSpinStopEnter}}}onInitEnter(e){let{finish:t}=e;this.component.build({showCharacterSelectionScene:(e,t,n)=>this.fireAction("showCharacterSelection",{charIndex:e,showUI:t,unlockUI:n}),hideCharacterSelectionScene:e=>this.fireAction("hideCharacterSelection",e),changeSceneCharacter:e=>this.fireAction("changeCharacter",e)}),t()}onCharacterSelectionEnter(e){let{finish:t}=e;this.component.store.freespins&&this.component.store.freespins.done||this.component.store.nextBonus||game.localStorage.getItem("firstLanch")?t():(this.component.view.showCharacterSelection(t),game.localStorage.setItem("firstLanch",!0))}onIdleBegin(e){let{finish:t}=e;this.component.view.onIdleBegin(),t()}onSpitEnter(e){let{finish:t}=e;this.component.view.onSpitEnter(),t()}onSpinStopEnter(e){let{finish:t,actions:n}=e;return t(),{actions:{updateBoostersUI:()=>this.updateBoosters()}}}onWaitFreespinsEnter(e){let{finish:t}=e;this._reloaded&&this.component.view.onBonusGame(),t()}onWaitFreespinsExit(e){let{finish:t}=e;!this._reloaded&&this.component.view.onBonusGame(),t()}toggleManualMode(e){this.events.emit(this.events.config.TOGGLE_MANUAL_MODE,e)}updateBoosters(){this.component.view.updateBoosters()}showBonusGameControlls(){this.component.view.hideIdleUI()}disableBonusGameControlls(){this.component.view.showIdleUI()}}n.default=s},{"core-js/modules/es.array.iterator":303,"core-js/modules/es.object.assign":305,"core-js/modules/web.dom-collections.iterator":311}],195:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0});class s extends game.sources.Store{constructor(){super(...arguments),this._characterSelection=!1,this._manualMode=!1}addToGlobal(){this.addItem("characterSelection"),this.addItem("manualMode")}set characterSelection(e){this._characterSelection=e}get characterSelection(){return this._characterSelection}set manualMode(e){this._manualMode=e}get manualMode(){return this._manualMode}get freespins(){return this.getItem("freespins")}get nextBonus(){return"initfreespin"===this.getItem("getNextAction")||"freespin"===this.getItem("getNextAction")}get current_action(){return this.getItem("getCurrentAction")}get total_win(){return this.getItem("wins").total}get player(){return this.getItem("playerData")}get rockets(){return this.player.bullet_count||0}}n.default=s},{"core-js/modules/es.array.iterator":303,"core-js/modules/web.dom-collections.iterator":311}],196:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./elements/HelmetButton.js"),i=e("./elements/ManualButton.js"),o=e("./elements/BuffsIcons.js"),r=e("./elements/CharacterSelection.js");class a extends game.sources.FactoryView{build(e){this.game_callbacks=e,this.onHideCharacterSelection=null,this.buildTree()}buildTree(){const e=this.layers.scene_ui,t=this.store.player.type;super.buildTree("sceneui_tree",e),this._idle_ui=this.tree.nodeMap.idle_ui,this._auto_spin_ui=this.tree.nodeMap.auto_spin_ui,this._helmet_button=new s.default(this.tree.nodeMap.helmetButton,this.showCharacterSelection.bind(this)),this._manual_button=new i.default(this.tree.nodeMap.manualButton,this.toggleManualMode.bind(this)),this._buffs_icons=new o.default(this.tree.nodeMap,this.assetsStore.textures),this._character_selection=new r.default(this.tree.nodeMap,t,this.assetsStore.textures,this.hideCharacterSelection.bind(this),this.game_callbacks.changeSceneCharacter),this._helmet_button.disable(),this._manual_button.disable()}showIdleUI(){this._idle_ui.visible=!0}hideIdleUI(){this._idle_ui.visible=!1}onIdleBegin(){this._helmet_button.enable(),this._manual_button.enable()}onIdleFinish(){this._helmet_button.disable(),this._manual_button.disable()}onSpitEnter(){this._helmet_button.disable(),this._manual_button.disable()}toggleManualMode(e){this.store.manualMode=e,this.component.toggleManualMode(e)}startSpin(){game.components.gamescreen.controller.callSpinAction()}showCharacterSelection(e){this.onHideCharacterSelection=e,this.store.characterSelection=!0,this.layers.custom_buttons.visible=!1,this.layers.game_screen.visible=!1,this._idle_ui.visible=!1,this.game_callbacks.showCharacterSelectionScene(this._character_selection.charIndex,()=>this._character_selection.show(),()=>this._character_selection.enableSwitch())}hideCharacterSelection(e,t){this.onHideCharacterSelection instanceof Function&&this.onHideCharacterSelection(),this.onHideCharacterSelection=null,this.store.characterSelection=!1,this.layers.custom_buttons.visible=!0,this.layers.game_screen.visible=!0,this._idle_ui.visible=!0,this._character_selection.hide(),this.store.player.type=t,this.game_callbacks.hideCharacterSelectionScene(e),this.updateBoosters()}updateBoosters(){const e=this.store.getItem("playerStorage"),t=this.store.getItem("playerData"),n=this.store.getItem("bet");for(let s=0;s<e.length;s++)if(t.type===e[s].type)return this._buffs_icons.update(e[s].bet===n&&e[s].player||{});this._buffs_icons.update({})}}n.default=a},{"./elements/BuffsIcons.js":197,"./elements/CharacterSelection.js":198,"./elements/HelmetButton.js":199,"./elements/ManualButton.js":200}],197:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./ViewContainer.js"),{Sprite:i}=c2d.display;class o extends s.default{constructor(e,t){super(e.buffsIcons),this.textures=t,this.cahr_buff_container=e.charBuffContainer,this.cahr_buff_icon=e.charBuffIcon,this.cahr_buff_amount=e.charBuffAmount,this.key_icon=e.keyBuffIcon,this.type,this.has_key,this.modificator}update(e){e.type&&(this.type=e.type,this.setCharBuffIcon(e.type)),this.setCharBuffAmount(e.modificators),this.has_key=e.has_key,this.updateKeyIcon()}setCharBuffIcon(){this.cahr_buff_icon.texture=this.textures["".concat(this.type,".png")]}setCharBuffAmount(e){if(e)switch(this.type){case"Commandos":this.modificator=e.loot_x2,this.cahr_buff_amount.position.y=0;break;case"Scout":this.modificator=e.key_for_lootbox,this.cahr_buff_amount.position.y=-5;break;case"Biotic":this.modificator=e.required_loot,this.cahr_buff_amount.position.y=0}else this.modificator=null;if(this.modificator){this.cahr_buff_container.visible=!0;const e=this.modificator.count.toString().split("");e.forEach((t,n)=>{if(!this.cahr_buff_amount.children[n]){const e=new i,t=this.cahr_buff_amount.children[n-1];e.anchor.set(0,.5),e.position.x=t?t.position.x+.6*t.width:0,this.cahr_buff_amount.addChild(e)}this.cahr_buff_amount.children[n].texture=this.textures["".concat(t,".png")],this.cahr_buff_amount.children[n].visible=!0;for(let t=e.length;t<this.cahr_buff_amount.children.length;t++)this.cahr_buff_amount.children[t].visible=!1;this.cahr_buff_amount.position.x=-this.cahr_buff_amount.width/2})}else this.cahr_buff_container.visible=!1}updateKeyIcon(){this.has_key?(this.key_icon.visible=!0,this.key_icon.y=this.modificator?140:0):this.key_icon.visible=!1}}n.default=o},{"./ViewContainer.js":201,"core-js/modules/es.regexp.to-string":308,"core-js/modules/es.string.split":309}],198:[function(e,t,n){"use strict";e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0});const s=e("./ViewContainer.js"),i=["Commandos","Scout","Biotic"];class o extends s.default{constructor(e,t,n,s,o){super(e.characterSelection),this._charIndex=i.indexOf(t),this.textures=n,this._prev_btn=e.prevCharacter,this._next_btn=e.nextCharacter,this._set_btn=e.setCharacter,this._char_name=e.charName,this._char_name.texture=this.title_texture,this._set_btn.idle_tween=this._set_btn.click_tween=null,this.initSetButton(s),this.initSwitchButtons(o)}get title_texture(){return this.textures["".concat(i[this._charIndex],"_title")]}initSetButton(e){let t=this._set_btn.children[0];this._set_btn.idle_tween=c2d.Tween.to(t.scale,.7,{x:1.2,y:1.2,paused:!0,yoyo:!0,repeat:1/0,ease:c2d.easing.Linear.easeNone}),this._set_btn.click_tween=c2d.Tween.to({tint:"1,1,1",scale:t.scale.x},.35,{tint:"0.898,0.627,0.003",scale:1.7,paused:!0,ease:c2d.easing.Linear.easeIn,onUpdate:function(){t.scale.set(this.target.scale),t.tint=PIXI.utils.rgb2hex(this.target.tint.split(","))},onComplete:()=>{t.tint=16777215,t.scale.set(1),this.enableSwitch(),e&&e(this._charIndex,i[this._charIndex])}}),this._set_btn.addButtonListener("pointerDown",()=>{this._set_btn.idle_tween.pause(),this._set_btn.click_tween.restart()})}initSwitchButtons(e){const t=(t,n)=>{let s=t.children[0];const o=(new c2d.Timeline).to(s.scale,.15,{x:1.2,y:1.2,ease:c2d.easing.Linear.easeNone}).to(s.scale,.15,{x:1,y:1,ease:c2d.easing.Linear.easeNone});return()=>{o.restart();const t=n>=0&&n||i.length+n;this._charIndex=(this._charIndex+t)%i.length,this.charName=this.title_texture,this.disableSwitch(),e&&e(this._charIndex,i[this._charIndex])}};this._prev_btn.addButtonListener("pointerDown",t(this._prev_btn,-1)),this._next_btn.addButtonListener("pointerDown",t(this._next_btn,1))}set charName(e){c2d.Tween.to(this._char_name,.4,{alpha:0,onComplete:()=>{this._char_name.texture=e,c2d.Tween.to(this._char_name,.4,{alpha:1})}})}get charIndex(){return this._charIndex}disableSwitch(){this._prev_btn.enable(!1),this._next_btn.enable(!1)}enableSwitch(){this._prev_btn.enable(!0),this._next_btn.enable(!0)}show(){super.show(),this.disableSwitch(),this._set_btn.idle_tween.restart()}}n.default=o},{"./ViewContainer.js":201,"core-js/modules/es.string.split":309}],199:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./ViewContainer.js");class i extends s.default{constructor(e,t){super(e),this.init(t)}init(e){this.element.addButtonListener("pointerDown",e)}disable(){this.element.enable(!1)}enable(){this.element.enable(!0)}}n.default=i},{"./ViewContainer.js":201}],200:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./ViewContainer.js");class i extends s.default{constructor(e,t){super(e),this.active=!1,this.element.addButtonListener("pointerDown",()=>this.clickHandler(t))}clickHandler(e){this.active=!this.active,this._setState(),e&&e(this.active)}disable(){this.element.enable(!1),this.element.setStates(this.active?"disabled_active":"disabled_normal")}enable(){this.element.enable(!0),this._setState()}_setState(){this.element.setStates(this.active?"hover":"normal")}}n.default=i},{"./ViewContainer.js":201}],201:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=class{constructor(e){this.element=e}show(){this.element.visible=!0}hide(){this.element.visible=!1}}},{}],202:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const s=e("./Component.js"),i=e("./Controller.js"),o=e("./Handler.js"),r=e("./Store.js"),a=e("./View.js"),l={Component:s.default,Handler:o.default,Store:r.default,Controller:i.default,View:a.default};game.componentsManager.registerComponent("SceneUI",l)},{"./Component.js":192,"./Controller.js":193,"./Handler.js":194,"./Store.js":195,"./View.js":196}],203:[function(e,t,n){"use strict";const s=game.sources.components.SlideIntro;class i extends s.Handler{checkIntro(){return!this.component.store.showIntroIsSet||!this.component.store.isIntroSkipped&&!this.component.store.isBonusGameStarted}}s.Handler=i},{}],204:[function(e,t,n){"use strict";const s=game.sources.components.SlideIntro;class i extends s.Store{get freespins(){return this.getItem("freespins")}get isBonusGameStarted(){var e;return(null===(e=this.freespins)||void 0===e?void 0:e.done)>0||"bonus"===this.getItem("getNextAction")}get localStorageShowIntro(){return game.localStorage.getItem("showIntro")}get showIntroIsSet(){return c2d.type.isString(this.localStorageShowIntro)}}s.Store=i},{}],205:[function(e,t,n){"use strict";const s=game.sources.components.SlideIntro;class i extends s.View{showActualSlide(){super.showActualSlide(),this.setSkipIntroAfterFirstShow()}setSkipIntroAfterFirstShow(){if(!this.store.showIntroIsSet){this.tree.nodeMap.tumbler.toggle(),this.store.setSkipIntro(!1)}}}s.View=i},{}],206:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e("./SlideIntroHandler.js"),e("./SlideIntroStore.js"),e("./SlideIntroView.js")},{"./SlideIntroHandler.js":203,"./SlideIntroStore.js":204,"./SlideIntroView.js":205}],207:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],208:[function(e,t,n){var s=e("../internals/is-object");t.exports=function(e){if(!s(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":248}],209:[function(e,t,n){var s=e("../internals/well-known-symbol"),i=e("../internals/object-create"),o=e("../internals/object-define-property"),r=s("unscopables"),a=Array.prototype;null==a[r]&&o.f(a,r,{configurable:!0,value:i(null)}),t.exports=function(e){a[r][e]=!0}},{"../internals/object-create":260,"../internals/object-define-property":262,"../internals/well-known-symbol":302}],210:[function(e,t,n){"use strict";var s=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?s(e,t).length:1)}},{"../internals/string-multibyte":289}],211:[function(e,t,n){t.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},{}],212:[function(e,t,n){var s=e("../internals/is-object");t.exports=function(e){if(!s(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":248}],213:[function(e,t,n){var s=e("../internals/to-indexed-object"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index"),r=function(e){return function(t,n,r){var a,l=s(t),c=i(l.length),u=o(r,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/to-absolute-index":293,"../internals/to-indexed-object":294,"../internals/to-length":296}],214:[function(e,t,n){var s=e("../internals/an-object");t.exports=function(e,t,n,i){try{return i?t(s(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&s(o.call(e)),t}}},{"../internals/an-object":212}],215:[function(e,t,n){var s=e("../internals/well-known-symbol")("iterator"),i=!1;try{var o=0,r={next:function(){return{done:!!o++}},return:function(){i=!0}};r[s]=function(){return this},Array.from(r,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[s]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},{"../internals/well-known-symbol":302}],216:[function(e,t,n){var s={}.toString;t.exports=function(e){return s.call(e).slice(8,-1)}},{}],217:[function(e,t,n){var s=e("../internals/to-string-tag-support"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),r="Arguments"==i(function(){return arguments}());t.exports=s?i:function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:r?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},{"../internals/classof-raw":216,"../internals/to-string-tag-support":299,"../internals/well-known-symbol":302}],218:[function(e,t,n){var s=e("../internals/has"),i=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),r=e("../internals/object-define-property");t.exports=function(e,t){for(var n=i(t),a=r.f,l=o.f,c=0;c<n.length;c++){var u=n[c];s(e,u)||a(e,u,l(t,u))}}},{"../internals/has":238,"../internals/object-define-property":262,"../internals/object-get-own-property-descriptor":263,"../internals/own-keys":271}],219:[function(e,t,n){var s=e("../internals/fails");t.exports=!s((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":232}],220:[function(e,t,n){"use strict";var s=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),o=e("../internals/create-property-descriptor"),r=e("../internals/set-to-string-tag"),a=e("../internals/iterators"),l=function(){return this};t.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(s,{next:o(1,n)}),r(e,c,!1,!0),a[c]=l,e}},{"../internals/create-property-descriptor":222,"../internals/iterators":253,"../internals/iterators-core":252,"../internals/object-create":260,"../internals/set-to-string-tag":284}],221:[function(e,t,n){var s=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=s?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":222,"../internals/descriptors":224,"../internals/object-define-property":262}],222:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],223:[function(e,t,n){"use strict";var s=e("../internals/export"),i=e("../internals/create-iterator-constructor"),o=e("../internals/object-get-prototype-of"),r=e("../internals/object-set-prototype-of"),a=e("../internals/set-to-string-tag"),l=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),u=e("../internals/well-known-symbol"),h=e("../internals/is-pure"),d=e("../internals/iterators"),p=e("../internals/iterators-core"),m=p.IteratorPrototype,f=p.BUGGY_SAFARI_ITERATORS,g=u("iterator"),b=function(){return this};t.exports=function(e,t,n,u,p,_,y){i(n,t,u);var S,w,v,M=function(e){if(e===p&&P)return P;if(!f&&e in C)return C[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},x=t+" Iterator",B=!1,C=e.prototype,j=C[g]||C["@@iterator"]||p&&C[p],P=!f&&j||M(p),I="Array"==t&&C.entries||j;if(I&&(S=o(I.call(new e)),m!==Object.prototype&&S.next&&(h||o(S)===m||(r?r(S,m):"function"!=typeof S[g]&&l(S,g,b)),a(S,x,!0,!0),h&&(d[x]=b))),"values"==p&&j&&"values"!==j.name&&(B=!0,P=function(){return j.call(this)}),h&&!y||C[g]===P||l(C,g,P),d[t]=P,p)if(w={values:M("values"),keys:_?P:M("keys"),entries:M("entries")},y)for(v in w)(f||B||!(v in C))&&c(C,v,w[v]);else s({target:t,proto:!0,forced:f||B},w);return w}},{"../internals/create-iterator-constructor":220,"../internals/create-non-enumerable-property":221,"../internals/export":231,"../internals/is-pure":249,"../internals/iterators":253,"../internals/iterators-core":252,"../internals/object-get-prototype-of":266,"../internals/object-set-prototype-of":270,"../internals/redefine":276,"../internals/set-to-string-tag":284,"../internals/well-known-symbol":302}],224:[function(e,t,n){var s=e("../internals/fails");t.exports=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":232}],225:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/is-object"),o=s.document,r=i(o)&&i(o.createElement);t.exports=function(e){return r?o.createElement(e):{}}},{"../internals/global":237,"../internals/is-object":248}],226:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],227:[function(e,t,n){var s=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(s)},{"../internals/engine-user-agent":228}],228:[function(e,t,n){var s=e("../internals/get-built-in");t.exports=s("navigator","userAgent")||""},{"../internals/get-built-in":235}],229:[function(e,t,n){var s,i,o=e("../internals/global"),r=e("../internals/engine-user-agent"),a=o.process,l=a&&a.versions,c=l&&l.v8;c?i=(s=c.split("."))[0]+s[1]:r&&(!(s=r.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=r.match(/Chrome\/(\d+)/))&&(i=s[1]),t.exports=i&&+i},{"../internals/engine-user-agent":228,"../internals/global":237}],230:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],231:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),r=e("../internals/redefine"),a=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,u,h,d,p,m=e.target,f=e.global,g=e.stat;if(n=f?s:g?s[m]||a(m,{}):(s[m]||{}).prototype)for(u in t){if(d=t[u],h=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!c(f?u:m+(g?".":"#")+u,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(e.sham||h&&h.sham)&&o(d,"sham",!0),r(n,u,d,e)}}},{"../internals/copy-constructor-properties":218,"../internals/create-non-enumerable-property":221,"../internals/global":237,"../internals/is-forced":247,"../internals/object-get-own-property-descriptor":263,"../internals/redefine":276,"../internals/set-global":282}],232:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],233:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var s=e("../internals/redefine"),i=e("../internals/fails"),o=e("../internals/well-known-symbol"),r=e("../internals/regexp-exec"),a=e("../internals/create-non-enumerable-property"),l=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),h=o("replace"),d=!!/./[h]&&""===/./[h]("a","$0"),p=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(e,t,n,h){var m=o(e),f=!i((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),g=f&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!f||!g||"replace"===e&&(!c||!u||d)||"split"===e&&!p){var b=/./[m],_=n(m,""[e],(function(e,t,n,s,i){return t.exec===r?f&&!i?{done:!0,value:b.call(t,n,s)}:{done:!0,value:e.call(n,t,s)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=_[0],S=_[1];s(String.prototype,e,y),s(RegExp.prototype,m,2==t?function(e,t){return S.call(e,this,t)}:function(e){return S.call(e,this)})}h&&a(RegExp.prototype[m],"sham",!0)}},{"../internals/create-non-enumerable-property":221,"../internals/fails":232,"../internals/redefine":276,"../internals/regexp-exec":278,"../internals/well-known-symbol":302,"../modules/es.regexp.exec":307}],234:[function(e,t,n){var s=e("../internals/a-function");t.exports=function(e,t,n){if(s(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,s){return e.call(t,n,s)};case 3:return function(n,s,i){return e.call(t,n,s,i)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":207}],235:[function(e,t,n){var s=e("../internals/path"),i=e("../internals/global"),o=function(e){return"function"==typeof e?e:void 0};t.exports=function(e,t){return arguments.length<2?o(s[e])||o(i[e]):s[e]&&s[e][t]||i[e]&&i[e][t]}},{"../internals/global":237,"../internals/path":272}],236:[function(e,t,n){var s=e("../internals/classof"),i=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[s(e)]}},{"../internals/classof":217,"../internals/iterators":253,"../internals/well-known-symbol":302}],237:[function(e,t,n){(function(e){var n=function(e){return e&&e.Math==Math&&e};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],238:[function(e,t,n){var s={}.hasOwnProperty;t.exports=function(e,t){return s.call(e,t)}},{}],239:[function(e,t,n){t.exports={}},{}],240:[function(e,t,n){var s=e("../internals/global");t.exports=function(e,t){var n=s.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":237}],241:[function(e,t,n){var s=e("../internals/get-built-in");t.exports=s("document","documentElement")},{"../internals/get-built-in":235}],242:[function(e,t,n){var s=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!s&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":224,"../internals/document-create-element":225,"../internals/fails":232}],243:[function(e,t,n){var s=e("../internals/fails"),i=e("../internals/classof-raw"),o="".split;t.exports=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},{"../internals/classof-raw":216,"../internals/fails":232}],244:[function(e,t,n){var s=e("../internals/shared-store"),i=Function.toString;"function"!=typeof s.inspectSource&&(s.inspectSource=function(e){return i.call(e)}),t.exports=s.inspectSource},{"../internals/shared-store":286}],245:[function(e,t,n){var s,i,o,r=e("../internals/native-weak-map"),a=e("../internals/global"),l=e("../internals/is-object"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/has"),h=e("../internals/shared-key"),d=e("../internals/hidden-keys"),p=a.WeakMap;if(r){var m=new p,f=m.get,g=m.has,b=m.set;s=function(e,t){return b.call(m,e,t),t},i=function(e){return f.call(m,e)||{}},o=function(e){return g.call(m,e)}}else{var _=h("state");d[_]=!0,s=function(e,t){return c(e,_,t),t},i=function(e){return u(e,_)?e[_]:{}},o=function(e){return u(e,_)}}t.exports={set:s,get:i,has:o,enforce:function(e){return o(e)?i(e):s(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},{"../internals/create-non-enumerable-property":221,"../internals/global":237,"../internals/has":238,"../internals/hidden-keys":239,"../internals/is-object":248,"../internals/native-weak-map":257,"../internals/shared-key":285}],246:[function(e,t,n){var s=e("../internals/well-known-symbol"),i=e("../internals/iterators"),o=s("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},{"../internals/iterators":253,"../internals/well-known-symbol":302}],247:[function(e,t,n){var s=e("../internals/fails"),i=/#|\.prototype\./,o=function(e,t){var n=a[r(e)];return n==c||n!=l&&("function"==typeof t?s(t):!!t)},r=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},{"../internals/fails":232}],248:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],249:[function(e,t,n){t.exports=!1},{}],250:[function(e,t,n){var s=e("../internals/is-object"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return s(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"../internals/classof-raw":216,"../internals/is-object":248,"../internals/well-known-symbol":302}],251:[function(e,t,n){var s=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),o=e("../internals/to-length"),r=e("../internals/function-bind-context"),a=e("../internals/get-iterator-method"),l=e("../internals/call-with-safe-iteration-closing"),c=function(e,t){this.stopped=e,this.result=t};(t.exports=function(e,t,n,u,h){var d,p,m,f,g,b,_,y=r(t,n,u?2:1);if(h)d=e;else{if("function"!=typeof(p=a(e)))throw TypeError("Target is not iterable");if(i(p)){for(m=0,f=o(e.length);f>m;m++)if((g=u?y(s(_=e[m])[0],_[1]):y(e[m]))&&g instanceof c)return g;return new c(!1)}d=p.call(e)}for(b=d.next;!(_=b.call(d)).done;)if("object"==typeof(g=l(d,y,_.value,u))&&g&&g instanceof c)return g;return new c(!1)}).stop=function(e){return new c(!0,e)}},{"../internals/an-object":212,"../internals/call-with-safe-iteration-closing":214,"../internals/function-bind-context":234,"../internals/get-iterator-method":236,"../internals/is-array-iterator-method":246,"../internals/to-length":296}],252:[function(e,t,n){"use strict";var s,i,o,r=e("../internals/object-get-prototype-of"),a=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),c=e("../internals/well-known-symbol"),u=e("../internals/is-pure"),h=c("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=r(r(o)))!==Object.prototype&&(s=i):d=!0),null==s&&(s={}),u||l(s,h)||a(s,h,(function(){return this})),t.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:d}},{"../internals/create-non-enumerable-property":221,"../internals/has":238,"../internals/is-pure":249,"../internals/object-get-prototype-of":266,"../internals/well-known-symbol":302}],253:[function(e,t,n){arguments[4][239][0].apply(n,arguments)},{dup:239}],254:[function(e,t,n){var s,i,o,r,a,l,c,u,h=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,p=e("../internals/classof-raw"),m=e("../internals/task").set,f=e("../internals/engine-is-ios"),g=h.MutationObserver||h.WebKitMutationObserver,b=h.process,_=h.Promise,y="process"==p(b),S=d(h,"queueMicrotask"),w=S&&S.value;w||(s=function(){var e,t;for(y&&(e=b.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?r():o=void 0,e}}o=void 0,e&&e.enter()},y?r=function(){b.nextTick(s)}:g&&!f?(a=!0,l=document.createTextNode(""),new g(s).observe(l,{characterData:!0}),r=function(){l.data=a=!a}):_&&_.resolve?(c=_.resolve(void 0),u=c.then,r=function(){u.call(c,s)}):r=function(){m.call(h,s)}),t.exports=w||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,r()),o=t}},{"../internals/classof-raw":216,"../internals/engine-is-ios":227,"../internals/global":237,"../internals/object-get-own-property-descriptor":263,"../internals/task":291}],255:[function(e,t,n){var s=e("../internals/global");t.exports=s.Promise},{"../internals/global":237}],256:[function(e,t,n){var s=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!s((function(){return!String(Symbol())}))},{"../internals/fails":232}],257:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/inspect-source"),o=s.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},{"../internals/global":237,"../internals/inspect-source":244}],258:[function(e,t,n){"use strict";var s=e("../internals/a-function"),i=function(e){var t,n;this.promise=new e((function(e,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=s})),this.resolve=s(t),this.reject=s(n)};t.exports.f=function(e){return new i(e)}},{"../internals/a-function":207}],259:[function(e,t,n){"use strict";var s=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/object-keys"),r=e("../internals/object-get-own-property-symbols"),a=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),c=e("../internals/indexed-object"),u=Object.assign,h=Object.defineProperty;t.exports=!u||i((function(){if(s&&1!==u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||"abcdefghijklmnopqrst"!=o(u({},t)).join("")}))?function(e,t){for(var n=l(e),i=arguments.length,u=1,h=r.f,d=a.f;i>u;)for(var p,m=c(arguments[u++]),f=h?o(m).concat(h(m)):o(m),g=f.length,b=0;g>b;)p=f[b++],s&&!d.call(m,p)||(n[p]=m[p]);return n}:u},{"../internals/descriptors":224,"../internals/fails":232,"../internals/indexed-object":243,"../internals/object-get-own-property-symbols":265,"../internals/object-keys":268,"../internals/object-property-is-enumerable":269,"../internals/to-object":297}],260:[function(e,t,n){var s,i=e("../internals/an-object"),o=e("../internals/object-define-properties"),r=e("../internals/enum-bug-keys"),a=e("../internals/hidden-keys"),l=e("../internals/html"),c=e("../internals/document-create-element"),u=e("../internals/shared-key"),h=u("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"<\/script>"},m=function(){try{s=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=s?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(s):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=r.length;n--;)delete m.prototype[r[n]];return m()};a[h]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[h]=e):n=m(),void 0===t?n:o(n,t)}},{"../internals/an-object":212,"../internals/document-create-element":225,"../internals/enum-bug-keys":230,"../internals/hidden-keys":239,"../internals/html":241,"../internals/object-define-properties":261,"../internals/shared-key":285}],261:[function(e,t,n){var s=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/an-object"),r=e("../internals/object-keys");t.exports=s?Object.defineProperties:function(e,t){o(e);for(var n,s=r(t),a=s.length,l=0;a>l;)i.f(e,n=s[l++],t[n]);return e}},{"../internals/an-object":212,"../internals/descriptors":224,"../internals/object-define-property":262,"../internals/object-keys":268}],262:[function(e,t,n){var s=e("../internals/descriptors"),i=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),r=e("../internals/to-primitive"),a=Object.defineProperty;n.f=s?a:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":212,"../internals/descriptors":224,"../internals/ie8-dom-define":242,"../internals/to-primitive":298}],263:[function(e,t,n){var s=e("../internals/descriptors"),i=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),r=e("../internals/to-indexed-object"),a=e("../internals/to-primitive"),l=e("../internals/has"),c=e("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=s?u:function(e,t){if(e=r(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":222,"../internals/descriptors":224,"../internals/has":238,"../internals/ie8-dom-define":242,"../internals/object-property-is-enumerable":269,"../internals/to-indexed-object":294,"../internals/to-primitive":298}],264:[function(e,t,n){var s=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return s(e,i)}},{"../internals/enum-bug-keys":230,"../internals/object-keys-internal":267}],265:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],266:[function(e,t,n){var s=e("../internals/has"),i=e("../internals/to-object"),o=e("../internals/shared-key"),r=e("../internals/correct-prototype-getter"),a=o("IE_PROTO"),l=Object.prototype;t.exports=r?Object.getPrototypeOf:function(e){return e=i(e),s(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},{"../internals/correct-prototype-getter":219,"../internals/has":238,"../internals/shared-key":285,"../internals/to-object":297}],267:[function(e,t,n){var s=e("../internals/has"),i=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,r=e("../internals/hidden-keys");t.exports=function(e,t){var n,a=i(e),l=0,c=[];for(n in a)!s(r,n)&&s(a,n)&&c.push(n);for(;t.length>l;)s(a,n=t[l++])&&(~o(c,n)||c.push(n));return c}},{"../internals/array-includes":213,"../internals/has":238,"../internals/hidden-keys":239,"../internals/to-indexed-object":294}],268:[function(e,t,n){var s=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return s(e,i)}},{"../internals/enum-bug-keys":230,"../internals/object-keys-internal":267}],269:[function(e,t,n){"use strict";var s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!s.call({1:2},1);n.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:s},{}],270:[function(e,t,n){var s=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return s(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},{"../internals/a-possible-prototype":208,"../internals/an-object":212}],271:[function(e,t,n){var s=e("../internals/get-built-in"),i=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),r=e("../internals/an-object");t.exports=s("Reflect","ownKeys")||function(e){var t=i.f(r(e)),n=o.f;return n?t.concat(n(e)):t}},{"../internals/an-object":212,"../internals/get-built-in":235,"../internals/object-get-own-property-names":264,"../internals/object-get-own-property-symbols":265}],272:[function(e,t,n){var s=e("../internals/global");t.exports=s},{"../internals/global":237}],273:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],274:[function(e,t,n){var s=e("../internals/an-object"),i=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(e,t){if(s(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":212,"../internals/is-object":248,"../internals/new-promise-capability":258}],275:[function(e,t,n){var s=e("../internals/redefine");t.exports=function(e,t,n){for(var i in t)s(e,i,t[i],n);return e}},{"../internals/redefine":276}],276:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),r=e("../internals/set-global"),a=e("../internals/inspect-source"),l=e("../internals/internal-state"),c=l.get,u=l.enforce,h=String(String).split("String");(t.exports=function(e,t,n,a){var l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),u(n).source=h.join("string"==typeof t?t:"")),e!==s?(l?!d&&e[t]&&(c=!0):delete e[t],c?e[t]=n:i(e,t,n)):c?e[t]=n:r(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||a(this)}))},{"../internals/create-non-enumerable-property":221,"../internals/global":237,"../internals/has":238,"../internals/inspect-source":244,"../internals/internal-state":245,"../internals/set-global":282}],277:[function(e,t,n){var s=e("./classof-raw"),i=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==s(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},{"./classof-raw":216,"./regexp-exec":278}],278:[function(e,t,n){"use strict";var s,i,o=e("./regexp-flags"),r=e("./regexp-sticky-helpers"),a=RegExp.prototype.exec,l=String.prototype.replace,c=a,u=(s=/a/,i=/b*/g,a.call(s,"a"),a.call(i,"a"),0!==s.lastIndex||0!==i.lastIndex),h=r.UNSUPPORTED_Y||r.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||h)&&(c=function(e){var t,n,s,i,r=this,c=h&&r.sticky,p=o.call(r),m=r.source,f=0,g=e;return c&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(e).slice(r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==e[r.lastIndex-1])&&(m="(?: "+m+")",g=" "+g,f++),n=new RegExp("^(?:"+m+")",p)),d&&(n=new RegExp("^"+m+"$(?!\\s)",p)),u&&(t=r.lastIndex),s=a.call(c?n:r,g),c?s?(s.input=s.input.slice(f),s[0]=s[0].slice(f),s.index=r.lastIndex,r.lastIndex+=s[0].length):r.lastIndex=0:u&&s&&(r.lastIndex=r.global?s.index+s[0].length:t),d&&s&&s.length>1&&l.call(s[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(s[i]=void 0)})),s}),t.exports=c},{"./regexp-flags":279,"./regexp-sticky-helpers":280}],279:[function(e,t,n){"use strict";var s=e("../internals/an-object");t.exports=function(){var e=s(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":212}],280:[function(e,t,n){"use strict";var s=e("./fails");function i(e,t){return RegExp(e,t)}n.UNSUPPORTED_Y=s((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=s((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":232}],281:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],282:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{i(s,e,t)}catch(n){s[e]=t}return t}},{"../internals/create-non-enumerable-property":221,"../internals/global":237}],283:[function(e,t,n){"use strict";var s=e("../internals/get-built-in"),i=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),r=e("../internals/descriptors"),a=o("species");t.exports=function(e){var t=s(e),n=i.f;r&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":224,"../internals/get-built-in":235,"../internals/object-define-property":262,"../internals/well-known-symbol":302}],284:[function(e,t,n){var s=e("../internals/object-define-property").f,i=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&s(e,o,{configurable:!0,value:t})}},{"../internals/has":238,"../internals/object-define-property":262,"../internals/well-known-symbol":302}],285:[function(e,t,n){var s=e("../internals/shared"),i=e("../internals/uid"),o=s("keys");t.exports=function(e){return o[e]||(o[e]=i(e))}},{"../internals/shared":287,"../internals/uid":300}],286:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/set-global"),o=s["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},{"../internals/global":237,"../internals/set-global":282}],287:[function(e,t,n){var s=e("../internals/is-pure"),i=e("../internals/shared-store");(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":249,"../internals/shared-store":286}],288:[function(e,t,n){var s=e("../internals/an-object"),i=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n,r=s(e).constructor;return void 0===r||null==(n=s(r)[o])?t:i(n)}},{"../internals/a-function":207,"../internals/an-object":212,"../internals/well-known-symbol":302}],289:[function(e,t,n){var s=e("../internals/to-integer"),i=e("../internals/require-object-coercible"),o=function(e){return function(t,n){var o,r,a=String(i(t)),l=s(n),c=a.length;return l<0||l>=c?e?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(r=a.charCodeAt(l+1))<56320||r>57343?e?a.charAt(l):o:e?a.slice(l,l+2):r-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},{"../internals/require-object-coercible":281,"../internals/to-integer":295}],290:[function(e,t,n){"use strict";var s=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(i(this)),n="",o=s(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},{"../internals/require-object-coercible":281,"../internals/to-integer":295}],291:[function(e,t,n){var s,i,o,r=e("../internals/global"),a=e("../internals/fails"),l=e("../internals/classof-raw"),c=e("../internals/function-bind-context"),u=e("../internals/html"),h=e("../internals/document-create-element"),d=e("../internals/engine-is-ios"),p=r.location,m=r.setImmediate,f=r.clearImmediate,g=r.process,b=r.MessageChannel,_=r.Dispatch,y=0,S={},w=function(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}},v=function(e){return function(){w(e)}},M=function(e){w(e.data)},x=function(e){r.postMessage(e+"",p.protocol+"//"+p.host)};m&&f||(m=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return S[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},s(y),y},f=function(e){delete S[e]},"process"==l(g)?s=function(e){g.nextTick(v(e))}:_&&_.now?s=function(e){_.now(v(e))}:b&&!d?(o=(i=new b).port2,i.port1.onmessage=M,s=c(o.postMessage,o,1)):!r.addEventListener||"function"!=typeof postMessage||r.importScripts||a(x)||"file:"===p.protocol?s="onreadystatechange"in h("script")?function(e){u.appendChild(h("script")).onreadystatechange=function(){u.removeChild(this),w(e)}}:function(e){setTimeout(v(e),0)}:(s=x,r.addEventListener("message",M,!1))),t.exports={set:m,clear:f}},{"../internals/classof-raw":216,"../internals/document-create-element":225,"../internals/engine-is-ios":227,"../internals/fails":232,"../internals/function-bind-context":234,"../internals/global":237,"../internals/html":241}],292:[function(e,t,n){var s=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=s(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":216}],293:[function(e,t,n){var s=e("../internals/to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){var n=s(e);return n<0?i(n+t,0):o(n,t)}},{"../internals/to-integer":295}],294:[function(e,t,n){var s=e("../internals/indexed-object"),i=e("../internals/require-object-coercible");t.exports=function(e){return s(i(e))}},{"../internals/indexed-object":243,"../internals/require-object-coercible":281}],295:[function(e,t,n){var s=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:s)(e)}},{}],296:[function(e,t,n){var s=e("../internals/to-integer"),i=Math.min;t.exports=function(e){return e>0?i(s(e),9007199254740991):0}},{"../internals/to-integer":295}],297:[function(e,t,n){var s=e("../internals/require-object-coercible");t.exports=function(e){return Object(s(e))}},{"../internals/require-object-coercible":281}],298:[function(e,t,n){var s=e("../internals/is-object");t.exports=function(e,t){if(!s(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!s(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":248}],299:[function(e,t,n){var s={};s[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(s)},{"../internals/well-known-symbol":302}],300:[function(e,t,n){var s=0,i=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++s+i).toString(36)}},{}],301:[function(e,t,n){var s=e("../internals/native-symbol");t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":256}],302:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/shared"),o=e("../internals/has"),r=e("../internals/uid"),a=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),c=i("wks"),u=s.Symbol,h=l?u:u&&u.withoutSetter||r;t.exports=function(e){return o(c,e)||(a&&o(u,e)?c[e]=u[e]:c[e]=h("Symbol."+e)),c[e]}},{"../internals/global":237,"../internals/has":238,"../internals/native-symbol":256,"../internals/shared":287,"../internals/uid":300,"../internals/use-symbol-as-uid":301}],303:[function(e,t,n){"use strict";var s=e("../internals/to-indexed-object"),i=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),r=e("../internals/internal-state"),a=e("../internals/define-iterator"),l=r.set,c=r.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:s(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,s=e.index++;return!t||s>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:s,done:!1}:"values"==n?{value:t[s],done:!1}:{value:[s,t[s]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":209,"../internals/define-iterator":223,"../internals/internal-state":245,"../internals/iterators":253,"../internals/to-indexed-object":294}],304:[function(e,t,n){"use strict";var s=e("../internals/export"),i=e("../internals/to-integer"),o=e("../internals/this-number-value"),r=e("../internals/string-repeat"),a=e("../internals/fails"),l=1..toFixed,c=Math.floor,u=function(e,t,n){return 0===t?n:t%2==1?u(e,t-1,n*e):u(e*e,t/2,n)};s({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){l.call({})}))},{toFixed:function(e){var t,n,s,a,l=o(this),h=i(e),d=[0,0,0,0,0,0],p="",m="0",f=function(e,t){for(var n=-1,s=t;++n<6;)s+=e*d[n],d[n]=s%1e7,s=c(s/1e7)},g=function(e){for(var t=6,n=0;--t>=0;)n+=d[t],d[t]=c(n/e),n=n%e*1e7},b=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==d[e]){var n=String(d[e]);t=""===t?n:t+r.call("0",7-n.length)+n}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*u(2,69,1))-69)<0?l*u(2,-t,1):l/u(2,t,1),n*=4503599627370496,(t=52-t)>0){for(f(0,n),s=h;s>=7;)f(1e7,0),s-=7;for(f(u(10,s,1),0),s=t-1;s>=23;)g(1<<23),s-=23;g(1<<s),f(1,1),g(2),m=b()}else f(0,n),f(1<<-t,0),m=b()+r.call("0",h);return m=h>0?p+((a=m.length)<=h?"0."+r.call("0",h-a)+m:m.slice(0,a-h)+"."+m.slice(a-h)):p+m}})},{"../internals/export":231,"../internals/fails":232,"../internals/string-repeat":290,"../internals/this-number-value":292,"../internals/to-integer":295}],305:[function(e,t,n){var s=e("../internals/export"),i=e("../internals/object-assign");s({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},{"../internals/export":231,"../internals/object-assign":259}],306:[function(e,t,n){"use strict";var s,i,o,r,a=e("../internals/export"),l=e("../internals/is-pure"),c=e("../internals/global"),u=e("../internals/get-built-in"),h=e("../internals/native-promise-constructor"),d=e("../internals/redefine"),p=e("../internals/redefine-all"),m=e("../internals/set-to-string-tag"),f=e("../internals/set-species"),g=e("../internals/is-object"),b=e("../internals/a-function"),_=e("../internals/an-instance"),y=e("../internals/classof-raw"),S=e("../internals/inspect-source"),w=e("../internals/iterate"),v=e("../internals/check-correctness-of-iteration"),M=e("../internals/species-constructor"),x=e("../internals/task").set,B=e("../internals/microtask"),C=e("../internals/promise-resolve"),j=e("../internals/host-report-errors"),P=e("../internals/new-promise-capability"),I=e("../internals/perform"),T=e("../internals/internal-state"),A=e("../internals/is-forced"),k=e("../internals/well-known-symbol"),E=e("../internals/engine-v8-version"),O=k("species"),L="Promise",R=T.get,F=T.set,D=T.getterFor(L),G=h,H=c.TypeError,V=c.document,N=c.process,z=u("fetch"),W=P.f,U=W,q="process"==y(N),$=!!(V&&V.createEvent&&c.dispatchEvent),X=A(L,(function(){if(!(S(G)!==String(G))){if(66===E)return!0;if(!q&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!G.prototype.finally)return!0;if(E>=51&&/native code/.test(G))return!1;var e=G.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[O]=t,!(e.then((function(){}))instanceof t)})),K=X||!v((function(e){G.all(e).catch((function(){}))})),Q=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},Y=function(e,t,n){if(!t.notified){t.notified=!0;var s=t.reactions;B((function(){for(var i=t.value,o=1==t.state,r=0;s.length>r;){var a,l,c,u=s[r++],h=o?u.ok:u.fail,d=u.resolve,p=u.reject,m=u.domain;try{h?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===h?a=i:(m&&m.enter(),a=h(i),m&&(m.exit(),c=!0)),a===u.promise?p(H("Promise-chain cycle")):(l=Q(a))?l.call(a,d,p):d(a)):p(i)}catch(e){m&&!c&&m.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Z(e,t)}))}},J=function(e,t,n){var s,i;$?((s=V.createEvent("Event")).promise=t,s.reason=n,s.initEvent(e,!1,!0),c.dispatchEvent(s)):s={promise:t,reason:n},(i=c["on"+e])?i(s):"unhandledrejection"===e&&j("Unhandled promise rejection",n)},Z=function(e,t){x.call(c,(function(){var n,s=t.value;if(ee(t)&&(n=I((function(){q?N.emit("unhandledRejection",s,e):J("unhandledrejection",e,s)})),t.rejection=q||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){x.call(c,(function(){q?N.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},ne=function(e,t,n,s){return function(i){e(t,n,i,s)}},se=function(e,t,n,s){t.done||(t.done=!0,s&&(t=s),t.value=n,t.state=2,Y(e,t,!0))},ie=function(e,t,n,s){if(!t.done){t.done=!0,s&&(t=s);try{if(e===n)throw H("Promise can't be resolved itself");var i=Q(n);i?B((function(){var s={done:!1};try{i.call(n,ne(ie,e,s,t),ne(se,e,s,t))}catch(n){se(e,s,n,t)}})):(t.value=n,t.state=1,Y(e,t,!1))}catch(n){se(e,{done:!1},n,t)}}};X&&(G=function(e){_(this,G,L),b(e),s.call(this);var t=R(this);try{e(ne(ie,this,t),ne(se,this,t))}catch(e){se(this,t,e)}},(s=function(e){F(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(G.prototype,{then:function(e,t){var n=D(this),s=W(M(this,G));return s.ok="function"!=typeof e||e,s.fail="function"==typeof t&&t,s.domain=q?N.domain:void 0,n.parent=!0,n.reactions.push(s),0!=n.state&&Y(this,n,!1),s.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new s,t=R(e);this.promise=e,this.resolve=ne(ie,e,t),this.reject=ne(se,e,t)},P.f=W=function(e){return e===G||e===o?new i(e):U(e)},l||"function"!=typeof h||(r=h.prototype.then,d(h.prototype,"then",(function(e,t){var n=this;return new G((function(e,t){r.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return C(G,z.apply(c,arguments))}}))),a({global:!0,wrap:!0,forced:X},{Promise:G}),m(G,L,!1,!0),f(L),o=u(L),a({target:L,stat:!0,forced:X},{reject:function(e){var t=W(this);return t.reject.call(void 0,e),t.promise}}),a({target:L,stat:!0,forced:l||X},{resolve:function(e){return C(l&&this===o?G:this,e)}}),a({target:L,stat:!0,forced:K},{all:function(e){var t=this,n=W(t),s=n.resolve,i=n.reject,o=I((function(){var n=b(t.resolve),o=[],r=0,a=1;w(e,(function(e){var l=r++,c=!1;o.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,o[l]=e,--a||s(o))}),i)})),--a||s(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=W(t),s=n.reject,i=I((function(){var i=b(t.resolve);w(e,(function(e){i.call(t,e).then(n.resolve,s)}))}));return i.error&&s(i.value),n.promise}})},{"../internals/a-function":207,"../internals/an-instance":211,"../internals/check-correctness-of-iteration":215,"../internals/classof-raw":216,"../internals/engine-v8-version":229,"../internals/export":231,"../internals/get-built-in":235,"../internals/global":237,"../internals/host-report-errors":240,"../internals/inspect-source":244,"../internals/internal-state":245,"../internals/is-forced":247,"../internals/is-object":248,"../internals/is-pure":249,"../internals/iterate":251,"../internals/microtask":254,"../internals/native-promise-constructor":255,"../internals/new-promise-capability":258,"../internals/perform":273,"../internals/promise-resolve":274,"../internals/redefine":276,"../internals/redefine-all":275,"../internals/set-species":283,"../internals/set-to-string-tag":284,"../internals/species-constructor":288,"../internals/task":291,"../internals/well-known-symbol":302}],307:[function(e,t,n){"use strict";var s=e("../internals/export"),i=e("../internals/regexp-exec");s({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},{"../internals/export":231,"../internals/regexp-exec":278}],308:[function(e,t,n){"use strict";var s=e("../internals/redefine"),i=e("../internals/an-object"),o=e("../internals/fails"),r=e("../internals/regexp-flags"),a=RegExp.prototype,l=a.toString,c=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u="toString"!=l.name;(c||u)&&s(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in a)?r.call(e):n)}),{unsafe:!0})},{"../internals/an-object":212,"../internals/fails":232,"../internals/redefine":276,"../internals/regexp-flags":279}],309:[function(e,t,n){"use strict";var s=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/is-regexp"),o=e("../internals/an-object"),r=e("../internals/require-object-coercible"),a=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),c=e("../internals/to-length"),u=e("../internals/regexp-exec-abstract"),h=e("../internals/regexp-exec"),d=e("../internals/fails"),p=[].push,m=Math.min,f=!d((function(){return!RegExp(4294967295,"y")}));s("split",2,(function(e,t,n){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var s=String(r(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[s];if(!i(e))return t.call(s,e,o);for(var a,l,c,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,f=new RegExp(e.source,d+"g");(a=h.call(f,s))&&!((l=f.lastIndex)>m&&(u.push(s.slice(m,a.index)),a.length>1&&a.index<s.length&&p.apply(u,a.slice(1)),c=a[0].length,m=l,u.length>=o));)f.lastIndex===a.index&&f.lastIndex++;return m===s.length?!c&&f.test("")||u.push(""):u.push(s.slice(m)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=r(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):s.call(String(i),t,n)},function(e,i){var r=n(s,e,this,i,s!==t);if(r.done)return r.value;var h=o(e),d=String(this),p=a(h,RegExp),g=h.unicode,b=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(f?"y":"g"),_=new p(f?h:"^(?:"+h.source+")",b),y=void 0===i?4294967295:i>>>0;if(0===y)return[];if(0===d.length)return null===u(_,d)?[d]:[];for(var S=0,w=0,v=[];w<d.length;){_.lastIndex=f?w:0;var M,x=u(_,f?d:d.slice(w));if(null===x||(M=m(c(_.lastIndex+(f?0:w)),d.length))===S)w=l(d,w,g);else{if(v.push(d.slice(S,w)),v.length===y)return v;for(var B=1;B<=x.length-1;B++)if(v.push(x[B]),v.length===y)return v;w=S=M}}return v.push(d.slice(S)),v}]}),!f)},{"../internals/advance-string-index":210,"../internals/an-object":212,"../internals/fails":232,"../internals/fix-regexp-well-known-symbol-logic":233,"../internals/is-regexp":250,"../internals/regexp-exec":278,"../internals/regexp-exec-abstract":277,"../internals/require-object-coercible":281,"../internals/species-constructor":288,"../internals/to-length":296}],310:[function(e,t,n){"use strict";var s=e("../internals/export"),i=e("../internals/descriptors"),o=e("../internals/global"),r=e("../internals/has"),a=e("../internals/is-object"),l=e("../internals/object-define-property").f,c=e("../internals/copy-constructor-properties"),u=o.Symbol;if(i&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(h[t]=!0),t};c(d,u);var p=d.prototype=u.prototype;p.constructor=d;var m=p.toString,f="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=m.call(e);if(r(h,e))return"";var n=f?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),s({global:!0,forced:!0},{Symbol:d})}},{"../internals/copy-constructor-properties":218,"../internals/descriptors":224,"../internals/export":231,"../internals/global":237,"../internals/has":238,"../internals/is-object":248,"../internals/object-define-property":262}],311:[function(e,t,n){var s=e("../internals/global"),i=e("../internals/dom-iterables"),o=e("../modules/es.array.iterator"),r=e("../internals/create-non-enumerable-property"),a=e("../internals/well-known-symbol"),l=a("iterator"),c=a("toStringTag"),u=o.values;for(var h in i){var d=s[h],p=d&&d.prototype;if(p){if(p[l]!==u)try{r(p,l,u)}catch(e){p[l]=u}if(p[c]||r(p,c,h),i[h])for(var m in o)if(p[m]!==o[m])try{r(p,m,o[m])}catch(e){p[m]=o[m]}}}},{"../internals/create-non-enumerable-property":221,"../internals/dom-iterables":226,"../internals/global":237,"../internals/well-known-symbol":302,"../modules/es.array.iterator":303}]},{},[156,115,191,124,206,168,138,6,159,82,186,12,183,202,131]);